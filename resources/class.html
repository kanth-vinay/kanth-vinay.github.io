<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Slides on Steroids — Chapter 3: Applications of Differentiation</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">

<!-- Reveal.js core CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.css"/>

<style>
  :root{
    --brand-primary:#00539C;
    --brand-secondary:#00325C;
    --accent-green:#2E7D32;
    --accent-orange:#EF6C00;
    --accent-red:#C62828;

    --bg:#ffffff;
    --text:#0f172a;
    --muted:#475569;
    --surface:#f5f7ff;
    --card:#ffffff;
    --border:#e2e8f0;
    --pill:#e6eef9;
  }
  body.dark{
    --bg:#0b1220;
    --text:#e6eaf3;
    --muted:#a7b2c5;
    --surface:#0f1a2b;
    --card:#121e32;
    --border:#20314d;
    --pill:#0e2a4a;
  }

  /* Base */
  html,body{height:100%;}
  body{background:var(--bg); color:var(--text); font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif; transition: background 0.3s ease, color 0.3s ease;}
  .reveal{color:var(--text);}
  .reveal h2,.reveal h3{font-family:Poppins, Inter, system-ui, sans-serif;}
  .reveal h2{color:var(--brand-secondary); font-weight:700; letter-spacing:.2px;}
  .reveal h3{color:var(--brand-primary); font-weight:600;}
  .reveal p, .reveal li{color:var(--text); text-align:left;}
  .reveal a{color:var(--brand-primary); text-decoration:none; border-bottom:1px solid color-mix(in lab, var(--brand-primary) 60%, transparent);}

  /* Vertical centering of all slides */
  .reveal .slides section{
    display:flex !important;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    gap:1rem;
    padding: 80px 20px; /* Space for header/footer */
    min-height: 100%;
    box-sizing: border-box;
  }

  /* Fixed Header & Footer */
  .sos-header, .sos-footer {
    position:fixed; left:0; right:0; z-index:50;
    display:flex; align-items:center; justify-content:space-between;
    padding:.6rem 1.5rem; gap:.75rem;
    background: var(--brand-primary);
    color: #ffffff;
  }
  .sos-header{ top:0; border-bottom: 2px solid var(--brand-secondary); }
  .sos-footer{ bottom:0; border-top: 2px solid var(--brand-secondary); }

  .sos-h-left{font-weight:600;}
  .sos-h-center{justify-self:center; font-weight:700; letter-spacing: 0.5px;}
  .sos-h-right{justify-self:end;}

  .btn{
    appearance:none; border:1px solid #ffffff; background:transparent; color:#ffffff;
    padding:.45rem .75rem; border-radius:.6rem; font-weight:600; cursor:pointer;
    transition:transform .1s ease, background .2s ease, color .2s ease;
  }
  .btn:hover{
    transform:translateY(-1px);
    background: #ffffff;
    color: var(--brand-primary);
  }

  .footer-left{display:flex; gap:.5rem; flex-wrap:wrap;}
  .footer-right{font-size:.9rem; opacity: 0.8;}
  .pill.footer-pill {
    border:1px solid rgba(255,255,255,0.7); background:transparent; color:#ffffff; padding:.2rem .55rem; border-radius:999px; font-weight:600; text-decoration: none;
    transition: all 0.2s ease;
  }
  .pill.footer-pill a { color: #ffffff; text-decoration: none; border: 0;}
  .pill.footer-pill:hover { background: #ffffff; color: var(--brand-primary); }
  .pill.footer-pill:hover a { color: var(--brand-primary); }

  .badge{display:inline-flex; align-items:center; gap:.5rem; padding:.25rem .5rem; border-radius:999px;
    border:1px solid var(--border); background:var(--pill); color:var(--brand-primary); font-weight:600; font-size:.85rem;}
  .badge .dot{width:.5rem; height:.5rem; border-radius:50%; background:var(--brand-primary);}


  /* Cards & callouts */
  .callout{
    border-left:5px solid var(--accent-orange);
    background:color-mix(in lab, var(--accent-orange) 8%, var(--card));
    padding:1rem 1.5rem; border-radius:.5rem; width:min(100%, 900px);
  }
  .teal{border-left-color:var(--brand-primary); background:color-mix(in lab, var(--brand-primary) 8%, var(--card));}
  .success{border-left-color:var(--accent-green); background:color-mix(in lab, var(--accent-green) 8%, var(--card));}
  .danger{border-left-color:var(--accent-red); background:color-mix(in lab, var(--accent-red) 8%, var(--card));}
  .review-questions ul { list-style-type: decimal; padding-left: 20px; }
  .review-questions li { margin-bottom: 0.75em; }

  /* Process map (mind-map) */
  .process{
    display:flex; justify-content: center; gap:10px; align-items:stretch; width:min(100%, 1100px);
    list-style: none; padding: 0; flex-wrap: wrap;
  }
  .step{
    display:flex; flex: 1; flex-direction:column; align-items:center; text-align: center; gap:.4rem; padding:.6rem .4rem;
    background:var(--card); border:1px solid var(--border); border-radius:.8rem;
    box-shadow:0 4px 10px color-mix(in lab, var(--brand-primary) 8%, transparent);
    min-width: 140px;
    transition: all 0.2s ease-in-out;
  }
  .step .num{
    width:30px; height:30px; border-radius:50%; display:grid; place-items:center; font-weight:700; color:#fff; background:var(--brand-primary);
  }
  .step.active{outline:3px solid color-mix(in lab, var(--accent-orange) 60%, transparent); transform: translateY(-3px);}
  .arrow{
    text-align:center; font-size:1.5rem; color:var(--muted); align-self: center;
  }

  /* Interactive tools */
  .interactive-tool{
    width: min(100%, 1100px); background:var(--card); border:1px solid var(--border); border-radius:1rem; padding:1.5rem;
    display:grid; grid-template-columns: minmax(280px, 0.35fr) 1fr; gap:1.5rem;
    box-shadow:0 10px 24px color-mix(in lab, var(--brand-primary) 10%, transparent);
  }
  .controls{display:flex; flex-direction:column; gap:1rem;}
  .control-row{display:grid; grid-template-columns: auto 1fr auto; gap:.75rem; align-items:center;}
  .control-row label{font-size:.9rem; color:var(--muted); font-weight:600; justify-self: start;}
  .control-row input[type="range"]{width:100%;}
  .control-row output { font-family: ui-monospace, monospace; font-weight: 600; color: var(--brand-secondary); background: var(--surface); padding: .2rem .4rem; border-radius: .3rem; width: 45px; text-align: center;}
  .legend{display:flex; gap:.6rem; flex-wrap:wrap; align-items:center; font-size:.9rem; color:var(--muted); margin-top: 1rem;}
  .chip{display:inline-flex; align-items:center; gap:.35rem; padding:.15rem .5rem; border-radius:999px; border:1px dashed var(--border); background:var(--surface);}
  .chip .dot {width:.6rem; height:.6rem; border-radius:50%;}
  .toggle-controls { margin-top: 1rem; display: flex; flex-direction: column; gap: 0.5rem;}
  .toggle-controls label { font-size: 0.9rem; font-weight: 600; cursor: pointer;}

  canvas.tool-canvas{width:100%; height:auto; aspect-ratio: 4/3; background:var(--surface); border:1px solid var(--border); border-radius:.75rem;}
  
  @media (max-width: 800px) {
    .interactive-tool, .worked-example-container {
        grid-template-columns: 1fr;
    }
    canvas.tool-canvas {
        height: 350px;
    }
  }

  /* Flip cards */
  .cards{display:grid; grid-template-columns:repeat(auto-fit, minmax(280px,1fr)); gap:1rem; width:min(100%, 1100px);}
  .card{
    perspective:1000px; height:260px;
  }
  .card-inner{
    width:100%; height:100%; position:relative; transform-style:preserve-3d;
    transition:transform .6s ease;
    cursor: pointer;
  }
  .card.flip .card-inner{transform:rotateY(180deg);}
  .card-face{
    position:absolute; inset:0; backface-visibility:hidden; border:1px solid var(--border); border-radius:.8rem; padding:1rem; background:var(--card);
    display:flex; flex-direction:column; justify-content:center; align-items:flex-start; gap:.5rem;
  }
  .card-face h4{margin:0; color:var(--brand-secondary);}
  .card-face.back{transform:rotateY(180deg);}
  .tag{font-size:.75rem; font-weight:700; letter-spacing:.3px; text-transform:uppercase; color:var(--brand-primary);}

  /* “Pedagogical tables” */
  .pedago{
    width:min(100%, 1000px); border-collapse:separate; border-spacing:0; overflow:hidden; border-radius:.8rem; border:1px solid var(--border);
  }
  .pedago th, .pedago td{padding:.7rem .8rem; border-bottom:1px solid var(--border); vertical-align:top;}
  .pedago thead th{background:var(--surface); color:var(--brand-secondary); text-align:left;}
  .pedago tr:last-child td{border-bottom:0;}
  .pill{border:1px solid var(--border); background:var(--surface); color:var(--brand-primary); padding:.2rem .55rem; border-radius:999px; font-weight:600; text-decoration: none;}
  .pill-pos{background:color-mix(in lab, var(--accent-green) 15%, var(--surface)); color:var(--accent-green); border:1px solid color-mix(in lab, var(--accent-green) 35%, var(--surface));}
  .pill-neg{background:color-mix(in lab, var(--accent-red) 12%, var(--surface)); color:var(--accent-red); border:1px solid color-mix(in lab, var(--accent-red) 35%, var(--surface));}
  .pill-warn{background:color-mix(in lab, var(--accent-orange) 12%, var(--surface)); color:var(--accent-orange); border:1px solid color-mix(in lab, var(--accent-orange) 35%, var(--surface));}

  /* 2x2 grid with tooltips */
  .grid2x2{
    width:min(100%, 900px);
    display:grid; grid-template-columns:1fr 1fr; border:1px solid var(--border); border-radius:.8rem; overflow:hidden;
  }
  .grid2x2 .cell{
    min-height:100px; padding:1rem; border-right:1px solid var(--border); border-bottom:1px solid var(--border); position:relative;
  }
  .grid2x2 .cell:nth-child(2n){border-right:0;}
  .grid2x2 .cell:nth-last-child(-n+2){border-bottom:0;}
  .cell.good{background:color-mix(in lab, var(--accent-green) 12%, var(--card));}
  .cell.bad{background:color-mix(in lab, var(--accent-red) 12%, var(--card));}
  .tip{position:absolute; bottom:.5rem; right:.5rem; font-size:1.2rem; color:var(--muted); cursor: help;}
  .tip[data-tip]:hover:after{
    content:attr(data-tip); position:absolute; bottom:125%; right:0; background:var(--card); border:1px solid var(--border); padding:.4rem .6rem; border-radius:.5rem; color:var(--text); width:220px;
    box-shadow:0 8px 20px rgba(0,0,0,.2);
    z-index: 10;
  }

  /* Poll Component */
    .poll-container {
        width: min(100%, 900px);
    }
    .poll-option {
        display: block;
        background: var(--surface);
        border: 2px solid var(--border);
        border-radius: .5rem;
        padding: 1rem;
        margin-bottom: .5rem;
        cursor: pointer;
        transition: all 0.2s ease;
    }
    .poll-option:hover {
        border-color: var(--brand-primary);
        transform: translateY(-2px);
    }
    .poll-option.correct {
        border-color: var(--accent-green);
        background: color-mix(in lab, var(--accent-green) 15%, var(--card));
    }
    .poll-option.incorrect {
        border-color: var(--accent-red);
        background: color-mix(in lab, var(--accent-red) 15%, var(--card));
        opacity: 0.7;
    }
    .poll-container.answered .poll-option:not(.correct):not(.incorrect) {
        opacity: 0.5;
        pointer-events: none;
    }
    .poll-container.answered .poll-option {
        cursor: default;
    }
    .poll-explanation {
        display: none;
        margin-top: -0.25rem;
        padding: .5rem 1rem;
        font-size: .9rem;
        border-radius: 0 0 .5rem .5rem;
    }
    .poll-explanation.correct {
        background: color-mix(in lab, var(--accent-green) 20%, var(--card));
    }
    .poll-explanation.incorrect {
        background: color-mix(in lab, var(--accent-red) 20%, var(--card));
    }

  /* New Mind Map Styles */
  .mindmap-container {
    display: flex;
    justify-content: center;
    align-items: center;
    width: min(100%, 800px);
    gap: 1rem;
    padding: 1rem;
  }
  .mindmap-center {
    background: var(--brand-secondary);
    color: white;
    padding: 1rem 1.5rem;
    border-radius: .8rem;
    font-weight: 700;
    font-family: 'Poppins', sans-serif;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
  }
  .mindmap-branches {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  .mindmap-branch {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: .8rem 1.2rem;
    border-radius: .6rem;
    position: relative;
    border-left: 4px solid var(--brand-primary);
  }

  .worked-example-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    width: min(100%, 1000px);
    align-items: center;
  }
  .worked-example-container .graph-container {
    background: var(--surface);
    padding: 1rem;
    border-radius: .8rem;
    border: 1px solid var(--border);
    width: 100%;
    max-width: 450px;
    margin: auto;
  }
  .worked-example-container .analytical-steps ol {
    padding-left: 20px;
  }
  
  .summary-mindmap {
    width: min(100%, 1000px);
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 1rem;
  }
  .summary-mindmap .topic-center {
    grid-column: 2 / 3;
    background: var(--brand-secondary);
    color: white;
    padding: 1.5rem;
    border-radius: .8rem;
    font-weight: 700;
    font-family: 'Poppins', sans-serif;
    text-align: center;
  }
  .summary-mindmap .branch {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 1rem;
    border-radius: .8rem;
    height: 100%;
  }
  .summary-mindmap .branch h4 {
    color: var(--brand-primary);
    margin-top: 0;
    border-bottom: 2px solid var(--border);
    padding-bottom: .5rem;
  }
  .summary-mindmap .branch ul {
    padding-left: 20px;
  }
   .summary-mindmap .branch li {
    margin-bottom: .5rem;
  }


  /* Utility */
  .w-wide{width:min(100%, 1100px);}
  .muted{color:var(--muted);}
  .center{text-align:center;}
  .left{text-align:left;}
  .small{font-size:.9rem;}
  .tight p{margin:.35rem 0;}
  .mt-1{margin-top:.5rem;}
  .mt-2{margin-top:1rem;}
  .mt-3{margin-top:1.5rem;}
  .code{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; background:var(--surface); border:1px dashed var(--border); padding:.2rem .4rem; border-radius:.4rem;}
  .accent{color:var(--accent-orange); font-weight:700;}
</style>
</head>
<body>

<!-- Fixed Header -->
<header class="sos-header" role="banner" aria-label="Slide header">
  <div class="sos-h-left">Prof. Vinay Kanth Rao Kodipelly</div>
  <div id="topic-slot" class="sos-h-center">Chapter 3 · Applications of Differentiation</div>
  <div class="sos-h-right">
    <button id="themeToggle" class="btn" aria-pressed="false" aria-label="Toggle theme">Theme: Light</button>
  </div>
</header>

<!-- Reveal root -->
<div class="reveal">
  <div class="slides">

    <!-- TITLE -->
    <section data-state="title">
      <h2>Applications of Differentiation</h2>
      <h3>Chapter 3 · Curve Sketching with Derivatives</h3>
      <div class="mt-2" style="display:flex; gap: 0.5rem;">
          <div class="badge"><span class="dot"></span> University of Missouri–St. Louis</div>
          <div class="badge"><span class="dot"></span> Active Learning Institute</div>
      </div>
      <p class="muted small mt-1">"Slides on Steroids" · Designed for live, interactive teaching.</p>
    </section>

    <!-- REVIEW QUIZ -->
    <section data-step="0">
        <h2>Quick Review: Foundational Concepts</h2>
        <div class="callout teal w-wide review-questions">
            <h3>Let's recall a few key ideas before we begin:</h3>
            <ul>
                <li>What is the domain of any polynomial function? <br><em class="muted small">Answer: All real numbers, \( (-\infty, \infty) \).</em></li>
                <li>Polynomials are always <strong>continuous</strong> and <strong>smooth</strong>. What does this mean for their graphs? <br><em class="muted small">Answer: No breaks, gaps, or sharp corners.</em></li>
                <li>What does the slope of a tangent line at a point tell us about a function? <br><em class="muted small">Answer: The instantaneous rate of change at that point.</em></li>
                <li>How do we mathematically find the slope of the tangent line at any point \(x\)? <br><em class="muted small">Answer: By finding the derivative, \( f'(x) \).</em></li>
            </ul>
        </div>
    </section>
    
    <!-- WHERE TO FIND EXTREMA -->
    <section data-step="1">
        <h2>Where Do Extrema Occur?</h2>
        <p class="muted">Relative extrema can only occur at <strong>critical points</strong>. Here's where to find them:</p>
        <div class="mindmap-container">
            <div class="mindmap-center">Critical Points</div>
            <div style="font-size: 2rem; color: var(--muted);">&rarr;</div>
            <div class="mindmap-branches">
                <div class="mindmap-branch"><strong>Derivative is Zero</strong><br>\( f'(x) = 0 \)<br><em class="small muted">(Smooth peaks and valleys)</em></div>
                <div class="mindmap-branch"><strong>Derivative is Undefined</strong><br>\( f'(x) \) DNE<br><em class="small muted">(Sharp corners or cusps)</em></div>
            </div>
        </div>
    </section>


    <!-- ANALOGY -->
    <section data-step="0">
      <h2>Analogy: Hiking a Landscape</h2>
      <div class="callout teal w-wide">
        <p><strong>Think of a hike along a hilly trail.</strong> Your <em>altitude</em> is \( f(x) \). The <em>steepness</em> of the trail at each step is \( f'(x) \). The <em>change in steepness</em> is \( f''(x) \).</p>
        <div style="display:flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 1rem;">
          <span class="pill pill-pos">\( f'(x) > 0 \) → Going uphill (increasing)</span>
          <span class="pill pill-neg">\( f'(x) < 0 \) → Going downhill (decreasing)</span>
          <span class="pill pill-warn">\( f''(x) \) → Trail curving up or down</span>
        </div>
      </div>
    </section>

    <!-- PROCESS MAP -->
    <section data-state="process-map" data-step="1">
      <h2>Roadmap for Curve Sketching</h2>
      <ul class="process">
        <li class="step" data-step-id="1"><div class="num">1</div><div>Derivatives & Domain</div></li>
        <li class="arrow">&rarr;</li>
        <li class="step" data-step-id="2"><div class="num">2</div><div>Critical Values</div></li>
        <li class="arrow">&rarr;</li>
        <li class="step" data-step-id="3"><div class="num">3</div><div>Test for Extrema</div></li>
        <li class="arrow">&rarr;</li>
        <li class="step" data-step-id="4"><div class="num">4</div><div>Inflection Points</div></li>
        <li class="arrow">&rarr;</li>
        <li class="step" data-step-id="5"><div class="num">5</div><div>Sketch Graph</div></li>
      </ul>
      <p class="muted small">We’ll highlight the current step as we proceed.</p>
    </section>

    <!-- Pedagogical Decision Table: First Derivative Test -->
    <section data-step="3">
      <h2>First-Derivative Test (Decision Table)</h2>
      <table class="pedago">
        <thead>
          <tr>
            <th class="left">Behavior at \(c\)</th>
            <th class="left">Sign of \(f'(x)\) to the Left</th>
            <th class="left">Sign of \(f'(x)\) to the Right</th>
            <th class="left">Conclusion</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Decreasing &rarr; Increasing</td><td><span class="pill pill-neg">Negative</span></td><td><span class="pill pill-pos">Positive</span></td><td><strong>Relative Minimum</strong> at \( x=c \)</td>
          </tr>
          <tr>
            <td>Increasing &rarr; Decreasing</td><td><span class="pill pill-pos">Positive</span></td><td><span class="pill pill-neg">Negative</span></td><td><strong>Relative Maximum</strong> at \( x=c \)</td>
          </tr>
          <tr>
            <td>Increasing &rarr; Increasing</td><td><span class="pill pill-pos">Positive</span></td><td><span class="pill pill-pos">Positive</span></td><td>Neither a max nor a min</td>
          </tr>
          <tr>
            <td>Decreasing &rarr; Decreasing</td><td><span class="pill pill-neg">Negative</span></td><td><span class="pill pill-neg">Negative</span></td><td>Neither a max nor a min</td>
          </tr>
        </tbody>
      </table>
      <p class="small muted w-wide">This table is our guide for classifying the critical points we find.</p>
    </section>
    
    <!-- WORKED EXAMPLE -->
    <section data-step="3">
        <h2>Let's Work an Example Together</h2>
        <h3>\( f(x) = 2x^3 - 3x^2 - 12x + 12 \)</h3>
        <div class="worked-example-container">
            <div class="analytical-steps">
                <h4>Analytical Steps (On the board):</h4>
                <ol>
                    <li>Find the derivative \( f'(x) \).</li>
                    <li>Solve for critical values where \( f'(x) = 0 \).</li>
                    <li>Create a sign chart for \( f'(x) \).</li>
                    <li>Use the First-Derivative Test to classify extrema.</li>
                </ol>
                <p>We should find a max at \(x=-1\) and a min at \(x=2\).</p>
            </div>
            <div class="graph-container">
                <h4>Graphical Proof:</h4>
                <svg viewBox="-3.5 -12 7.5 35" style="width: 100%; height: auto;" preserveAspectRatio="xMidYMid meet">
                    <defs><marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="var(--muted)"></path></marker></defs>
                    <path d="M -3 0 L 4 0" stroke="var(--muted)" stroke-width="0.2" marker-end="url(#arrow)"></path>
                    <path d="M 0 -10 L 0 22" stroke="var(--muted)" stroke-width="0.2" marker-end="url(#arrow)"></path>
                    <path d="M-2.5, -33 C -1.5, 23, -0.5, 17, 0.5, 5 C 1, -2, 1.5, -8, 2, -8 C 2.5, -8, 3, 3, 3.5, 22" stroke="var(--brand-primary)" stroke-width="0.3" fill="none"/>
                    <circle cx="-1" cy="19" r="0.4" fill="var(--accent-orange)"></circle>
                    <text x="-1" y="21.5" font-size="2" text-anchor="middle" fill="var(--brand-secondary)">Max (-1, 19)</text>
                    <circle cx="2" cy="-8" r="0.4" fill="var(--accent-orange)"></circle>
                    <text x="2" y="-5.5" font-size="2" text-anchor="middle" fill="var(--brand-secondary)">Min (2, -8)</text>
                </svg>
            </div>
        </div>
        <p class="small muted w-wide mt-2">Next, we'll use the interactive visualizer to confirm our results and explore further!</p>
    </section>

    <!-- INTERACTIVE VISUALIZER: First Derivative Test -->
    <section data-step="3">
      <h2>Interactive Visualizer: First Derivative Test</h2>
      <p class="left w-wide">Let's confirm our previous example. Set the sliders to \( a=2, b=-3, c=-12, d=12 \). Notice how the graph matches and see how the colors change at the extrema.</p>
      <div class="interactive-tool" id="viz-fprime">
        <div class="controls">
          <div class="control-row"><label for="a">a</label><input id="a" type="range" min="-3" max="3" step="0.1" value="2"><output for="a">2.0</output></div>
          <div class="control-row"><label for="b">b</label><input id="b" type="range" min="-6" max="6" step="0.1" value="-3"><output for="b">-3.0</output></div>
          <div class="control-row"><label for="c">c</label><input id="c" type="range" min="-12" max="12" step="0.1" value="-12"><output for="c">-12.0</output></div>
          <div class="control-row"><label for="d">d</label><input id="d" type="range" min="-20" max="20" step="1" value="12"><output for="d">12</output></div>
          <div class="legend">
            <span class="chip"><span class="dot" style="background:var(--accent-green)"></span> increasing</span>
            <span class="chip"><span class="dot" style="background:var(--accent-red)"></span> decreasing</span>
            <span class="chip"><span class="dot" style="background:var(--brand-primary)"></span> \( f(x) \)</span>
          </div>
        </div>
        <div>
          <canvas id="canvas-fprime" class="tool-canvas" aria-label="Function and monotonicity plot"></canvas>
        </div>
      </div>
    </section>

    <!-- Practice Deck (flip cards) - MOVED UP -->
    <section data-step="3">
      <h2>Practice with the First Derivative Test</h2>
      <div class="cards">
        <div class="card" tabindex="0"><div class="card-inner">
          <div class="card-face front"><span class="tag">Practice</span><h4>\( h(x)=x^4-\frac{8}{3}x^3 \)</h4><p>Find critical values and classify them.</p></div>
          <div class="card-face back"><span class="tag">Solution</span>
            <p>\( h'(x)=4x^3-8x^2=4x^2(x-2) \).<br>Critical values are \( x=0, 2 \).<br>
            Using the FDT, signs of \(h'(x)\) are \( (-, -, +) \). This indicates a relative minimum at \( x=2 \). At \(x=0\), there is no sign change, so it's not an extremum. Minimum point: \( (2, -16/3) \).</p>
          </div>
        </div></div>
        <div class="card" tabindex="0"><div class="card-inner">
          <div class="card-face front"><span class="tag">Practice</span><h4>\( g(x)=3-x^{1/3} \)</h4><p>Does this function have any relative extrema?</p></div>
          <div class="card-face back"><span class="tag">Solution</span>
            <p>\( g'(x)=-\frac{1}{3}x^{-2/3} = \frac{-1}{3\sqrt[3]{x^2}} \).<br>
            Derivative is undefined at critical value \( x=0 \). However, \( g'(x) \) is negative on both sides of 0. No sign change means no relative extrema.</p>
          </div>
        </div></div>
        <div class="card" tabindex="0"><div class="card-inner">
          <div class="card-face front"><span class="tag">Practice</span><h4>\( f(x)=1+8x^2-x^4 \)</h4><p>Find all relative extrema.</p></div>
          <div class="card-face back"><span class="tag">Solution</span>
            <p>\(f'(x) = 16x - 4x^3 = 4x(2-x)(2+x)\). Critical values: \( x=0, \pm2 \).
            FDT shows maxes at \(x=\pm 2\) and a min at \(x=0\). Points are \( (0,1) \), \( (2,17) \), and \( (-2,17) \).</p>
          </div>
        </div></div>
      </div>
    </section>
    
    <!-- SDT INTRO -->
    <section data-step="4">
        <h2>A Faster Method: The Second-Derivative Test</h2>
        <div class="callout teal w-wide">
            <p>Instead of testing points on either side of a critical value \(c\), we can sometimes just test the point \(c\) itself using the second derivative.</p>
            <ul>
                <li>If \( f''(c) > 0 \), the graph is concave up at \(c\), like a valley. This means \(f(c)\) is a <strong>relative minimum</strong>.</li>
                <li>If \( f''(c) < 0 \), the graph is concave down at \(c\), like a hill. This means \(f(c)\) is a <strong>relative maximum</strong>.</li>
                <li>If \( f''(c) = 0 \), the test is <strong>inconclusive</strong>. You must go back and use the First-Derivative Test.</li>
            </ul>
        </div>
    </section>
    
    <!-- SDT WORKED EXAMPLE -->
    <section data-step="4">
        <h2>Worked Example (Second-Derivative Test)</h2>
        <h3>\( f(x) = x^3 + 3x^2 - 9x - 13 \)</h3>
        <div class="worked-example-container">
            <div class="analytical-steps">
                <h4>Analytical Steps:</h4>
                <ol>
                    <li>Find \(f'(x)\) and \(f''(x)\).<br><em class="small muted">\(f'(x) = 3x^2 + 6x - 9\)<br>\(f''(x) = 6x + 6\)</em></li>
                    <li>Find critical values (where \(f'(x)=0\)).<br><em class="small muted">\(3(x+3)(x-1)=0 \Rightarrow x=-3, x=1\)</em></li>
                    <li>Plug critical values into \(f''(x)\).</li>
                </ol>
            </div>
            <div>
                <h4>Classification:</h4>
                <p>For \(x = -3\):<br>\( f''(-3) = 6(-3) + 6 = -12 \)<br>Since \(f''(-3) < 0\), this is a <strong class="pill pill-neg">relative maximum</strong>.</p>
                <p>For \(x = 1\):<br>\( f''(1) = 6(1) + 6 = 12 \)<br>Since \(f''(1) > 0\), this is a <strong class="pill pill-pos">relative minimum</strong>.</p>
            </div>
        </div>
    </section>

    <!-- SDT CHECK YOUR UNDERSTANDING -->
    <section data-step="4">
        <h2>Check Your Understanding (SDT)</h2>
        <div class="poll-container w-wide" id="poll2">
            <p>Suppose for a function \(g(x)\), we know that \(g'(5) = 0\) and \(g''(5) = -4\). What can we conclude about the point \(x=5\)?</p>
            <div class="poll-option">It is a relative minimum.</div>
            <div class="poll-explanation incorrect">Incorrect. A positive second derivative indicates a minimum.</div>
            <div class="poll-option" data-correct="true">It is a relative maximum.</div>
            <div class="poll-explanation correct">Correct! The derivative is zero (flat tangent) and the curve is concave down (like a hill), so it must be a maximum.</div>
            <div class="poll-option">It is a point of inflection.</div>
            <div class="poll-explanation incorrect">Incorrect. For an inflection point, we would need \(g''(5)=0\) and a sign change in \(g''(x)\).</div>
            <div class="poll-option">The test is inconclusive.</div>
            <div class="poll-explanation incorrect">Incorrect. The test is only inconclusive if the second derivative is zero.</div>
        </div>
    </section>

    <!-- INTERACTIVE VISUALIZER: Second Derivative / Concavity -->
    <section data-step="4">
      <h2>Interactive Visualizer: Second Derivative & Concavity</h2>
      <p class="left w-wide">This visualizer shows \( f(x)=x^2 e^{-x} \). The curve is colored to show where it is <span class="pill pill-pos">concave up</span> (\(f''>0\)) and <span class="pill pill-neg">concave down</span> (\(f''<0\)). Use the toggles to explore!</p>
      <div class="interactive-tool" id="viz-second">
        <div class="controls">
          <div class="control-row"><label for="xmin">x-min</label><input id="xmin" type="range" min="-4" max="0" step="0.5" value="-2"><output for="xmin">-2.0</output></div>
          <div class="control-row"><label for="xmax">x-max</label><input id="xmax" type="range" min="2" max="8" step="0.5" value="6"><output for="xmax">6.0</output></div>
          <div class="toggle-controls">
              <label><input type="checkbox" id="toggle-crit" checked> Show Critical Points</label>
              <label><input type="checkbox" id="toggle-infl" checked> Show Inflection Points</label>
          </div>
          <div class="legend">
            <span class="chip"><span class="dot" style="background:var(--brand-primary)"></span> \( f(x) \)</span>
            <span class="chip"><span class="dot" style="background:var(--accent-orange)"></span> Extrema</span>
            <span class="chip"><span class="dot" style="background:purple"></span> Inflection</span>
          </div>
        </div>
        <div>
          <canvas id="canvas-second" class="tool-canvas" aria-label="Concavity visual"></canvas>
        </div>
      </div>
      <p class="small muted w-wide">Extrema occur where \(f'(x)=0\). Inflection points occur where concavity (\(f''(x)\)) changes sign.</p>
    </section>
    
    <!-- End Slide - REPLACED WITH MIND MAP -->
    <section data-state="end">
      <h2>Chapter 3 Mind Map Summary</h2>
      <div class="summary-mindmap">
          <div class="branch fdt">
              <h4>First Derivative Test (FDT)</h4>
              <ul>
                  <li><strong>Tells us:</strong> Intervals of Increase (\(f'>0\)) & Decrease (\(f'<0\)).</li>
                  <li><strong>Finds:</strong> Relative Maxima (\(+\) to \(-\)) and Minima (\(-\) to \(+\)).</li>
              </ul>
          </div>
          <div class="topic-center">Curve Sketching<br>Tools</div>
          <div class="branch sdt">
              <h4>Second Derivative Test (SDT)</h4>
              <ul>
                  <li><strong>Tells us:</strong> Concave Up (\(f''>0\)) & Concave Down (\(f''<0\)).</li>
                  <li><strong>Finds:</strong> Points of Inflection (where \(f''\) changes sign).</li>
                  <li><strong>Affirms Extrema:</strong> At critical value \(c\), if \(f''(c)>0 \Rightarrow\) min, if \(f''(c)<0 \Rightarrow\) max.</li>
              </ul>
          </div>
      </div>
      <div class="badge mt-2"><span class="dot"></span> “Slides on Steroids” by Vinay K. R. Kodipelly</div>
    </section>

  </div>
</div>

<!-- Fixed Footer -->
<footer class="sos-footer" role="contentinfo" aria-label="Slide footer">
  <div class="footer-left">
    <span class="pill footer-pill">University of Missouri–St. Louis</span>
    <a href="https://activestem.org" target="_blank" rel="noopener" class="pill footer-pill">ActiveSTEM.org</a>
  </div>
  <div class="footer-right">“Slides on Steroids” · Vinay K. R. Kodipelly</div>
</footer>

<!-- MathJax v3 -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['\\(', '\\)']],
      displayMath: [['$$','$$']]
    },
    svg: { fontCache: 'global' }
  };
</script>
<script async id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<!-- jStat (available if needed for numeric utilities) -->
<script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>

<!-- Reveal.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.js"></script>

<script>
  // Reveal initialization
  Reveal.initialize({
    hash: true,
    controls: true,
    progress: true,
    center: false, // Centering is handled by CSS flexbox
    slideNumber: 'c/t',
    transition: 'fade'
  });

  // Theme Toggle
  const toggleBtn = document.getElementById('themeToggle');
  const body = document.body;
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  
  function applyTheme(isDark) {
    if (isDark) {
      body.classList.add('dark');
      toggleBtn.textContent = 'Theme: Dark';
      toggleBtn.setAttribute('aria-pressed', 'true');
    } else {
      body.classList.remove('dark');
      toggleBtn.textContent = 'Theme: Light';
      toggleBtn.setAttribute('aria-pressed', 'false');
    }
    // Redraw canvases on theme change to update colors
    if(typeof drawFprime === 'function') setTimeout(drawFprime, 50);
    if(typeof drawSecond === 'function') setTimeout(drawSecond, 50);
  }

  toggleBtn.addEventListener('click', () => {
    applyTheme(!body.classList.contains('dark'));
  });
  
  applyTheme(prefersDark);


  // Smart Roadmap and Header update
  const topicSlot = document.getElementById('topic-slot');
  const processSteps = document.querySelectorAll('.process .step');
  Reveal.on('slidechanged', e => {
    const h2 = e.currentSlide.querySelector('h2');
    topicSlot.textContent = h2 ? h2.textContent.trim() : 'Chapter 3 · Applications of Differentiation';
    
    const currentStepId = e.currentSlide.dataset.step;
    processSteps.forEach(step => {
        step.classList.toggle('active', step.dataset.stepId === currentStepId);
    });
  });

  // ---- Shared Canvas Drawing Utilities ----
  function getCssVar(name) { return getComputedStyle(document.body).getPropertyValue(name); }
  function mapX(x, xmin, xmax, w) { return (x - xmin) / (xmax - xmin) * w; }
  function mapY(y, ymin, ymax, h) { return (1 - (y - ymin) / (ymax - ymin)) * h; }

  function drawAxes(ctx, w, h, xmin, xmax, ymin, ymax) {
    ctx.clearRect(0, 0, w, h);
    ctx.fillStyle = getCssVar('--surface');
    ctx.fillRect(0, 0, w, h);
    ctx.strokeStyle = getCssVar('--border');
    ctx.lineWidth = 1;
    ctx.beginPath();
    for (let gx = Math.ceil(xmin); gx <= Math.floor(xmax); gx++) {
      const X = mapX(gx, xmin, xmax, w);
      ctx.moveTo(X, 0); ctx.lineTo(X, h);
    }
    for (let gy = Math.ceil(ymin); gy <= Math.floor(ymax); gy++) {
      const Y = mapY(gy, ymin, ymax, h);
      ctx.moveTo(0, Y); ctx.lineTo(w, Y);
    }
    ctx.stroke();
    ctx.strokeStyle = getCssVar('--muted');
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    const X0 = mapX(0, xmin, xmax, w), Y0 = mapY(0, ymin, ymax, h);
    ctx.moveTo(0, Y0); ctx.lineTo(w, Y0);
    ctx.moveTo(X0, 0); ctx.lineTo(X0, h);
    ctx.stroke();
  }

  function drawCurve(ctx, xs, ys, color, lw = 2) {
    ctx.strokeStyle = color; ctx.lineWidth = lw; ctx.beginPath();
    for (let i = 0; i < xs.length; i++) {
      const X = xs[i], Y = ys[i];
      if (i === 0) ctx.moveTo(X, Y); else ctx.lineTo(X, Y);
    }
    ctx.stroke();
  }
  
  function fixCanvasDPI(canvas) {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    if (canvas.width !== Math.round(rect.width * dpr) || canvas.height !== Math.round(rect.height * dpr)) {
      canvas.width = Math.round(rect.width * dpr);
      canvas.height = Math.round(rect.height * dpr);
      const ctx = canvas.getContext('2d');
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      return true; // Resized
    }
    return false; // No change
  }

  // ---- Interactive 1: First Derivative Test (cubic) ----
  const viz1 = document.getElementById('viz-fprime');
  if (viz1) {
    const ctx1 = document.getElementById('canvas-fprime').getContext('2d');
    const sliders = ['a', 'b', 'c', 'd'].map(id => document.getElementById(id));
    
    function fx(a, b, c, d, x) { return ((a * x + b) * x + c) * x + d; }
    function fpx(a, b, c, x) { return (3 * a * x + 2 * b) * x + c; }

    function solveQuadratic(A, B, C) {
        if (Math.abs(A) < 1e-9) return Math.abs(B) < 1e-9 ? [] : [-C / B];
        const disc = B * B - 4 * A * C;
        if (disc < 0) return [];
        const s = Math.sqrt(disc);
        return [(-B - s) / (2 * A), (-B + s) / (2 * A)].sort((u, v) => u - v);
    }

    function drawFprime() {
        fixCanvasDPI(ctx1.canvas);
        const [a, b, c, d] = sliders.map(s => parseFloat(s.value));
        const w = ctx1.canvas.getBoundingClientRect().width, h = ctx1.canvas.getBoundingClientRect().height;
        const xmin = -5, xmax = 5, ymin = -25, ymax = 25;
        drawAxes(ctx1, w, h, xmin, xmax, ymin, ymax);

        const crit = solveQuadratic(3 * a, 2 * b, c);
        const N = 600, xs = [], ys = [];
        for (let i = 0; i <= N; i++) {
            const x = xmin + (xmax - xmin) * i / N;
            xs.push(mapX(x, xmin, xmax, w));
            ys.push(mapY(fx(a, b, c, d, x), ymin, ymax, h));
        }

        const cuts = [-Infinity, ...crit, Infinity];
        for (let i = 0; i < cuts.length - 1; i++) {
            const L = Math.max(cuts[i], xmin), R = Math.min(cuts[i+1], xmax);
            if (L >= R) continue;
            const mid = (L + R) / 2;
            const sign = Math.sign(fpx(a, b, c, mid));
            const color = sign >= 0 ? getCssVar('--accent-green') : getCssVar('--accent-red');
            
            const ptsX = [], ptsY = [];
            const iL = Math.floor((L - xmin) / (xmax - xmin) * N);
            const iR = Math.ceil((R - xmin) / (xmax - xmin) * N);
            for(let j = iL; j <= iR; j++) { ptsX.push(xs[j]); ptsY.push(ys[j]); }
            if(ptsX.length > 1) drawCurve(ctx1, ptsX, ptsY, color, 4);
        }
        
        drawCurve(ctx1, xs, ys, getCssVar('--brand-primary'), 2);

        crit.forEach(xc => {
            if (xc < xmin || xc > xmax) return;
            const yc = fx(a, b, c, d, xc);
            if (yc < ymin || yc > ymax) return;
            const X = mapX(xc, xmin, xmax, w), Y = mapY(yc, ymin, ymax, h);
            ctx1.fillStyle = getCssVar('--accent-orange');
            ctx1.beginPath(); ctx1.arc(X, Y, 5, 0, Math.PI * 2); ctx1.fill();
        });
    }
    sliders.forEach(slider => {
      slider.addEventListener('input', () => {
        const output = slider.nextElementSibling;
        output.value = parseFloat(slider.value).toFixed(1);
        drawFprime();
      });
      // Initial value set
      const output = slider.nextElementSibling;
      output.value = parseFloat(slider.value).toFixed(1);
    });
  }
  
  // ---- Interactive 2: Concavity visual for f(x)=x^2 e^{-x} ----
  const viz2 = document.getElementById('viz-second');
  if (viz2) {
    const ctx2 = document.getElementById('canvas-second').getContext('2d');
    const xminEl = document.getElementById('xmin'), xmaxEl = document.getElementById('xmax');
    const toggleCrit = document.getElementById('toggle-crit');
    const toggleInfl = document.getElementById('toggle-infl');
    
    function f2(x) { return x * x * Math.exp(-x); }
    function f2pp(x) { return Math.exp(-x) * (x * x - 4 * x + 2); }

    function drawSecond() {
        fixCanvasDPI(ctx2.canvas);
        let xmin = parseFloat(xminEl.value), xmax = parseFloat(xmaxEl.value);
        if (xmin >= xmax) { xmax = xmin + 1; xmaxEl.value = xmax; }
        const w = ctx2.canvas.getBoundingClientRect().width, h = ctx2.canvas.getBoundingClientRect().height;
        const ymin = -0.2, ymax = 1;
        drawAxes(ctx2, w, h, xmin, xmax, ymin, ymax);

        const N = 700, xs = [], ys = [];
        for (let i = 0; i <= N; i++) {
            const x = xmin + (xmax - xmin) * i / N;
            xs.push(mapX(x, xmin, xmax, w));
            ys.push(mapY(f2(x), ymin, ymax, h));
        }
        
        const infl = [2 - Math.SQRT2, 2 + Math.SQRT2];
        const cuts = [-Infinity, ...infl, Infinity];
        for(let i=0; i<cuts.length-1; i++) {
            const L = Math.max(cuts[i], xmin), R = Math.min(cuts[i+1], xmax);
            if (L >= R) continue;
            const mid = (L+R)/2;
            const sign = Math.sign(f2pp(mid));
            const color = sign >= 0 ? getCssVar('--accent-green') : getCssVar('--accent-red');
            
            const ptsX = [], ptsY = [];
            const iL = Math.floor((L - xmin) / (xmax - xmin) * N);
            const iR = Math.ceil((R - xmin) / (xmax - xmin) * N);
            for(let j=iL; j<=iR; j++) { ptsX.push(xs[j]); ptsY.push(ys[j]); }
            if (ptsX.length > 1) drawCurve(ctx2, ptsX, ptsY, color, 4);
        }
        
        drawCurve(ctx2, xs, ys, getCssVar('--brand-primary'), 2);

        if (toggleCrit.checked) {
            [0, 2].forEach(xc => {
                if (xc < xmin || xc > xmax) return;
                const yc = f2(xc);
                const X = mapX(xc, xmin, xmax, w), Y = mapY(yc, ymin, ymax, h);
                ctx2.fillStyle = getCssVar('--accent-orange');
                ctx2.beginPath(); ctx2.arc(X, Y, 5, 0, Math.PI * 2); ctx2.fill();
            });
        }
        if (toggleInfl.checked) {
            infl.forEach(xc => {
                 if (xc < xmin || xc > xmax) return;
                const yc = f2(xc);
                const X = mapX(xc, xmin, xmax, w), Y = mapY(yc, ymin, ymax, h);
                ctx2.fillStyle = 'purple';
                ctx2.beginPath(); ctx2.arc(X, Y, 5, 0, Math.PI * 2); ctx2.fill();
            });
        }
    }
    
    [xminEl, xmaxEl, toggleCrit, toggleInfl].forEach(el => el.addEventListener('input', drawSecond));
    [xminEl, xmaxEl].forEach(slider => {
         slider.addEventListener('input', () => {
            const output = slider.nextElementSibling;
            output.value = parseFloat(slider.value).toFixed(1);
         });
         const output = slider.nextElementSibling;
         output.value = parseFloat(slider.value).toFixed(1);
    });
  }

  // ---- Poll Component Logic ----
  document.querySelectorAll('.poll-container').forEach(poll => {
      poll.addEventListener('click', e => {
          if (e.target.classList.contains('poll-option') && !poll.classList.contains('answered')) {
              poll.classList.add('answered');
              const isCorrect = e.target.dataset.correct === 'true';
              e.target.classList.add(isCorrect ? 'correct' : 'incorrect');
              const explanation = e.target.nextElementSibling;
              if (explanation && explanation.classList.contains('poll-explanation')) {
                  explanation.style.display = 'block';
              }
          }
      });
  });

  // ---- General Initializers ----
  window.addEventListener('resize', () => { 
      setTimeout(() => {
        if(typeof drawFprime === 'function') drawFprime();
        if(typeof drawSecond === 'function') drawSecond();
      }, 100);
  });
  
  document.querySelectorAll('.card').forEach(card => {
    const flipper = () => card.classList.toggle('flip');
    card.addEventListener('click', flipper);
    card.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); flipper(); }
    });
  });

  // Initial Draw
  Reveal.on('ready', event => {
      if(typeof drawFprime === 'function') drawFprime();
      if(typeof drawSecond === 'function') drawSecond();
  });
</script>

</body>
</html>

