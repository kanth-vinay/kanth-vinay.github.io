<!doctype html>
<html lang="en">
<head>
  <!--
  ================================================================================
  // "Slides on Steroids" - Student Selector Activity (Derivatives Only)
  //
  // © 2025 Vinay Kanth Rao Kodipelly & Active Learning Institute LLC
  // All Rights Reserved
  //
  // Design: UMSL / ActiveSTEM theme; Derivative warm-ups aligned to Week 10 slides.
  //
  // Code License: MIT  |  Content License: CC BY 4.0
  // https://www.activestem.org/
  ================================================================================
  -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Slides on Steroids — Student Selector (Derivatives)</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- MathJax (TeX) -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)']], displayMath: [['\\[','\\]']], processEscapes: true },
      svg: { fontCache: 'global' }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <style>
    :root{
      --brand-primary:#00539C; --brand-secondary:#00325C;
      --accent-green:#2E7D32; --accent-orange:#EF6C00; --accent-red:#C62828;
      --text-primary:#111827; --text-secondary:#4B5563;
      --bg-primary:#FFFFFF; --bg-secondary:#F4F6F8; --border-color:#D1D5DB;
      --shadow-md:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      --header-h:64px; --footer-h:44px;
      --name-h:40px;
      --wheel-rows:5;
      --wheel-h: calc(var(--name-h) * var(--wheel-rows));
      --indicator-top: calc(var(--name-h) * ((var(--wheel-rows) - 1) / 2));
    }
    [data-theme="dark"]{
      --brand-primary:#5D9CD4; --brand-secondary:#8BB8E8;
      --accent-green:#66BB6A; --accent-orange:#FFA726; --accent-red:#E57373;
      --text-primary:#F9FAFB; --text-secondary:#9CA3AF;
      --bg-primary:#111827; --bg-secondary:#1F2937; --border-color:#374151;
    }

    html,body{ height:100%; }
    body{
      margin:0; background:var(--bg-primary); color:var(--text-primary);
      font-family:'Inter',system-ui,sans-serif;
      overflow:hidden;
    }

    #page-header,#page-footer{
      position:fixed; left:0; right:0; z-index:1000;
      background:var(--brand-primary); color:#fff;
      display:flex; align-items:center; justify-content:space-between;
      padding:0 20px; box-shadow:var(--shadow-md);
      font-family:'Poppins',sans-serif;
    }
    #page-header{ top:0; height:var(--header-h); }
    #page-footer{ bottom:0; height:var(--footer-h); font-size:.9em; }
    #page-header .author{ font-weight:800; font-size:1.05em; letter-spacing:.2px; }
    #page-header .topic{ font-weight:700; opacity:.95; }

    .main{
      position:fixed; inset:var(--header-h) 0 var(--footer-h) 0;
      display:flex; gap:0; box-sizing:border-box;
      overflow:hidden;
    }
    .left, .right{ height:100%; box-sizing: border-box; }

    .left{
      flex: 0 0 360px;
      background:var(--bg-secondary);
      border-right:1px solid var(--border-color);
      padding:24px;
      display:flex; flex-direction:column; align-items:center; gap:12px;
      overflow:auto;
    }
    .right{
      flex:1 1 auto; padding:28px;
      display:flex; flex-direction:column; gap:18px;
      overflow:hidden;
    }
    .question-wrap{
      flex-grow: 1;
      overflow-y:auto; 
      padding-right:8px;
    }
    h2{ font-family:'Poppins',sans-serif; color:var(--brand-secondary); margin:0 0 12px; }
    .question{
      font-size: clamp(1.2rem, 2.2vw, 1.6rem);
      line-height:1.6;
      margin:0;
    }

    .controls{
      display:flex; align-items:center; justify-content:flex-end; gap:12px;
      flex-wrap:wrap;
    }

    .timer-shell{
      width:min(520px, 42vw); border:1px solid var(--border-color);
      border-radius:12px; padding:10px 12px; background:var(--bg-primary);
      box-shadow:var(--shadow-md);
      display:flex; align-items:center; gap:12px;
    }
    .progress-outer{
      position:relative; flex:1; height:18px;
      background:#E5F4E8; border:1px solid #CBE8D0; border-radius:999px;
      overflow:hidden;
    }
    .progress-inner{
      position:absolute; left:0; top:0; bottom:0;
      width:100%; background:linear-gradient(90deg, #2E7D32, #43A047);
      transition: width 1s linear;
    }
    .time-text{
      min-width: 86px; text-align:right;
      font-family:'Poppins',sans-serif; font-weight:800;
      color:var(--brand-primary);
      font-size: clamp(1.2rem, 2.6vw, 1.6rem);
    }

    .btn{
      font-family:'Poppins',sans-serif; font-weight:700;
      border:none; border-radius:10px; cursor:pointer;
      padding:10px 16px; box-shadow:var(--shadow-md);
    }
    .btn-primary{ background:var(--brand-primary); color:#fff; }
    .btn-warn{ background:var(--accent-orange); color:#fff; }
    .btn:disabled{ opacity:.6; cursor:not-allowed; }

    .wheel{
      width:100%; max-width: 320px; height: var(--wheel-h);
      border:2px solid var(--border-color); border-radius:14px;
      background:var(--bg-primary); position:relative;
      overflow:hidden; box-shadow: inset 0 0 12px rgba(0,0,0,.06);
    }
    .wheel::before, .wheel::after{
      content:''; position:absolute; left:0; right:0; height:40px; z-index:2; pointer-events:none;
    }
    .wheel::before{ top:0; background:linear-gradient(to bottom, var(--bg-primary) 30%, transparent); }
    .wheel::after{ bottom:0; background:linear-gradient(to top, var(--bg-primary) 30%, transparent); }

    .indicator{
      position:absolute; top:var(--indicator-top); left:-2px; right:-2px; height:var(--name-h); z-index:3;
      background:rgba(239,108,0,.09);
      border-top:2px solid var(--accent-orange);
      border-bottom:2px solid var(--accent-orange);
      pointer-events:none;
    }
    .tumbler{ position:absolute; inset:0; will-change:transform; }
    .name{
      height:var(--name-h); display:flex; align-items:center; justify-content:center;
      padding:0 8px; text-align:center;
      font-size:1.02rem; font-weight:700; color:var(--text-secondary);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }

    @keyframes scrollLoop {
      0%   { transform: translateY(0); }
      100% { transform: translateY(calc(-1 * var(--name-h) * 6)); }
    }
    .spinning .tumbler{
      animation: scrollLoop 1.1s linear infinite;
    }

    .pill{
      display:inline-block; margin:0 6px 0 0; padding:6px 10px;
      border-radius:999px; border:1px solid rgba(255,255,255,.4);
      color:#fff; background:rgba(255,255,255,.12); font-weight:600; font-size:.85em;
      text-decoration:none;
    }

    @media (max-height: 620px){
      .left{ padding:16px; }
      .right{ padding:16px; }
      .timer-shell{ padding:8px 10px; }
    }

    @media print{
      #page-header,#page-footer{ display:none !important; }
      .main{ inset:0 !important; }
    }
  </style>
</head>
<body>
  <header id="page-header">
    <div class="author">Prof. Vinay Kanth Rao Kodipelly</div>
    <div class="topic">Student Selector — Derivative Warm-ups</div>
  </header>

  <footer id="page-footer">
    <div class="brand">
      <span class="pill">University of Missouri–St. Louis</span>
      <a class="pill" href="https://www.activestem.org" target="_blank" rel="noopener">ActiveSTEM.org</a>
    </div>
    <div class="hints">Timer: 1–5 min • Spin is fair • CC BY (content)</div>
  </footer>

  <main class="main">
    <section class="left" aria-label="Student selector">
      <h2>Student Selector</h2>
      <div class="wheel" id="wheel">
        <div class="indicator" aria-hidden="true"></div>
        <div id="tumbler" class="tumbler" aria-live="polite"></div>
      </div>
    </section>

    <section class="right" aria-label="Question & timer">
      <div class="question-wrap">
        <h2>Question</h2>
        <p id="question" class="question">
          Click <em>Start</em> to spin the wheel and show a derivative prompt.
        </p>
      </div>

      <div class="controls">
        <div class="timer-shell" role="group" aria-label="Countdown timer">
          <div class="progress-outer" aria-hidden="true">
            <div id="progress" class="progress-inner" style="width:100%"></div>
          </div>
          <div id="time" class="time-text" aria-live="polite">2:00</div>
          <select id="dur" class="btn" aria-label="Select duration">
            <option value="60">1 min</option>
            <option value="120" selected>2 min</option>
            <option value="180">3 min</option>
            <option value="300">5 min</option>
          </select>
        </div>
        <button id="reroll" class="btn btn-warn" style="display:none;">Spin Again</button>
        <button id="start" class="btn btn-primary">Start</button>
      </div>
    </section>
  </main>

  <script>
  (function(){
    // ----------------- ROSTER (from image, excluding "Dropped") -----------------
    const ROSTER = [
      "Bradbury, Archie Robert",
      "Brdarevic, Hamed",
      "Bright, Kennedy Christine",
      "Campbell, Allison Olivia",
      "Carson, Braden",
      "Gabrian, Anthony Michael",
      "Godbee, Grant Robert",
      "Henson, Nathan Christopher",
      "Horbanova, Aster",
      "Kabula, Josepha Kasongo",
      "Kastner, Zach Lloyd",
      "Laymon, Devon",
      "Le, Khanh",
      "Lewis, Jerrisha Ashley",
      "Moore, Noah",
      "Ndiaye, Oumy Kalsoum",
      "Philpott, Kymberli A",
      "Puente, Julian",
      "Rohm, Caroline Hope",
      "Russell, Jairus",
      "Senthil, Rahul Aditya",
      "Swan, Irvin Irvin",
      "Teuscher, Matthew Aaron",
      "Thompson, Joshua Demetri",
      "Tilly, Jasmine",
      "Varner, Nox Evan",
      "Vaughn, Brandon",
      "Vedanaparthi, Rishitha Sai",
      "Verastegui, Gabriela",
      "Ward, Madelyn A",
      "Weinhaus, Mosh Washington",
      "Wells, Ethan",
      "White, Kevin Dale"
    ];

    // ----------------- QUESTIONS (first derivative only) -----------------
    const QUESTIONS = [
      { html: "Find \\(f'(x)\\) for \\(f(x)=\\dfrac{8}{x^2-4}\\)." },
      { html: "Find \\(f'(x)\\) for \\(f(x)=e^{\\,8x^2+3x}\\)." },
      { html: "Find \\(f'(x)\\) for \\(f(x)=\\ln(4x^2-8x)\\)." },
      { html: "Find \\(f'(x)\\) for \\(f(x)=x^3-3x+2\\)." },
      { html: "Find \\(f'(x)\\) for \\(f(x)=(8-2x)^2\\,x\\)." }
    ];

    // ------------- UI plumbing -------------
    const NAME_H = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--name-h')) || 40;
    const WHEEL_ROWS = 5;
    const INDICATOR_TOP = ((WHEEL_ROWS - 1) / 2) * NAME_H;
    const COPIES = 10; // long tape for smooth scroll illusion

    // state
    let qIdx = -1, ticking = null, remain = 120, spinning = false;

    // DOM
    const wheel = document.getElementById('wheel');
    const tumbler = document.getElementById('tumbler');
    const question = document.getElementById('question');
    const timeEl = document.getElementById('time');
    const progressEl = document.getElementById('progress');
    const dur = document.getElementById('dur');
    const startBtn = document.getElementById('start');
    const rerollBtn = document.getElementById('reroll');

    function populate(){
      tumbler.innerHTML = '';
      const long = [];
      for(let i=0;i<COPIES;i++){ long.push(...ROSTER); }
      long.forEach(n=>{
        const d = document.createElement('div');
        d.className = 'name'; d.title = n; d.textContent = n;
        tumbler.appendChild(d);
      });
      tumbler.style.transition = 'none';
      tumbler.style.transform = 'translateY(0)';
    }

    function fmt(s){
      const m = Math.floor(s/60), ss = (s%60).toString().padStart(2,'0');
      return `${m}:${ss}`;
    }

    function typesetMath(){
      if (window.MathJax && MathJax.typesetPromise) {
        MathJax.typesetPromise([question]).catch(()=>{});
      }
    }

    function nextQuestion(){
      qIdx = (qIdx + 1) % QUESTIONS.length;
      question.innerHTML = QUESTIONS[qIdx].html;
      typesetMath();
    }

    function setProgress(p){
      progressEl.style.width = (p*100).toFixed(1) + '%';
    }

    function startCountdown(){
      if (ticking) clearInterval(ticking);
      remain = parseInt(dur.value,10) || 120;
      timeEl.textContent = fmt(remain);
      setProgress(1);
      const total = remain;
      ticking = setInterval(()=>{
        remain--;
        timeEl.textContent = fmt(remain);
        setProgress(Math.max(0, remain/total));
        if(remain <= 0){
          clearInterval(ticking); ticking = null;
          setProgress(0);
          stopSpinAndSelect();
        }
      }, 1000);
    }

    function beginSpin(){
      spinning = true;
      wheel.classList.add('spinning');
      let last = Date.now();
      (function loop(){
        if(!spinning) return;
        const now = Date.now();
        // restart CSS animation periodically to avoid timing out
        if(now - last > 1400){
          tumbler.style.animation = 'none';
          void tumbler.offsetHeight; // reflow
          tumbler.style.animation = '';
          last = now;
        }
        requestAnimationFrame(loop);
      })();
    }

    function stopSpinAndSelect(){
      spinning = false;
      wheel.classList.remove('spinning');
      // pick a fair random index from the base roster
      const pick = Math.floor(Math.random() * ROSTER.length);
      const middleCopy = Math.floor(COPIES / 2);
      const baseRows = middleCopy * ROSTER.length;
      const rowsToPick = baseRows + pick;
      const pxToPickTop = rowsToPick * NAME_H;
      const finalY = pxToPickTop - INDICATOR_TOP;

      tumbler.style.transition = 'transform 900ms cubic-bezier(0.23, 1, 0.32, 1)';
      tumbler.style.transform = `translateY(-${finalY}px)`;

      startBtn.textContent = 'Next Question';
      startBtn.disabled = false;
      rerollBtn.style.display = 'inline-block';
    }

    function startRun(isReroll){
      if (spinning) return;
      startBtn.disabled = true;
      rerollBtn.style.display = 'none';
      tumbler.style.transition = 'none';
      if(!isReroll){ nextQuestion(); }
      setProgress(1);
      beginSpin();
      startCountdown();
    }

    // init
    populate();
    timeEl.textContent = fmt(parseInt(dur.value,10) || 120);
    startBtn.addEventListener('click', ()=> startRun(false));
    rerollBtn.addEventListener('click', ()=> startRun(true));
    dur.addEventListener('change', ()=>{
      if(!ticking){
        const v = parseInt(dur.value,10) || 120;
        timeEl.textContent = fmt(v);
        setProgress(1);
      }
    });

    (function(){
      const fp = 'umsl-ss-selector-2025-10-derivatives-r1';
      const by = '© 2025 Prof. Vinay Kanth Rao Kodipelly · UMSL · Active Learning Institute · ActiveSTEM.org';
      const lic = 'Code: MIT · Content: CC BY 4.0';
      console.log('%cSlides on Steroids — Student Selector (Derivatives)',
                  'font-weight:700;font-size:16px;',
                  `\n${by}\n${lic}\nFingerprint: ${fp}`);
      Object.defineProperty(window, 'slidesOnSteroidsSelector', {
        value: Object.freeze({ fingerprint: fp, author: by, license: lic }),
        writable:false, configurable:false, enumerable:true
      });
    })();
  })();
  </script>
</body>
</html>
