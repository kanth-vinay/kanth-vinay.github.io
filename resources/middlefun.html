<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Trigonometry Basics Quiz (Challenge)</title>

  <script>
    MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script async id="MathJax-script"
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <style>
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:#f4f7f9;color:#333;margin:0;padding-top:80px}
    .header{position:fixed;top:0;left:0;width:100%;background:#fff;box-shadow:0 2px 10px rgba(0,0,0,.1);padding:1rem 2rem;z-index:1000;display:none;justify-content:center;align-items:center;gap:2rem}
    .header h2{margin:0;color:#2c3e50}
    #timer{font-size:1.5rem;font-weight:700;color:#e74c3c;background:#f1f1f1;padding:8px 15px;border-radius:8px}
    .quiz-container{background:#fff;padding:2rem 3rem;border-radius:15px;box-shadow:0 10px 25px rgba(0,0,0,.1);width:100%;max-width:800px;margin:2rem auto;text-align:center}
    h1,h2{color:#2c3e50}
    button{background:#3498db;color:#fff;border:none;padding:15px 30px;font-size:1.2rem;border-radius:8px;cursor:pointer;transition:background-color .3s,transform .2s;margin-top:1rem}
    button:hover{background:#2980b9;transform:translateY(-2px)}
    .question{text-align:left;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid #eee}
    .question p{font-size:1.2rem;font-weight:500;margin-bottom:1rem}
    .options div{margin-bottom:.75rem;font-size:1.1rem}
    .options label{margin-left:10px;cursor:pointer}
    #results-screen h2{margin-bottom:1rem}
    #score{font-size:1.8rem;font-weight:700;color:#27ae60;margin-bottom:2rem}
    .answer-card{text-align:left;margin-bottom:1rem;padding:1rem;border-radius:8px}
    .answer-card.correct{background:#e8f5e9;border-left:5px solid #4caf50}
    .answer-card.incorrect{background:#ffebee;border-left:5px solid #f44336}
    .answer-card p{margin:.5rem 0}
    .answer-card .correct-answer{font-weight:700;color:#388e3c}
    .answer-card .feedback{font-style:italic;color:#555;margin-top:8px}
  </style>
</head>
<body>

  <div class="header" id="quiz-header">
    <h2>Trigonometry Basics Quiz (Challenge)</h2>
    <div id="timer">15:00</div>
  </div>

  <div class="quiz-container" id="start-screen">
    <h1>Trigonometry Basics Quiz (Challenge)</h1>
    <p>You have <strong>15 minutes</strong> to answer <strong>15 questions</strong> reviewing right-triangle trigonometry.</p>
    <p>The timer will start when you click "Start". Good luck!</p>
    <button id="start-btn" type="button">Start Quiz</button>
  </div>

  <div class="quiz-container" id="quiz-screen" style="display:none;">
    <form id="quiz-form"></form>
    <button type="button" id="submit-btn">Submit Quiz</button>
  </div>

  <div class="quiz-container" id="results-screen" style="display:none;">
    <h2>Quiz Results</h2>
    <p id="score"></p>
    <div id="answers-container"></div>
  </div>

  <script>
    const startBtn = document.getElementById('start-btn');
    const submitBtn = document.getElementById('submit-btn');
    const startScreen = document.getElementById('start-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultsScreen = document.getElementById('results-screen');
    const quizHeader = document.getElementById('quiz-header');
    const timerDisplay = document.getElementById('timer');
    const quizForm = document.getElementById('quiz-form');
    const scoreDisplay = document.getElementById('score');
    const answersContainer = document.getElementById('answers-container');

    let timer;
    let timeLeft = 15 * 60; // 15 minutes

    const quizData = [
      { q:"Evaluate: $\\sin(30^\\circ) + \\cos(60^\\circ)$", o:["$1$","$(\\sqrt{3}+1)/2$","$\\sqrt{3}$","$1/2$"], a:"$1$", fb:"$\\sin(30^\\circ)=1/2$ and $\\cos(60^\\circ)=1/2$. $1/2+1/2=1$." },
      { q:"Evaluate: $\\sec(60^\\circ) \\cdot \\cos(60^\\circ)$", o:["$2$","$1$","$1/2$","Undefined"], a:"$1$", fb:"$\\sec(x)=1/\\cos(x)$ so the product is 1." },
      { q:"If $\\sin(\\theta)=8/17$ and $\\theta$ is in Quadrant I, what is $\\tan(\\theta)$?", o:["$8/15$","$15/17$","$17/8$","$15/8$"], a:"$8/15$", fb:"8–15–17 triple; $\\tan=\\text{opp}/\\text{adj}=8/15$." },
      { q:"If $\\tan(\\theta)=3$ and $\\theta$ is in Quadrant I, what is $\\sin(\\theta)$?", o:["$3/\\sqrt{10}$","$1/3$","$1/\\sqrt{10}$","$3/\\sqrt{8}$"], a:"$3/\\sqrt{10}$", fb:"Opp=3, adj=1, hyp=$\\sqrt{10}$; $\\sin=3/\\sqrt{10}$." },
      { q:"Simplify: $\\dfrac{1-\\cos^2(x)}{\\sin(x)}$", o:["$\\cos(x)$","$\\sin(x)$","$\\tan(x)$","$\\sec(x)$"], a:"$\\sin(x)$", fb:"$1-\\cos^2x=\\sin^2x$; divide by $\\sin x$." },
      { q:"Evaluate: $\\tan(45^\\circ)+\\sin(90^\\circ)$", o:["$1$","$2$","$0$","$1.5$"], a:"$2$", fb:"$1+1=2$." },
      { q:"Solve in $0^\\circ\\le x\\le90^\\circ$: $2\\cos x-1=0$", o:["$30^\\circ$","$45^\\circ$","$60^\\circ$","$90^\\circ$"], a:"$60^\\circ$", fb:"$\\cos x=1/2\\Rightarrow x=60^\\circ$." },
      { q:"Simplify: $\\dfrac{\\sec^2 x-1}{\\sin^2 x}$", o:["$\\cos^2 x$","$\\sec^2 x$","$1$","$\\tan^2 x$"], a:"$\\sec^2 x$", fb:"$\\sec^2x-1=\\tan^2x$; $\\tan^2x/\\sin^2x=1/\\cos^2x=\\sec^2x$." },
      { q:"Evaluate: $\\sec(45^\\circ)$", o:["$\\sqrt{2}/2$","$1/2$","$\\sqrt{2}$","$2$"], a:"$\\sqrt{2}$", fb:"Reciprocal of $\\cos 45^\\circ=1/\\sqrt2$." },
      { q:"If $1+\\cot^2 x=25/16$, what is $\\sin^2 x$?", o:["$16/25$","$9/25$","$25/16$","$16/9$"], a:"$16/25$", fb:"$\\csc^2x=25/16=1/\\sin^2x\\Rightarrow \\sin^2x=16/25$." },
      { q:"Simplify: $\\sin x\\cdot\\cot x\\cdot\\sec x$", o:["$1$","$\\sin x$","$\\cos x$","$\\tan x$"], a:"$1$", fb:"Everything cancels to 1." },
      { q:"Evaluate: $\\sin^2 60^\\circ+\\cos^2 60^\\circ$", o:["$1/2$","$1$","$\\sqrt{3}$","$3/4$"], a:"$1$", fb:"Pythagorean identity." },
      { q:"Solve in $0^\\circ\\le x\\le90^\\circ$: $3\\tan^2 x-1=0$", o:["$30^\\circ$","$45^\\circ$","$60^\\circ$","$90^\\circ$"], a:"$30^\\circ$", fb:"$\\tan x=1/\\sqrt3\\Rightarrow x=30^\\circ$." },
      { q:"If $\\sec\\theta=3$ (Quadrant I), what is $\\cot\\theta$?", o:["$\\sqrt{8}/3$","$3/\\sqrt{8}$","$1/\\sqrt{8}$","$1/3$"], a:"$1/\\sqrt{8}$", fb:"adj=1, hyp=3, opp=$\\sqrt{8}$; $\\cot=1/\\sqrt{8}$." },
     { q:"Solve in $0^\\circ\\lt x\\le 90^\\circ$: $\\sin^2 x - \\sin x = 0$",
  o:["$30^\\circ$","$45^\\circ$","$60^\\circ$","$90^\\circ$"],
  a:"$90^\\circ$",
  fb:"$\\sin x(\\sin x-1)=0$; only $90^\\circ$ valid since $x>0$."
}
    ];

    function startTimer(){
      timer = setInterval(() => {
        timeLeft--;
        const m = Math.floor(timeLeft/60);
        const s = timeLeft % 60;
        timerDisplay.textContent = `${m}:${s<10?'0':''}${s}`;
        if (timeLeft <= 0){
          clearInterval(timer);
          submitQuiz();
        }
      }, 1000);
    }

    function escapeAttr(str){
      return String(str).replace(/"/g, '&quot;');
    }

    function displayQuiz(){
      let quizHTML = '';
      quizData.forEach((item, qIdx) => {
        quizHTML += `<div class="question"><p>${qIdx+1}. ${item.q}</p><div class="options">`;

        // Shuffle a copy of the options
        const options = [...item.o].sort(() => Math.random() - 0.5);

        options.forEach((opt, oIdx) => {
          const id = `q${qIdx}_o${oIdx}`; // safe id
          quizHTML += `
            <div>
              <input type="radio" name="question${qIdx}" value="${escapeAttr(opt)}" id="${id}">
              <label for="${id}">${opt}</label>
            </div>`;
        });

        quizHTML += `</div></div>`;
      });

      quizForm.innerHTML = quizHTML;
      if (window.MathJax && MathJax.typeset) MathJax.typeset();
    }

    function submitQuiz(){
      clearInterval(timer);
      quizScreen.style.display = 'none';
      quizHeader.style.display = 'none';
      resultsScreen.style.display = 'block';

      let score = 0;
      let answersHTML = '';

      quizData.forEach((item, index) => {
        const selected = quizForm.querySelector(`input[name="question${index}"]:checked`);
        const userAnswer = selected ? selected.value : "No answer selected";
        const isCorrect = userAnswer === item.a;

        if (isCorrect) score++;

        answersHTML += `
          <div class="answer-card ${isCorrect ? 'correct' : 'incorrect'}">
            <p><b>Question ${index + 1}:</b> ${item.q}</p>
            <p>Your answer: ${userAnswer}</p>
            ${!isCorrect ? `<p class="correct-answer">Correct answer: ${item.a}</p>` : ""}
            <p class="feedback">${item.fb}</p>
          </div>`;
      });

      scoreDisplay.textContent = `Your Score: ${score} out of ${quizData.length}`;
      answersContainer.innerHTML = answersHTML;
      if (window.MathJax && MathJax.typeset) MathJax.typeset();
    }

    startBtn.addEventListener('click', () => {
      startScreen.style.display = 'none';
      quizScreen.style.display = 'block';
      quizHeader.style.display = 'flex';
      displayQuiz();
      startTimer();
    });

    submitBtn.addEventListener('click', submitQuiz);
  </script>
</body>
</html>
