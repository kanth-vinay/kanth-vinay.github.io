<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trigonometry Intro — 15‑Question Timed Quiz</title>
  <style>
    :root{
      --ink:#111; --muted:#555; --rule:#e5e5e5; --accent:#1A237E; --good:#1565c0; --bad:#c62828; --bg:#fafafa; --header-h:72px;
    }
    html, body { margin:0; padding:0; background:var(--bg); color:var(--ink); font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; }
    header{ position:fixed; top:0; left:0; right:0; height:var(--header-h); display:flex; align-items:center; justify-content:space-between; background:#fff; border-bottom:1px solid var(--rule); z-index:1000; padding:0 16px; }
    header h1{ font-size:18px; margin:0; font-weight:700; letter-spacing:0.2px; }
    .timer{ font-weight:700; font-variant-numeric: tabular-nums; font-size:18px; color:var(--accent); }
    .sub{ font-size:12px; color:var(--muted); }
    main{ max-width:900px; margin: calc(var(--header-h) + 16px) auto 80px; padding: 0 16px; }
    .card{ background:#fff; border:1px solid var(--rule); border-radius:12px; box-shadow: 0 1px 0 rgba(0,0,0,0.02); }
    .hero{ padding:20px; }
    .hero h2{ margin:0 0 8px; font-size:20px; }
    .hero ul{ margin:8px 0 0 18px; }
    .actions{ display:flex; gap:12px; margin-top:16px; }
    button{ border:0; background:var(--accent); color:#fff; padding:10px 14px; border-radius:10px; font-weight:700; cursor:pointer; }
    button.secondary{ background:#222; }
    button:disabled{ opacity:0.6; cursor:not-allowed; }
    form.quiz{ display:none; padding:8px 0 0; }
    .q{ border-top:1px solid var(--rule); padding:16px 20px; }
    .q:first-child{ border-top:0; }
    .q h3{ margin:0 0 10px; font-size:16px; }
    .choices{ display:grid; grid-template-columns:1fr; gap:8px; }
    @media(min-width:680px){ .choices{ grid-template-columns: repeat(2, 1fr);} }
    .choice{ border:1px solid var(--rule); border-radius:10px; padding:10px 12px; background:#fff; display:flex; gap:10px; align-items:flex-start; }
    .choice input{ margin-top:3px; }
    .choice label{ display:block; cursor:pointer; }
    .footer-actions{ padding:16px 20px 20px; border-top:1px solid var(--rule); display:flex; gap:12px; justify-content:flex-end; }
    .results{ display:none; margin-top:16px; }
    .score{ border:1px solid var(--rule); border-radius:12px; padding:16px; background:#fff; }
    .score h2{ margin:0 0 8px; font-size:20px; }
    .kpi{ font-size:14px; color:var(--muted); }
    .review{ margin-top:12px; }
    .rev-item{ background:#fff; border:1px solid var(--rule); border-radius:12px; margin-top:8px; padding:12px 14px; }
    .rev-item h4{ margin:0 0 6px; font-size:15px; }
    .tag{ display:inline-block; font-size:12px; padding:2px 8px; border-radius:999px; font-weight:700; }
    .ok{ background:#e3f2fd; color:var(--good); border:1px solid #bbdefb; }
    .no{ background:#ffebee; color:var(--bad); border:1px solid #ffcdd2; }
    .rev-row{ font-size:14px; margin-top:6px; }
    .rev-row b{ font-weight:700; }
    .muted{ color:var(--muted); font-size:13px; }
  </style>
  <!-- MathJax for clean math rendering -->
  <script>
    window.MathJax = { tex: { inlineMath: [['\\(','\\)'], ['$', '$']] }, svg: { fontCache: 'global' } };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body>
  <header>
    <div>
      <h1>Trigonometry Intro — Quiz</h1>
      <div class="sub">15 questions · 15 minutes · Single‑answer MCQs</div>
    </div>
    <div class="timer" id="timer">15:00</div>
  </header>

  <main>
    <section class="card hero" id="intro">
      <h2>Instructions</h2>
      <ul>
        <li>Click <b>Start</b> to reveal questions and begin the 15‑minute timer.</li>
        <li>Select exactly one answer per question.</li>
        <li>Angles are between 0° and 90° only.</li>
        <li>Submit anytime. When time ends, your quiz is auto‑submitted.</li>
      </ul>
      <div class="actions">
        <button id="startBtn">Start Quiz</button>
        <button class="secondary" id="scrollBtn" type="button" title="Scroll to timer">Scroll to Top</button>
      </div>
    </section>

    <form class="card quiz" id="quizForm">
      <div id="questions"></div>
      <div class="footer-actions">
        <button type="submit" id="submitBtn">Submit Quiz</button>
      </div>
    </form>

    <section class="results" id="results">
      <div class="score">
        <h2>Your Score</h2>
        <div class="kpi" id="scoreLine">—</div>
      </div>
      <div class="review" id="review"></div>
    </section>
  </main>

  <script>
    // ===== Question bank (0° < θ < 90° context; no quadrant labels) =====
    // All strings use TeX; labels are set with innerHTML so MathJax can render.
    const BANK = [
      { q: 'Evaluate \\((\\sin 30^\\circ)\\).', choices: ['1', '0', '1/2', '\\sqrt{3}/2'], correct: '1/2', fb: 'From the 30–60–90 triangle, \\sin 30^\\circ = 1/2.' },
      { q: 'Evaluate \\((\\cos 60^\\circ)\\).', choices: ['1/2', '\\sqrt{3}/2', '0', '\\sqrt{2}/2'], correct: '1/2', fb: 'Reference value: \\cos 60^\\circ = 1/2.' },
      { q: 'Evaluate \\((\\tan 45^\\circ)\\).', choices: ['1', '\\sqrt{3}', '1/\\sqrt{3}', '0'], correct: '1', fb: 'Equal legs \\Rightarrow \\tan 45^\\circ = 1.' },
      { q: 'Evaluate \\((\\csc 30^\\circ)\\).', choices: ['2', '1', '\\sqrt{3}', '1/2'], correct: '2', fb: '\\csc \\theta = 1/\\sin \\theta; \\sin 30^\\circ = 1/2.' },
      { q: 'Evaluate \\((\\sec 0^\\circ)\\).', choices: ['1', '0', '2', 'undefined'], correct: '1', fb: '\\sec \\theta = 1/\\cos \\theta; \\cos 0^\\circ = 1.' },
      { q: 'If \\((\\sin \\theta = 3/5)\\) with \\((0^\\circ<\\theta<90^\\circ)\\), find \\((\\cos \\theta)\\).', choices: ['3/5', '4/5', '5/3', '5/4'], correct: '4/5', fb: '\\sin^2 \\theta + \\cos^2 \\theta = 1; 3^2+4^2=5^2.' },
      { q: 'If \\((\\cos \\theta = 12/13)\\), find \\((\\sec \\theta)\\).', choices: ['13/12', '12/13', '5/12', '13/5'], correct: '13/12', fb: '\\sec \\theta = 1/\\cos \\theta.' },
      { q: 'Which identity equals \\((\\tan \\theta)\\)?', choices: ['\\sin \\theta/\\cos \\theta', '\\cos \\theta/\\sin \\theta', '1-\\cos^2 \\theta', '1/\\sin \\theta'], correct: '\\sin \\theta/\\cos \\theta', fb: 'Quotient identity: \\tan \\theta = \\sin \\theta/\\cos \\theta.' },
      { q: 'Complete: \\((1 + \\tan^2 \\theta = \\; ? )\\).', choices: ['\\csc^2 \\theta', '\\sec^2 \\theta', '\\cot^2 \\theta', '\\tan^2 \\theta'], correct: '\\sec^2 \\theta', fb: 'Pythagorean identity.' },
      { q: 'If \\((\\cos \\theta = 1/3)\\) and \\((0^\\circ<\\theta<90^\\circ)\\), find \\((\\sin \\theta)\\).', choices: ['(2\\sqrt{2})/3', '2/3', '\\sqrt{8}/9', '\\sqrt{5}/3'], correct: '(2\\sqrt{2})/3', fb: '\\sin^2 = 1-1/9 = 8/9, so \\sin = (2\\sqrt{2})/3.' },
      { q: 'A right triangle has legs 6 and 8. Find the hypotenuse.', choices: ['7', '10', '\\sqrt{100}', '14'], correct: '10', fb: 'By Pythagoras: \\sqrt{6^2+8^2}=10.' },
      { q: 'Opposite = 7 and hypotenuse = 25. Find \\((\\tan \\theta)\\).', choices: ['7/25', '24/25', '7/24', '25/7'], correct: '7/24', fb: 'Adjacent = 24, so \\tan \\theta = 7/24.' },
      { q: 'Evaluate \\((\\tan 60^\\circ)\\).', choices: ['\\sqrt{3}', '1/\\sqrt{3}', '1', '2'], correct: '\\sqrt{3}', fb: 'From the 30–60–90 triangle.' },
      { q: 'Which statement is an identity?', choices: ['\\sec \\theta - \\tan \\theta = 1/(\\sec \\theta + \\tan \\theta)', '\\tan \\theta = \\sin \\theta + \\cos \\theta', '\\cos^2 \\theta = 1-\\sin \\theta', '1+\\sin^2 \\theta = \\cos^2 \\theta'], correct: '\\sec \\theta - \\tan \\theta = 1/(\\sec \\theta + \\tan \\theta)', fb: 'Derivable using \\;1+\\tan^2 \\theta = \\sec^2 \\theta.' },
      { q: 'If \\((\\tan \\theta = 3/4)\\), find \\((\\sin \\theta)\\).', choices: ['3/5', '4/5', '5/3', '5/4'], correct: '3/5', fb: '3–4–5 triangle: \\sin = 3/5.' }
    ];

    // ===== Helpers =====
    function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; }

    const questionsEl = document.getElementById('questions');
    function renderQuestions(){
      questionsEl.innerHTML = '';
      BANK.forEach((item, idx) => {
        const qWrap = document.createElement('div');
        qWrap.className = 'q';
        const title = document.createElement('h3');
        title.innerHTML = `${idx+1}. ${item.q}`; // allow MathJax
        qWrap.appendChild(title);

        const choiceWrap = document.createElement('div');
        choiceWrap.className = 'choices';

        const options = item.choices.map(txt => ({ txt, correct: txt === item.correct }));
        shuffle(options);

        options.forEach((opt, k) => {
          const id = `q${idx}_c${k}`;
          const row = document.createElement('div');
          row.className = 'choice';

          const input = document.createElement('input');
          input.type = 'radio';
          input.name = `q${idx}`;
          input.id = id;
          input.value = opt.txt;
          if(opt.correct) input.dataset.correct = '1';

          const lab = document.createElement('label');
          lab.setAttribute('for', id);
          lab.innerHTML = opt.txt.includes('sqrt') || opt.txt.includes('^') || /[\\/]/.test(opt.txt)
            ? `\\(${opt.txt}\\)`
            : opt.txt; // wrap TeX-ish options so MathJax renders

          row.appendChild(input);
          row.appendChild(lab);
          choiceWrap.appendChild(row);
        });

        qWrap.dataset.fb = item.fb;
        qWrap.appendChild(choiceWrap);
        questionsEl.appendChild(qWrap);
      });
      if (window.MathJax && MathJax.typesetPromise) { MathJax.typesetPromise(); }
    }

    // ===== Timer =====
    const timerEl = document.getElementById('timer');
    let total = 15 * 60; // seconds
    let remaining = total; let ticking = null;
    function fmt(sec){ const m = Math.floor(sec/60).toString().padStart(2,'0'); const s = Math.floor(sec%60).toString().padStart(2,'0'); return `${m}:${s}`; }
    function startTimer(){ if(ticking) return; const startAt = Date.now(); ticking = setInterval(() => { const elapsed = Math.floor((Date.now() - startAt)/1000); remaining = Math.max(total - elapsed, 0); timerEl.textContent = fmt(remaining); if(remaining <= 0){ clearInterval(ticking); ticking = null; autoSubmit(); } }, 250); }

    // ===== Start & Scroll =====
    const startBtn = document.getElementById('startBtn');
    const scrollBtn = document.getElementById('scrollBtn');
    const formEl = document.getElementById('quizForm');
    startBtn.addEventListener('click', () => { renderQuestions(); document.getElementById('intro').style.display = 'none'; formEl.style.display = 'block'; window.scrollTo({ top: 0, behavior: 'smooth' }); startTimer(); });
    scrollBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

    // ===== Submission & Results =====
    const resultsEl = document.getElementById('results');
    const reviewEl = document.getElementById('review');
    const scoreLine = document.getElementById('scoreLine');
    const submitBtn = document.getElementById('submitBtn');

    function grade(){
      let correct = 0; reviewEl.innerHTML = '';
      const qBlocks = Array.from(document.querySelectorAll('.q'));
      qBlocks.forEach((qEl, idx) => {
        const picked = qEl.querySelector('input[type="radio"]:checked');
        const all = Array.from(qEl.querySelectorAll('input[type="radio"]'));
        const right = all.find(i => i.dataset.correct === '1');
        const ok = !!(picked && picked === right); if(ok) correct++;

        const item = document.createElement('div'); item.className = 'rev-item';
        const h = document.createElement('h4'); h.innerHTML = `${idx+1}. ${qEl.querySelector('h3').innerHTML.replace(/^\d+\.\s/, '')}`;
        const tag = document.createElement('span'); tag.className = 'tag ' + (ok ? 'ok' : 'no'); tag.textContent = ok ? 'Correct' : 'Incorrect'; h.appendChild(document.createTextNode(' ')); h.appendChild(tag);

        const row1 = document.createElement('div'); row1.className = 'rev-row'; row1.innerHTML = `<b>Your answer:</b> ${picked ? (picked.nextSibling.innerHTML) : '<span class="muted">(none)</span>'}`;
        const row2 = document.createElement('div'); row2.className = 'rev-row'; row2.innerHTML = `<b>Correct answer:</b> ${right ? right.nextSibling.innerHTML : ''}`;
        const row3 = document.createElement('div'); row3.className = 'rev-row muted'; row3.textContent = qEl.dataset.fb || '';

        item.appendChild(h); item.appendChild(row1); item.appendChild(row2); item.appendChild(row3); reviewEl.appendChild(item);
      });
      const percent = Math.round((correct / qBlocks.length) * 100); scoreLine.textContent = `${correct} / ${qBlocks.length} correct — ${percent}%`;
      if (window.MathJax && MathJax.typesetPromise) { MathJax.typesetPromise(); }
    }

    function finalize(){ formEl.style.display = 'none'; resultsEl.style.display = 'block'; grade(); window.scrollTo({ top: 0, behavior: 'smooth' }); }
    function autoSubmit(){ submitBtn.disabled = true; finalize(); }
    formEl.addEventListener('submit', (e) => { e.preventDefault(); if(ticking){ clearInterval(ticking); ticking = null; } finalize(); });
  </script>
</body>
</html>
