<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALI: 15-Minute Cumulative Drill</title>
    <!-- MathJax v3 Configuration -->
    <script>
    MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [['\\[', '\\]']]
      }
    };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 20px; background-color: #f8f9fa; color: #212529; line-height: 1.6; }
        .container { max-width: 900px; margin: auto; background-color: #fff; padding: 35px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.08); }
        h1, h2 { color: #0056b3; text-align: center; }
        .quiz-section, #score-card { display: none; }
        .question { margin-bottom: 25px; padding: 20px; border-left: 5px solid #007bff; background-color: #f8f9fa; border-radius: 5px; }
        .question p { font-weight: 600; margin-bottom: 15px; font-size: 1.1em; }
        .options label { display: block; margin-bottom: 10px; cursor: pointer; padding: 10px; border: 1px solid #dee2e6; border-radius: 5px; transition: background-color 0.2s; }
        .options label:hover { background-color: #e9ecef; }
        .options input[type="radio"] { margin-right: 12px; }
        .controls { text-align: center; margin-top: 30px; }
        button { padding: 12px 28px; font-size: 1.1em; font-weight: bold; cursor: pointer; border: none; border-radius: 5px; color: white; background-color: #28a745; transition: background-color 0.2s; }
        button:hover { background-color: #218838; }
        #submit-quiz { background-color: #007bff; }
        #submit-quiz:hover { background-color: #0056b3; }
        #timer { font-size: 1.4em; font-weight: bold; color: #dc3545; text-align: center; margin-bottom: 25px; padding: 10px; background-color: #f8f9fa; border-radius: 5px; }
        #score-card { text-align: center; padding: 20px; }
    </style>
</head>
<body>
<div class="container">
    <div id="intro">
        <h1>Cumulative Drill</h1>
        <p style="text-align: center;">This is a 15-question quiz on topics we've covered, with a focus on Quadrilaterals. You will have <strong>15 minutes</strong>.</p>
        <div class="controls">
            <button id="start-quiz">Start Drill</button>
        </div>
    </div>

    <div id="quiz-area" class="quiz-section">
        <div id="timer">15:00</div>
        <form id="quiz-form">
            
            <div class="question" data-answer="d">
                <p>1. (Quadrilaterals) In parallelogram \(ABCD\), \(m\angle A = (2x + 10)^\circ\) and \(m\angle B = (3x + 40)^\circ\). What is \(m\angle C\)?</p>
                <div class="options">
                    <label><input type="radio" name="q1" value="a"> \(26^\circ\)</label>
                    <label><input type="radio" name="q1" value="b"> \(62^\circ\)</label>
                    <label><input type="radio" name="q1" value="c"> \(118^\circ\)</label>
                    <label><input type="radio" name="q1" value="d"> \(62^\circ\)</label>
                </div>
            </div>

            <div class="question" data-answer="b">
                <p>2. (Similar Triangles) In \(\triangle PQR\), a line segment \(\overline{ST}\) is parallel to \(\overline{QR}\) with \(S\) on \(\overline{PQ}\) and \(T\) on \(\overline{PR}\). If \(PS = 6\), \(SQ = 3\), and \(ST = 8\), what is the length of \(\overline{QR}\)?</p>
                <div class="options">
                    <label><input type="radio" name="q2" value="a"> 10</label>
                    <label><input type="radio" name="q2" value="b"> 12</label>
                    <label><input type="radio" name="q2" value="c"> 16</label>
                    <label><input type="radio" name="q2" value="d"> 4</label>
                </div>
            </div>
            
            <div class="question" data-answer="a">
                <p>3. (Quadrilaterals) In rhombus \(RHOM\), diagonals \(\overline{RM}\) and \(\overline{HO}\) intersect at \(P\). If \(m\angle RPH = (5x + 10)^\circ\), what is the value of \(x\)?</p>
                <div class="options">
                    <label><input type="radio" name="q3" value="a"> 16</label>
                    <label><input type="radio" name="q3" value="b"> 34</label>
                    <label><input type="radio" name="q3" value="c"> 18</label>
                    <label><input type="radio" name="q3" value="d"> 10</label>
                </div>
            </div>

            <div class="question" data-answer="c">
                <p>4. (Quadratics) A geometry problem results in the equation \(x^2 - x = 20\). What is the positive solution for \(x\)?</p>
                <div class="options">
                    <label><input type="radio" name="q4" value="a"> 4</label>
                    <label><input type="radio" name="q4" value="b"> 10</label>
                    <label><input type="radio" name="q4" value="c"> 5</label>
                    <label><input type="radio" name="q4" value="d"> -4</label>
                </div>
            </div>
            
            <div class="question" data-answer="b">
                <p>5. (Quadrilaterals) In isosceles trapezoid \(TRAP\) with bases \(\overline{TR}\) and \(\overline{AP}\), \(m\angle T = 110^\circ\). What is \(m\angle P\)?</p>
                <div class="options">
                    <label><input type="radio" name="q5" value="a"> \(110^\circ\)</label>
                    <label><input type="radio" name="q5" value="b"> \(70^\circ\)</label>
                    <label><input type="radio" name="q5" value="c"> \(80^\circ\)</label>
                    <label><input type="radio" name="q5" value="d"> Cannot be determined</label>
                </div>
            </div>

            <div class="question" data-answer="a">
                <p>6. (Similar Triangles) In right \(\triangle ABC\), altitude \(\overline{CD}\) is drawn to hypotenuse \(\overline{AB}\). If \(AD = 4\) and \(DB = 16\), what is the length of the altitude \(\overline{CD}\)?</p>
                <div class="options">
                    <label><input type="radio" name="q6" value="a"> 8</label>
                    <label><input type="radio" name="q6" value="b"> 10</label>
                    <label><input type="radio" name="q6" value="c"> 64</label>
                    <label><input type="radio" name="q6" value="d"> 20</label>
                </div>
            </div>
            
            <div class="question" data-answer="d">
                <p>7. (Quadrilaterals) In kite \(KITE\), \(KI = KE\) and \(TI = TE\). If \(m\angle K = 130^\circ\) and \(m\angle I = 70^\circ\), what is \(m\angle T\)?</p>
                <div class="options">
                    <label><input type="radio" name="q7" value="a"> \(130^\circ\)</label>
                    <label><input type="radio" name="q7" value="b"> \(70^\circ\)</label>
                    <label><input type="radio" name="q7" value="c"> \(90^\circ\)</label>
                    <label><input type="radio" name="q7" value="d"> \(90^\circ\)</label>
                </div>
            </div>

            <div class="question" data-answer="a">
                <p>8. (Trigonometry) If \(\sin(\theta) < 0\) and \(\cos(\theta) > 0\), in which quadrant does the terminal side of \(\theta\) lie?</p>
                <div class="options">
                    <label><input type="radio" name="q8" value="a"> IV</label>
                    <label><input type="radio" name="q8" value="b"> III</label>
                    <label><input type="radio" name="q8" value="c"> II</label>
                    <label><input type="radio" name="q8" value="d"> I</label>
                </div>
            </div>

            <div class="question" data-answer="c">
                <p>9. (Quadrilaterals) A parallelogram has diagonals that are congruent. What is the most specific name for this figure?</p>
                <div class="options">
                    <label><input type="radio" name="q9" value="a"> Rhombus</label>
                    <label><input type="radio" name="q9" value="b"> Square</label>
                    <label><input type="radio" name="q9" value="c"> Rectangle</label>
                    <label><input type="radio" name="q9" value="d"> Kite</label>
                </div>
            </div>

            <div class="question" data-answer="b">
                <p>10. (Similar Triangles) \(\triangle ABC\) has \(m\angle A = 50^\circ\) and \(m\angle B = 70^\circ\). \(\triangle XYZ\) has \(m\angle Y = 70^\circ\) and \(m\angle Z = 60^\circ\). Which statement is true?</p>
                <div class="options">
                    <label><input type="radio" name="q10" value="a"> The triangles are congruent.</label>
                    <label><input type="radio" name="q10" value="b"> The triangles are similar by AA.</label>
                    <label><input type="radio" name="q10" value="c"> The triangles are not similar.</label>
                    <label><input type="radio" name="q10" value="d"> The triangles are similar by SSS.</label>
                </div>
            </div>
            
            <div class="question" data-answer="d">
                <p>11. (Quadrilaterals) In square \(ABCD\), diagonal \(\overline{BD}\) is drawn. What is \(m\angle ABD\)?</p>
                <div class="options">
                    <label><input type="radio" name="q11" value="a"> \(90^\circ\)</label>
                    <label><input type="radio" name="q11" value="b"> \(60^\circ\)</label>
                    <label><input type="radio" name="q11" value="c"> \(30^\circ\)</label>
                    <label><input type="radio" name="q11" value="d"> \(45^\circ\)</label>
                </div>
            </div>

            <div class="question" data-answer="c">
                <p>12. (Quadratics) The length of a rectangle is 5 units more than its width, \(w\). Its area is 36 square units. Which equation correctly models this situation?</p>
                <div class="options">
                    <label><input type="radio" name="q12" value="a"> \(w^2 - 5w - 36 = 0\)</label>
                    <label><input type="radio" name="q12" value="b"> \(2w + 2(w+5) = 36\)</label>
                    <label><input type="radio" name="q12" value="c"> \(w^2 + 5w - 36 = 0\)</label>
                    <label><input type="radio" name="q12" value="d"> \(w^2 + 5w = 0\)</label>
                </div>
            </div>

            <div class="question" data-answer="a">
                <p>13. (Similar Triangles) In \(\triangle LMN\), a line segment \(\overline{RS}\) is parallel to \(\overline{MN}\) with \(R\) on \(\overline{LM}\) and \(S\) on \(\overline{LN}\). If \(LR = 5\), \(RM = 2\), and \(LS = 7\), what is the length of \(\overline{SN}\)?</p>
                <div class="options">
                    <label><input type="radio" name="q13" value="a"> 2.8</label>
                    <label><input type="radio" name="q13" value="b"> 17.5</label>
                    <label><input type="radio" name="q13" value="c"> 9.8</label>
                    <label><input type="radio" name="q13" value="d"> 5.0</label>
                </div>
            </div>

            <div class="question" data-answer="d">
                <p>14. (Quadrilaterals) The perimeter of a rhombus is 60. The length of one of its sides is \((2x + 5)\). What is the value of \(x\)?</p>
                <div class="options">
                    <label><input type="radio" name="q14" value="a"> 12.5</label>
                    <label><input type="radio" name="q14" value="b"> 27.5</label>
                    <label><input type="radio" name="q14" value="c"> 15</label>
                    <label><input type="radio" name="q14" value="d"> 5</label>
                </div>
            </div>

            <div class="question" data-answer="b">
                <p>15. (Quadrilaterals) In rectangle \(WXYZ\), diagonals \(\overline{WY}\) and \(\overline{XZ}\) intersect at \(P\). If \(WY = 4x - 6\) and \(XP = x + 4\), what is the length of \(\overline{WY}\)?</p>
                <div class="options">
                    <label><input type="radio" name="q15" value="a"> 7</label>
                    <label><input type="radio" name="q15" value="b"> 22</label>
                    <label><input type="radio" name="q15" value="c"> 11</label>
                    <label><input type="radio" name="q15" value="d"> 14</label>
                </div>
            </div>
            
            <div class="controls">
                <button type="button" id="submit-quiz">Submit Drill</button>
            </div>
        </form>
    </div>

    <div id="score-card" class="quiz-section">
        <h2>Drill Results</h2>
        <p>Total Questions: <span id="total-questions-display"></span></p>
        <p style="color: #28a745;">Correct Answers: <span id="correct-answers-display"></span></p>
        <p style="color: #dc3545;">Incorrect Answers: <span id="incorrect-answers-display"></span></p>
        <p><strong>Percentage Score: <span id="percentage-score-display"></span>%</strong></p>
        <div class="controls">
            <button onclick="location.reload()">Retake Drill</button>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        let timerInterval;
        const quizDuration = 900; // 15 minutes in seconds
        let timeLeft = quizDuration;

        const startButton = document.getElementById('start-quiz');
        const submitButton = document.getElementById('submit-quiz');
        const introSection = document.getElementById('intro');
        const quizArea = document.getElementById('quiz-area');
        const timerDisplay = document.getElementById('timer');
        const scoreCard = document.getElementById('score-card');
        const allQuestions = document.querySelectorAll('.question');

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = formatTime(timeLeft);
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "Time's up!";
                    submitQuiz();
                }
            }, 1000);
        }

        function startQuiz() {
            introSection.style.display = 'none';
            quizArea.style.display = 'block';
            
            // CRITICAL FIX: Call MathJax to typeset the quiz content AFTER it becomes visible.
            if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
                MathJax.typesetPromise([quizArea]);
            }
            
            startTimer();
        }

        function submitQuiz() {
            clearInterval(timerInterval);
            quizArea.style.display = 'none';
            scoreCard.style.display = 'block';

            let correctAnswers = 0;
            const totalQuestions = allQuestions.length;

            allQuestions.forEach(questionDiv => {
                const correctAnswer = questionDiv.dataset.answer;
                const selectedOption = questionDiv.querySelector('input[type="radio"]:checked');
                
                if (selectedOption && selectedOption.value === correctAnswer) {
                    correctAnswers++;
                }
            });

            const incorrectAnswers = totalQuestions - correctAnswers;
            const percentage = (correctAnswers / totalQuestions) * 100;

            document.getElementById('total-questions-display').textContent = totalQuestions;
            document.getElementById('correct-answers-display').textContent = correctAnswers;
            document.getElementById('incorrect-answers-display').textContent = incorrectAnswers;
            document.getElementById('percentage-score-display').textContent = percentage.toFixed(2);
        }

        startButton.addEventListener('click', startQuiz);
        submitButton.addEventListener('click', submitQuiz);
        timerDisplay.textContent = formatTime(quizDuration);
    });
</script>
</body>
</html>
