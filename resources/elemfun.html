<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALI: Quadrilateral Properties Drill</title>
    <!-- MathJax v3 Configuration -->
    <script>
    MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [['\\[', '\\]']]
      }
    };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 20px; background-color: #f8f9fa; color: #212529; line-height: 1.6; }
        .container { max-width: 900px; margin: auto; background-color: #fff; padding: 35px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.08); }
        h1, h2 { color: #0056b3; text-align: center; }
        .quiz-section, #score-card { display: none; }
        .question { margin-bottom: 25px; padding: 20px; border-left: 5px solid #007bff; background-color: #f8f9fa; border-radius: 5px; }
        .question p { font-weight: 600; margin-bottom: 15px; font-size: 1.1em; }
        .options label { display: block; margin-bottom: 10px; cursor: pointer; padding: 10px; border: 1px solid #dee2e6; border-radius: 5px; transition: background-color 0.2s; }
        .options label:hover { background-color: #e9ecef; }
        .options input[type="radio"] { margin-right: 12px; }
        .controls { text-align: center; margin-top: 30px; }
        button { padding: 12px 28px; font-size: 1.1em; font-weight: bold; cursor: pointer; border: none; border-radius: 5px; color: white; background-color: #28a745; transition: background-color 0.2s; }
        button:hover { background-color: #218838; }
        #submit-quiz { background-color: #007bff; }
        #submit-quiz:hover { background-color: #0056b3; }
        #timer { font-size: 1.4em; font-weight: bold; color: #dc3545; text-align: center; margin-bottom: 25px; padding: 10px; background-color: #f8f9fa; border-radius: 5px; }
        #score-card { text-align: center; padding: 20px; }
    </style>
</head>
<body>
<div class="container">
    <div id="intro">
        <h1>Quadrilateral Properties Drill</h1>
        <p style="text-align: center;">This is a 15-question quiz on the properties of quadrilaterals. You will have <strong>15 minutes</strong>.</p>
        <div class="controls">
            <button id="start-quiz">Start Drill</button>
        </div>
    </div>

    <div id="quiz-area" class="quiz-section">
        <div id="timer">15:00</div>
        <form id="quiz-form">
            
            <div class="question" data-answer="c">
                <p>1. In parallelogram \(ABCD\), \(m\angle A = (3x + 20)^\circ\) and \(m\angle C = (5x - 12)^\circ\). What is the value of \(x\)?</p>
                <div class="options">
                    <label><input type="radio" name="q1" value="a"> 8</label>
                    <label><input type="radio" name="q1" value="b"> 21.5</label>
                    <label><input type="radio" name="q1" value="c"> 16</label>
                    <label><input type="radio" name="q1" value="d"> 32</label>
                </div>
            </div>

            <div class="question" data-answer="b">
                <p>2. Which of the following is a property of a rhombus, but NOT necessarily a property of a rectangle?</p>
                <div class="options">
                    <label><input type="radio" name="q2" value="a"> Diagonals are congruent.</label>
                    <label><input type="radio" name="q2" value="b"> Diagonals are perpendicular.</label>
                    <label><input type="radio" name="q2" value="c"> All four angles are right angles.</label>
                    <label><input type="radio" name="q2" value="d"> Opposite sides are parallel.</label>
                </div>
            </div>
            
            <div class="question" data-answer="d">
                <p>3. In rectangle \(WXYZ\), the diagonals intersect at point \(P\). If \(WP = 3x + 1\) and \(PY = 5x - 7\), what is the length of the full diagonal \(WY\)?</p>
                <div class="options">
                    <label><input type="radio" name="q3" value="a"> 4</label>
                    <label><input type="radio" name="q3" value="b"> 13</label>
                    <label><input type="radio" name="q3" value="c"> 18</label>
                    <label><input type="radio" name="q3" value="d"> 26</label>
                </div>
            </div>

            <div class="question" data-answer="a">
                <p>4. The sum of the interior angles of a convex decagon (10 sides) is:</p>
                <div class="options">
                    <label><input type="radio" name="q4" value="a"> \(1440^\circ\)</label>
                    <label><input type="radio" name="q4" value="b"> \(1800^\circ\)</label>
                    <label><input type="radio" name="q4" value="c"> \(1260^\circ\)</label>
                    <label><input type="radio" name="q4" value="d"> \(1620^\circ\)</label>
                </div>
            </div>
            
            <div class="question" data-answer="c">
                <p>5. In isosceles trapezoid \(ABCD\) with bases \(\overline{AB}\) and \(\overline{DC}\), \(m\angle D = (10x + 5)^\circ\) and \(m\angle C = (12x - 11)^\circ\). Find \(m\angle A\).</p>
                <div class="options">
                    <label><input type="radio" name="q5" value="a"> \(8^\circ\)</label>
                    <label><input type="radio" name="q5" value="b"> \(85^\circ\)</label>
                    <label><input type="radio" name="q5" value="c"> \(95^\circ\)</label>
                    <label><input type="radio" name="q5" value="d"> \(90^\circ\)</label>
                </div>
            </div>

            <div class="question" data-answer="b">
                <p>6. A square is a special type of all the following shapes EXCEPT:</p>
                <div class="options">
                    <label><input type="radio" name="q6" value="a"> Rectangle</label>
                    <label><input type="radio" name="q6" value="b"> Kite</label>
                    <label><input type="radio" name="q6" value="c"> Parallelogram</label>
                    <label><input type="radio" name="q6" value="d"> Rhombus</label>
                </div>
            </div>
            
            <div class="question" data-answer="d">
                <p>7. In parallelogram \(FGHI\), \(m\angle F = (x + 30)^\circ\) and \(m\angle G = (3x + 10)^\circ\). What is \(m\angle H\)?</p>
                <div class="options">
                    <label><input type="radio" name="q7" value="a"> \(35^\circ\)</label>
                    <label><input type="radio" name="q7" value="b"> \(65^\circ\)</label>
                    <label><input type="radio" name="q7" value="c"> \(145^\circ\)</label>
                    <label><input type="radio" name="q7" value="d"> \(115^\circ\)</label>
                </div>
            </div>

            <div class="question" data-answer="a">
                <p>8. In rhombus \(ABCD\), the diagonals intersect at \(E\). If \(m\angle BAE = 32^\circ\), what is \(m\angle ABE\)?</p>
                <div class="options">
                    <label><input type="radio" name="q8" value="a"> \(58^\circ\)</label>
                    <label><input type="radio" name="q8" value="b"> \(32^\circ\)</label>
                    <label><input type="radio" name="q8" value="c"> \(90^\circ\)</label>
                    <label><input type="radio" name="q8" value="d"> \(64^\circ\)</label>
                </div>
            </div>

            <div class="question" data-answer="c">
                <p>9. In kite \(WXYZ\), \(WX=WZ\) and \(XY=ZY\). If \(m\angle W = 110^\circ\) and \(m\angle Y = 50^\circ\), what is \(m\angle X\)?</p>
                <div class="options">
                    <label><input type="radio" name="q9" value="a"> \(90^\circ\)</label>
                    <label><input type="radio" name="q9" value="b"> \(110^\circ\)</label>
                    <label><input type="radio" name="q9" value="c"> \(100^\circ\)</label>
                    <label><input type="radio" name="q9" value="d"> \(50^\circ\)</label>
                </div>
            </div>

            <div class="question" data-answer="b">
                <p>10. What is the most specific name for a quadrilateral with diagonals that are congruent and bisect each other?</p>
                <div class="options">
                    <label><input type="radio" name="q10" value="a"> Parallelogram</label>
                    <label><input type="radio" name="q10" value="b"> Rectangle</label>
                    <label><input type="radio" name="q10" value="c"> Rhombus</label>
                    <label><input type="radio" name="q10" value="d"> Isosceles Trapezoid</label>
                </div>
            </div>
            
            <div class="question" data-answer="d">
                <p>11. In rhombus \(PQRS\), \(PQ = 4x - 5\) and \(PS = 2x + 9\). What is the perimeter of the rhombus?</p>
                <div class="options">
                    <label><input type="radio" name="q11" value="a"> 7</label>
                    <label><input type="radio" name="q11" value="b"> 23</label>
                    <label><input type="radio" name="q11" value="c"> 46</label>
                    <label><input type="radio" name="q11" value="d"> 92</label>
                </div>
            </div>

            <div class="question" data-answer="a">
                <p>12. A quadrilateral must be a parallelogram if it has:</p>
                <div class="options">
                    <label><input type="radio" name="q12" value="a"> One pair of sides that are both congruent and parallel.</label>
                    <label><input type="radio" name="q12" value="b"> One pair of congruent sides and one pair of parallel sides.</label>
                    <label><input type="radio" name="q12" value="c"> Diagonals that are congruent.</label>
                    <label><input type="radio" name="q12" value="d"> Two pairs of congruent sides.</label>
                </div>
            </div>

            <div class="question" data-answer="c">
                <p>13. In isosceles trapezoid \(EFGH\) with legs \(\overline{EH}\) and \(\overline{FG}\), \(EH = 3y - 2\) and \(FG = y + 8\). Find the value of \(y\).</p>
                <div class="options">
                    <label><input type="radio" name="q13" value="a"> 3</label>
                    <label><input type="radio" name="q13" value="b"> 4</label>
                    <label><input type="radio" name="q13" value="c"> 5</label>
                    <label><input type="radio" name="q13" value="d"> 6</label>
                </div>
            </div>

            <div class="question" data-answer="b">
                <p>14. In rhombus \(LMNO\), \(m\angle LMN = 100^\circ\). What is \(m\angle MLO\)?</p>
                <div class="options">
                    <label><input type="radio" name="q14" value="a"> \(80^\circ\)</label>
                    <label><input type="radio" name="q14" value="b"> \(40^\circ\)</label>
                    <label><input type="radio" name="q14" value="c"> \(50^\circ\)</label>
                    <label><input type="radio" name="q14" value="d"> \(100^\circ\)</label>
                </div>
            </div>

            <div class="question" data-answer="a">
                <p>15. What is the most specific name for a quadrilateral whose diagonals are perpendicular bisectors of each other?</p>
                <div class="options">
                    <label><input type="radio" name="q15" value="a"> Rhombus</label>
                    <label><input type="radio" name="q15" value="b"> Rectangle</label>
                    <label><input type="radio" name="q15" value="c"> Parallelogram</label>
                    <label><input type="radio" name="q15" value="d"> Kite</label>
                </div>
            </div>
            
            <div class="controls">
                <button type="button" id="submit-quiz">Submit Drill</button>
            </div>
        </form>
    </div>

    <div id="score-card" class="quiz-section">
        <h2>Drill Results</h2>
        <p>Total Questions: <span id="total-questions-display"></span></p>
        <p style="color: #28a745;">Correct Answers: <span id="correct-answers-display"></span></p>
        <p style="color: #dc3545;">Incorrect Answers: <span id="incorrect-answers-display"></span></p>
        <p><strong>Percentage Score: <span id="percentage-score-display"></span>%</strong></p>
        <div class="controls">
            <button onclick="location.reload()">Retake Drill</button>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        let timerInterval;
        const quizDuration = 900; // 15 minutes in seconds
        let timeLeft = quizDuration;

        const startButton = document.getElementById('start-quiz');
        const submitButton = document.getElementById('submit-quiz');
        const introSection = document.getElementById('intro');
        const quizArea = document.getElementById('quiz-area');
        const timerDisplay = document.getElementById('timer');
        const scoreCard = document.getElementById('score-card');
        const allQuestions = document.querySelectorAll('.question');

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = formatTime(timeLeft);
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "Time's up!";
                    submitQuiz();
                }
            }, 1000);
        }

        function startQuiz() {
            introSection.style.display = 'none';
            quizArea.style.display = 'block';
            // CRITICAL FIX: Call MathJax to typeset the quiz content AFTER it becomes visible.
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise([quizArea]);
            }
            startTimer();
        }

        function submitQuiz() {
            clearInterval(timerInterval);
            quizArea.style.display = 'none';
            scoreCard.style.display = 'block';

            let correctAnswers = 0;
            const totalQuestions = allQuestions.length;

            allQuestions.forEach(questionDiv => {
                const correctAnswer = questionDiv.dataset.answer;
                const selectedOption = questionDiv.querySelector('input[type="radio"]:checked');
                
                if (selectedOption && selectedOption.value === correctAnswer) {
                    correctAnswers++;
                }
            });

            const incorrectAnswers = totalQuestions - correctAnswers;
            const percentage = (correctAnswers / totalQuestions) * 100;

            document.getElementById('total-questions-display').textContent = totalQuestions;
            document.getElementById('correct-answers-display').textContent = correctAnswers;
            document.getElementById('incorrect-answers-display').textContent = incorrectAnswers;
            document.getElementById('percentage-score-display').textContent = percentage.toFixed(2);
        }

        startButton.addEventListener('click', startQuiz);
        submitButton.addEventListener('click', submitQuiz);
        timerDisplay.textContent = formatTime(quizDuration);
    });
</script>
</body>
</html>
