<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>MATH 1320 ‚Äî Lecture: Probability</title>

    <!-- Reveal.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reset.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/theme/serif.min.css" id="theme">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <style>
        :root {
            --r-main-font-size: 28px;
            --header-h: 72px;
            --footer-h: 44px;
            --frame-pad: 18px;
            /* Theme Colors */
            --primary-color: #A10022;
            --secondary-color: #1E293B;
            --accent-color: #F59E0B;
            --warn-color: #B45309;
            --bg-light: #F8FAFC;
            --card-bg: #fff;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, Roboto, Arial, sans-serif;
            background-color: var(--bg-light);
        }

        .reveal h1,
        .reveal h2,
        .reveal h3 {
            text-transform: none;
        }

        .reveal h1 {
            font-size: 1.8em;
            color: var(--primary-color);
        }

        .reveal h2 {
            font-size: 1.5em;
            color: var(--secondary-color);
        }

        .reveal h3 {
            font-size: 1.2em;
            color: #475569;
        }

        /* Fixed Frame */
        #page-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-h);
            background-color: var(--card-bg);
            color: var(--secondary-color);
            border-bottom: 2px solid var(--primary-color);
            padding: 0 var(--frame-pad);
            font-size: 0.9em;
            font-weight: 700;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 60;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        #menu-btn {
            background: none;
            border: none;
            font-size: 1.2em;
            cursor: pointer;
            padding: 5px;
            margin-left: 15px;
        }

        /* Sidebar */
        #toc-sidebar {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            width: 320px;
            background: #fff;
            transform: translateX(-100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100;
            border-right: 1px solid #ccc;
            box-shadow: 4px 0 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            padding-top: var(--header-h);
        }

        #toc-sidebar.open {
            transform: translateX(0);
        }

        #toc-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 99;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        #toc-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        #toc-list a {
            text-decoration: none;
            color: var(--secondary-color);
            padding: 12px 20px;
            display: block;
        }

        #toc-list a:hover {
            background: var(--bg-light);
            color: var(--primary-color);
        }

        #page-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: var(--footer-h);
            background-color: var(--secondary-color);
            color: #fff;
            padding: 0 var(--frame-pad);
            font-size: 0.75em;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 60;
        }

        .reveal {
            height: calc(100vh - var(--header-h) - var(--footer-h));
            margin-top: var(--header-h);
        }

        .reveal section {
            max-height: 100%;
            overflow-y: auto;
        }

        /* Components */
        .card {
            background: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            text-align: left;
            position: relative;
        }

        .callout {
            border-left: 6px solid var(--accent-color);
            background: white;
            padding: 12px 16px;
            border-radius: 8px;
            text-align: left;
            margin: 10px auto;
            max-width: 900px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            align-items: start;
        }

        .three-col-equal {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .chip {
            background: #EFF6FF;
            border: 1px solid #BFDBFE;
            color: #1E40AF;
            padding: 2px 8px;
            border-radius: 99px;
            font-size: 0.7em;
            font-weight: 700;
            display: inline-block;
            margin-right: 5px;
        }

        .chip.success {
            background: #F0FDF4;
            border-color: #BBF7D0;
            color: #166534;
        }

        .chip.warn {
            background: #FEF2F2;
            border-color: #FECACA;
            color: #991B1B;
        }

        .step-num {
            display: inline-block;
            width: 20px;
            height: 20px;
            background: var(--secondary-color);
            color: white;
            border-radius: 50%;
            text-align: center;
            font-size: 0.8em;
            line-height: 20px;
            margin-right: 8px;
        }

        /* Interactive Styles */
        .interactive-box {
            background: #f1f5f9;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px dashed #cbd5e1;
            transition: border-color 0.3s;
        }

        .interactive-box:hover {
            border-color: var(--primary-color);
        }

        button.action-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: opacity 0.2s;
        }

        button.action-btn:hover {
            opacity: 0.9;
        }

        button.action-btn:active {
            transform: scale(0.98);
        }

        .venn-circle {
            transition: fill 0.3s, stroke-width 0.3s;
            cursor: pointer;
        }

        .venn-circle:hover {
            fill-opacity: 0.5;
            stroke-width: 3px;
        }
    </style>
</head>

<body>
    <header id="page-header">
        <div style="display:flex; align-items:center;">
            <button id="menu-btn"><i class="fa-solid fa-bars"></i></button>
            <span style="margin-left: 12px;">MATH 1320 ‚Äî Intro to Probability & Statistics</span>
        </div>
        <span id="header-topic">Lecture: Probability</span>
    </header>

    <div id="toc-overlay"></div>
    <aside id="toc-sidebar">
        <div style="padding:15px 20px; border-bottom:1px solid #ddd; display:flex; justify-content:space-between;">
            <h3 style="margin:0; font-size:1.1rem;">Contents</h3>
            <button id="close-toc" style="border:none; bg:none; font-size:1.2rem; cursor:pointer;">&times;</button>
        </div>
        <div style="overflow-y:auto; flex:1;">
            <ul id="toc-list" style="list-style:none; padding:0; margin:0;"></ul>
        </div>
    </aside>

    <footer id="page-footer">
        <span>Prof. Vinay Kodipelly</span>
        <span>Lecture 4</span>
    </footer>

    <div class="reveal">
        <div class="slides">

            <!-- Slide 1: Welcome -->
            <section data-topic="Welcome">
                <h1>Lecture: Probability</h1>
                <h3>The Science of Uncertainty</h3>
                <div style="margin-top: 40px; display:inline-block; border-top:1px solid #ccc; padding-top:20px;">
                    <p style="font-size: 0.9em; color: var(--secondary-color);">Basics ‚Ä¢ Rules ‚Ä¢ Independence ‚Ä¢ Counting
                    </p>
                </div>
            </section>

            <!-- Slide 2: Roadmap -->
            <section data-topic="Roadmap">
                <h2>Today's Roadmap</h2>
                <div class="three-col-equal">
                    <div class="card" style="border-top: 5px solid #0EA5E9;">
                        <h3 style="color:#0EA5E9;">1. Fundamentals</h3>
                        <ul class="tiny">
                            <li>Equation: $f/N$</li>
                            <li>Events & Sample Space</li>
                            <li>Venn Diagrams</li>
                        </ul>
                    </div>
                    <div class="card" style="border-top: 5px solid #F59E0B;">
                        <h3 style="color:#F59E0B;">2. The Rules</h3>
                        <ul class="tiny">
                            <li>Addition (OR)</li>
                            <li>Multiplication (AND)</li>
                            <li>Conditional ("Given")</li>
                        </ul>
                    </div>
                    <div class="card" style="border-top: 5px solid var(--primary-color);">
                        <h3 style="color:var(--primary-color);">3. Counting</h3>
                        <ul class="tiny">
                            <li>Fundamental Rule</li>
                            <li>Permutations (Order Check)</li>
                            <li>Combinations (No Order)</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Slide 3: Basics -->
            <section data-topic="The Basics">
                <h2>Probability Basics</h2>
                <div class="two-col">
                    <div class="card">
                        <h4>Formula (Classical)</h4>
                        <div class="callout" style="text-align:center;">
                            $P(E) = \frac{\text{Outcomes we want}}{\text{Total Possible Outcomes}}$
                        </div>
                        <ul class="tiny" style="margin-top:15px;">
                            <li><strong>Impossible:</strong> $P=0$</li>
                            <li><strong>Certain:</strong> $P=1$</li>
                        </ul>
                    </div>

                    <!-- INTERACTIVE: COIN FLIPPER -->
                    <div class="card interactive-box">
                        <h4><i class="fa-solid fa-coins"></i> Coin Flipper</h4>
                        <p class="tiny">Law of Large Numbers</p>
                        <div id="coin-stats"
                            style="display:flex; justify-content:space-around; margin:10px 0; font-size:0.8em;">
                            <div>Heads: <span id="h-count">0</span></div>
                            <div>Tails: <span id="t-count">0</span></div>
                            <div>Total: <span id="total-count">0</span></div>
                        </div>
                        <div style="background:#ddd; height:10px; border-radius:5px; overflow:hidden;">
                            <div id="prob-bar"
                                style="width:50%; background:var(--primary-color); height:100%; transition:width 0.2s;">
                            </div>
                        </div>
                        <p class="tiny" style="margin-top:5px;">P(Heads) ‚âà <span id="calc-prob">--</span></p>
                        <button class="action-btn" onclick="flipCoin()">Flip 1x</button>
                        <button class="action-btn" onclick="flipCoin(10)"
                            style="background:var(--secondary-color);">Flip 10x</button>
                    </div>
                </div>
            </section>

            <!-- Slide 4: Events -->
            <section data-topic="Events">
                <h2>Events & Relationships</h2>
                <div class="two-col">
                    <div class="card">
                        <h4>Definitions</h4>
                        <p class="tiny"><strong>Event ($E$):</strong> Any specific result (e.g., Rolling a 6).</p>
                        <p class="tiny"><strong>Sample Space ($S$):</strong> EVERYTHING that could happen.</p>
                        <hr>
                        <h4>Pizza Analogy</h4>
                        <p class="tiny"><strong>Union:</strong> Pepperoni OR Mushroom (Both is okay).</p>
                        <p class="tiny"><strong>Intersection:</strong> Pepperoni AND Mushroom (Must have both).</p>
                    </div>

                    <!-- INTERACTIVE: Venn -->
                    <div class="card" style="text-align:center;">
                        <h4>Interactive Venn</h4>
                        <svg viewBox="0 0 200 120" style="margin:0 auto; max-width:100%;">
                            <circle cx="70" cy="60" r="40" fill="rgba(161,0,34,0.3)" stroke="var(--primary-color)"
                                class="venn-circle" onmouseenter="showVenn('Event A only')"
                                onmouseleave="clearVenn()" />
                            <circle cx="130" cy="60" r="40" fill="rgba(30,41,59,0.3)" stroke="var(--secondary-color)"
                                class="venn-circle" onmouseenter="showVenn('Event B only')"
                                onmouseleave="clearVenn()" />
                            <text x="50" y="65" font-size="12" fill="var(--primary-color)">A</text>
                            <text x="150" y="65" font-size="12" fill="var(--secondary-color)">B</text>

                            <!-- Intersection trigger -->
                            <path d="M103,34 Q115,60 103,86 Q85,60 103,34 Z" fill="transparent" style="cursor:pointer;"
                                onmouseenter="showVenn('Intersection (A AND B)')" onmouseleave="clearVenn()" />
                        </svg>
                        <p id="venn-label" class="chip success" style="opacity:0; transition:opacity 0.2s;">--</p>
                    </div>
                </div>
            </section>

            <!-- Slide 5: Addition Rules -->
            <section data-topic="Addition Rule">
                <h2>The Addition Rule (OR)</h2>
                <div class="card">
                    <div class="two-col">
                        <div>
                            <h4>General Rule</h4>
                            <p class="tiny">Don't double count the middle!</p>
                            <div class="callout">$P(A \cup B) = P(A) + P(B) - P(A \cap B)$</div>
                        </div>
                        <div style="text-align:center;">
                            <svg viewBox="0 0 150 100">
                                <circle cx="50" cy="50" r="40" fill="rgba(161,0,34,0.3)" />
                                <circle cx="100" cy="50" r="40" fill="rgba(30,41,59,0.3)" />
                                <text x="75" y="55" text-anchor="middle" font-size="10" font-weight="bold">Subtract
                                    Overlap</text>
                            </svg>
                        </div>
                    </div>
                    <hr>
                    <p class="tiny"><strong>Disjoint Properties:</strong> If they can't happen at once, Overlap = 0.</p>
                </div>
            </section>

            <!-- Slide 6: Continuous / Multiplication -->
            <section data-topic="Conditional">
                <h2>Conditional: "Given That..."</h2>
                <div class="two-col">
                    <div class="card">
                        <h4>The Filter Concept</h4>
                        <p class="tiny"><strong>Condition</strong>: "Given that the student is a Senior..."</p>
                        <p class="tiny"><strong>Effect</strong>: Throw away all freshmen, sophomores, juniors.</p>
                        <p class="tiny"><strong>Result</strong>: Our "Total" ($N$) gets smaller.</p>
                        <div class="callout">
                            $P(A|B) = \frac{\text{Overlap}}{\text{New Total (B)}}$
                        </div>
                    </div>

                    <!-- VISUAL: Dot Population -->
                    <div class="card" style="text-align:center;">
                        <div id="dot-container"
                            style="display:grid; grid-template-columns:repeat(10,1fr); gap:2px; margin-bottom:10px;">
                            <!-- Dots generated by JS -->
                        </div>
                        <button class="action-btn" onclick="filterDots()">Apply "Red" Condition</button>
                        <button class="action-btn" onclick="resetDots()" style="background:#ccc;">Reset</button>
                        <p id="dot-caption" class="tiny">Total Population: 50</p>
                    </div>
                </div>
            </section>

            <!-- Slide 7: Bayes & Total Prob -->
            <section data-topic="Bayes Rule">
                <h2>Bayes' Rule: The Medical Test</h2>
                <div class="two-col">
                    <div class="card interactive-box" style="text-align:left;">
                        <h4>Scenario:</h4>
                        <ul class="tiny">
                            <li><strong>Population:</strong> 1000 People.</li>
                            <li><strong>Disease Rate:</strong> 1% (10 sick, 990 healthy).</li>
                            <li><strong>Test Accuracy:</strong> 99% (caught the 10 sick).</li>
                            <li><strong>False Positive:</strong> 5% (Healthy people testing positive).</li>
                        </ul>
                        <hr>
                        <p class="tiny"><strong>You tested Positive (+). Are you sick?</strong></p>
                        <button class="action-btn" onclick="revealBayes()">Reveal Answer</button>
                    </div>

                    <div class="card" id="bayes-reveal" style="display:none;">
                        <h4>The "Tree" Truth</h4>
                        <p class="tiny success"><strong>Real Positives:</strong> 10 sick people.</p>
                        <p class="tiny warn"><strong>False Positives:</strong> $990 \times 0.05 \approx 50$ people.</p>
                        <hr>
                        <p class="tiny">Total Positives = $10 + 50 = 60$.</p>
                        <p class="tiny">Your chance = $10 / 60 \approx$</p>
                        <div class="chip warn" style="font-size:1.2em;">16%</div>
                        <p class="tiny muted">(Most people guess 95%!)</p>
                    </div>
                </div>
            </section>

            <!-- Slide 8: Counting -->
            <section data-topic="Counting">
                <h2>Counting: Order Matters?</h2>
                <div class="two-col">
                    <!-- INTERACTIVE: Permutation Lock -->
                    <div class="card interactive-box">
                        <h4><i class="fa-solid fa-lock"></i> Permutation</h4>
                        <div class="chip warn">Order Matters</div>
                        <p class="tiny">Combination Lock (3 digits)</p>
                        <div style="font-size:1.5em; font-family:monospace; margin:10px;">
                            <span id="dial1">0</span> - <span id="dial2">0</span> - <span id="dial3">0</span>
                        </div>
                        <button class="action-btn" onclick="cycleLock()">Spin Dials</button>
                        <p class="tiny">1-2-3 $\ne$ 3-2-1</p>
                    </div>

                    <!-- VISUAL: Combination Salad -->
                    <div class="card" style="text-align:center;">
                        <h4><i class="fa-solid fa-bowl-food"></i> Combination</h4>
                        <div class="chip success">No Order</div>
                        <p class="tiny">Fruit Salad</p>
                        <div style="font-size:2em; margin:10px;">
                            üçé üçå üçá
                        </div>
                        <p class="tiny">Apple-Banana = Banana-Apple</p>
                        <hr>
                        <p class="tiny"><strong>Formula divides out the duplicates.</strong></p>
                    </div>
                </div>
            </section>

            <!-- Slide 9: Data/Contingency -->
            <section data-topic="Data">
                <h2>Contingency Tables</h2>
                <div class="card">
                    <p class="tiny">Used to calculate probabilities from real data.</p>
                    <table
                        style="width:100%; font-size:0.6em; margin-top:10px; border-collapse:collapse; text-align:center;">
                        <tr style="background:#f1f1f1; font-weight:bold;">
                            <td></td>
                            <td>Dog Person</td>
                            <td>Cat Person</td>
                            <td>Total</td>
                        </tr>
                        <tr>
                            <td style="font-weight:bold;">Student</td>
                            <td>30</td>
                            <td>10</td>
                            <td><strong>40</strong></td>
                        </tr>
                        <tr>
                            <td style="font-weight:bold;">Faculty</td>
                            <td>20</td>
                            <td>40</td>
                            <td><strong>60</strong></td>
                        </tr>
                        <tr style="border-top:2px solid #ccc; font-weight:bold;">
                            <td>Total</td>
                            <td><strong>50</strong></td>
                            <td><strong>50</strong></td>
                            <td>100</td>
                        </tr>
                    </table>
                    <div class="two-col" style="margin-top:15px;">
                        <p class="tiny"><strong>Joint Prob (Student AND Dog):</strong><br>30/100 = 0.3</p>
                        <p class="tiny"><strong>Marginal Prob (Any Student):</strong><br>40/100 = 0.4</p>
                    </div>
                </div>
            </section>

            <!-- Slide 10: End -->
            <section data-topic="Questions">
                <h2 style="font-size: 3em;">Questions?</h2>
                <p>Next: Discrete Probability Distributions</p>
            </section>

        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/math/math.min.js"></script>
    <script>
        Reveal.initialize({ hash: true, controls: true, progress: true, slideNumber: 'c/t', margin: 0.04, width: 1100, plugins: [RevealMath.MathJax3] });

        // --- Sidebar Logic ---
        const tocList = document.getElementById('toc-list');
        const sidebar = document.getElementById('toc-sidebar');
        const overlay = document.getElementById('toc-overlay');
        function closeMenu() { sidebar.classList.remove('open'); overlay.classList.remove('active'); }
        function openMenu() { sidebar.classList.add('open'); overlay.classList.add('active'); }

        Reveal.on('ready', () => {
            document.querySelectorAll('.reveal .slides section').forEach(slide => {
                if (!slide.dataset.topic) return;
                const li = document.createElement('li');
                li.innerHTML = `<a href="#/${Reveal.getIndices(slide).h}" onclick="closeMenu()">${slide.dataset.topic}</a>`;
                tocList.appendChild(li);
            });
            resetDots(); // Init dots
        });
        document.getElementById('menu-btn').addEventListener('click', openMenu);
        document.getElementById('close-toc').addEventListener('click', closeMenu);
        document.getElementById('toc-overlay').addEventListener('click', closeMenu);
        Reveal.on('slidechanged', e => {
            if (e.currentSlide.dataset.topic) document.getElementById('header-topic').textContent = e.currentSlide.dataset.topic;
        });

        // --- INTERACTIVITY FUNCTIONS ---

        // 1. Coin Flipper
        let coinStats = { h: 0, t: 0, total: 0 };
        function flipCoin(n = 1) {
            for (let i = 0; i < n; i++) {
                Math.random() > 0.5 ? coinStats.h++ : coinStats.t++;
            }
            coinStats.total += n;
            document.getElementById('h-count').textContent = coinStats.h;
            document.getElementById('t-count').textContent = coinStats.t;
            document.getElementById('total-count').textContent = coinStats.total;

            const prob = (coinStats.h / coinStats.total * 100).toFixed(1);
            document.getElementById('prob-bar').style.width = prob + '%';
            document.getElementById('calc-prob').textContent = prob + '%';
        }

        // 2. Venn Diagram
        function showVenn(text) {
            const label = document.getElementById('venn-label');
            label.textContent = text;
            label.style.opacity = 1;
        }
        function clearVenn() {
            document.getElementById('venn-label').style.opacity = 0;
        }

        // 3. Dot Filter (Conditional)
        function resetDots() {
            const container = document.getElementById('dot-container');
            container.innerHTML = '';
            for (let i = 0; i < 50; i++) {
                const dot = document.createElement('div');
                dot.style.width = '10px'; dot.style.height = '10px'; dot.style.borderRadius = '50%';
                dot.style.background = Math.random() > 0.3 ? '#cbd5e1' : '#A10022'; // 30% red
                dot.dataset.color = dot.style.background === 'rgb(161, 0, 34)' ? 'red' : 'gray';
                container.appendChild(dot);
            }
            document.getElementById('dot-caption').textContent = "Total Population: 50";
        }

        function filterDots() {
            const dots = document.querySelectorAll('#dot-container div');
            let redCount = 0;
            dots.forEach(dot => {
                if (dot.dataset.color !== 'red') {
                    dot.style.opacity = '0.1';
                } else {
                    redCount++;
                }
            });
            document.getElementById('dot-caption').textContent = `Condition Applied. New Total: ${redCount}`;
        }

        // 4. Bayes Reveal
        function revealBayes() {
            document.getElementById('bayes-reveal').style.display = 'block';
        }

        // 5. Permutation Lock
        function cycleLock() {
            document.getElementById('dial1').textContent = Math.floor(Math.random() * 10);
            document.getElementById('dial2').textContent = Math.floor(Math.random() * 10);
            document.getElementById('dial3').textContent = Math.floor(Math.random() * 10);
        }

    </script>
</body>

</html>
