<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Slides on Steroids — Student Selector Activity</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Meta / Licensing -->
  <link rel="canonical" href="https://www.activestem.org/resources/slides-on-steroids-student-selector/student-selector-activity.html">
  <meta name="author" content="Prof. Vinay Kanth Rao Kodipelly, University of Missouri–St. Louis">
  <meta name="copyright" content="© 2025 University of Missouri–St. Louis / ActiveSTEM">
  <meta name="license" content="Code: MIT; Content: CC BY 4.0">

  <style>
    :root{
      --brand-primary:#00539C; --brand-secondary:#00325C;
      --accent-green:#2E7D32; --accent-orange:#EF6C00; --accent-red:#C62828;
      --text-primary:#111827; --text-secondary:#4B5563;
      --bg-primary:#FFFFFF; --bg-secondary:#F4F6F8; --border-color:#D1D5DB;
      --shadow-md:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      --header-h:64px; --footer-h:44px;
    }
    [data-theme="dark"]{
      --brand-primary:#5D9CD4; --brand-secondary:#8BB8E8;
      --accent-green:#66BB6A; --accent-orange:#FFA726; --accent-red:#E57373;
      --text-primary:#F9FAFB; --text-secondary:#9CA3AF;
      --bg-primary:#111827; --bg-secondary:#1F2937; --border-color:#374151;
    }

    html,body{ height:100%; }
    body{
      margin:0; background:var(--bg-primary); color:var(--text-primary);
      font-family:'Inter',system-ui,sans-serif;
      overflow:hidden; /* prevent page scroll; we manage inner scrolls */
    }

    /* Header / Footer */
    #page-header,#page-footer{
      position:fixed; left:0; right:0; z-index:1000;
      background:var(--brand-primary); color:#fff;
      display:flex; align-items:center; justify-content:space-between;
      padding:0 20px; box-shadow:var(--shadow-md);
      font-family:'Poppins',sans-serif;
    }
    #page-header{ top:0; height:var(--header-h); }
    #page-footer{ bottom:0; height:var(--footer-h); font-size:.9em; }
    #page-header .author{ font-weight:800; font-size:1.1em; letter-spacing:.2px; }
    #page-header .topic{ font-weight:600; opacity:.95; }

    /* Main layout fits the viewport, no overflow cut-offs */
    .main{
      position:fixed; inset:var(--header-h) 0 var(--footer-h) 0;
      display:flex; gap:0; box-sizing:border-box;
      overflow:hidden; /* contain content */
    }
    .left, .right{ height:100%; }

    .left{
      flex: 0 0 340px;
      background:var(--bg-secondary);
      border-right:1px solid var(--border-color);
      padding:24px;
      display:flex; flex-direction:column; align-items:center;
      overflow:auto; /* if names overflow on small screens */
    }
    .right{
      flex:1 1 auto; padding:28px;
      display:grid; grid-template-rows: 1fr auto; gap:18px;
      overflow:hidden;
    }

    h2{ font-family:'Poppins',sans-serif; color:var(--brand-secondary); margin:0 0 12px; }
    .question-wrap{
      overflow:auto; /* long questions remain visible */
      padding-right:8px;
    }
    .question{
      font-size: clamp(1.2rem, 2.2vw, 1.6rem);
      line-height:1.6;
      margin:0;
    }

    /* Timer block: bottom-right, big and obvious */
    .controls{
      display:flex; align-items:center; justify-content:flex-end; gap:12px;
      flex-wrap:wrap;
    }
    .timer{
      display:flex; align-items:center; gap:10px;
      background:var(--bg-primary);
      border:1px solid var(--border-color); border-radius:12px;
      padding:10px 14px; min-width: 220px;
      box-shadow:var(--shadow-md);
    }
    .timer-display{
      font-family:'Poppins',sans-serif;
      font-weight:800; font-size: clamp(1.8rem, 3.4vw, 2.4rem);
      color:var(--brand-primary); letter-spacing:.5px;
      min-width: 120px; text-align:right;
    }
    .timer-select{
      font-family:inherit; font-weight:600; border:1px solid var(--border-color);
      border-radius:8px; padding:6px 8px; background:#fff;
    }
    .btn{
      font-family:'Poppins',sans-serif; font-weight:700;
      border:none; border-radius:10px; cursor:pointer;
      padding:12px 18px; box-shadow:var(--shadow-md);
    }
    .btn-primary{ background:var(--brand-primary); color:#fff; }
    .btn-warn{ background:var(--accent-orange); color:#fff; }
    .btn:disabled{ opacity:.6; cursor:not-allowed; }

    /* Selector (tumbler) */
    .wheel{
      width:100%; max-width: 280px; height:240px;
      border:2px solid var(--border-color); border-radius:14px;
      background:var(--bg-primary); position:relative;
      overflow:hidden; box-shadow: inset 0 0 12px rgba(0,0,0,.06);
    }
    .wheel::before, .wheel::after{
      content:''; position:absolute; left:0; right:0; height:40px; z-index:2; pointer-events:none;
    }
    .wheel::before{ top:0; background:linear-gradient(to bottom, var(--bg-primary) 30%, transparent); }
    .wheel::after{ bottom:0; background:linear-gradient(to top, var(--bg-primary) 30%, transparent); }

    .indicator{
      position:absolute; top:100px; left:-2px; right:-2px; height:40px; z-index:3;
      background:rgba(239,108,0,.09);
      border-top:2px solid var(--accent-orange);
      border-bottom:2px solid var(--accent-orange);
      pointer-events:none;
    }
    .tumbler{
      position:absolute; inset:0; will-change:transform;
      /* Idle position; animation added/removed with JS */
    }
    .name{
      height:40px; display:flex; align-items:center; justify-content:center;
      font-size:1.2rem; font-weight:700; color:var(--text-secondary);
    }

    /* Simple infinite scroll animation while the timer runs */
    @keyframes scrollLoop {
      0%   { transform: translateY(0); }
      100% { transform: translateY(-200%); } /* enough to look lively; we reset periodically in JS */
    }
    .spinning .tumbler{
      animation: scrollLoop 1.2s linear infinite;
    }

    /* Footer pills */
    .pill{
      display:inline-block; margin:0 6px 0 0; padding:6px 10px;
      border-radius:999px; border:1px solid rgba(255,255,255,.4);
      color:#fff; background:rgba(255,255,255,.12); font-weight:600; font-size:.85em;
      text-decoration:none;
    }

    /* Responsive safeguard: when height is tight, shrink paddings */
    @media (max-height: 620px){
      .left{ padding:16px; }
      .right{ padding:16px; }
      .timer{ padding:8px 12px; }
    }
  </style>
</head>
<body>
  <header id="page-header">
    <div class="author">Prof. Vinay Kanth Rao Kodipelly</div>
    <div class="topic">Student Selector — Timed Discussion</div>
  </header>

  <footer id="page-footer">
    <div class="brand">
      <span class="pill">University of Missouri–St. Louis</span>
      <span class="pill">Active Learning Institute</span>
      <a class="pill" href="https://www.activestem.org" target="_blank" rel="noopener">ActiveSTEM.org</a>
    </div>
    <div class="hints">Engage • Discuss • Learn</div>
  </footer>

  <main class="main">
    <section class="left" aria-label="Student selector">
      <h2>Student Selector</h2>
      <div class="wheel" id="wheel">
        <div class="indicator" aria-hidden="true"></div>
        <div id="tumbler" class="tumbler" aria-live="polite"></div>
      </div>
    </section>

    <section class="right" aria-label="Question & timer">
      <div class="question-wrap">
        <h2>Question for Discussion</h2>
        <p id="question" class="question">
          Welcome! Click <em>Start</em> to begin. A question appears here while the selector spins.
        </p>
      </div>

      <div class="controls">
        <div class="timer" role="group" aria-label="Countdown timer">
          <div id="time" class="timer-display">2:00</div>
          <select id="dur" class="timer-select" aria-label="Select duration">
            <option value="60">1 min</option>
            <option value="120" selected>2 min</option>
            <option value="180">3 min</option>
            <option value="300">5 min</option>
          </select>
        </div>
        <button id="reroll" class="btn btn-warn" style="display:none;">Spin Again</button>
        <button id="start" class="btn btn-primary">Start</button>
      </div>
    </section>
  </main>

  <script>
  (function(){
    // ---- CONFIG ----
    const ROSTER = [
      "Ava","Benjamin","Charlotte","Daniel","Emma","Finn",
      "Grace","Henry","Isabella","Jack","Katherine","Liam",
      "Mia","Noah","Olivia","Penelope","Quinn","Ryan","Sophia","Thomas"
    ];
    const QUESTIONS = [
      "Courtroom analogy: What is a Type I error? Why control with small α?",
      "z-test vs t-test — when and why?",
      "P-value = 0.03 with α = 0.05 → conclusion?",
      "Does a 95% CI mean 95% probability the true mean is inside this interval? Explain.",
      "How does increasing n affect statistical power, and why?"
    ];
    const NAME_H = 40; // must match .name height
    const VISIBLE_CENTER_IDX = 2; // 0-based inside a 240px (6 rows) window -> center row is #2 (top=0..5)

    // ---- STATE ----
    let qIdx = -1, ticking = null, remain = 120;
    let spinning = false;

    // ---- DOM ----
    const wheel = document.getElementById('wheel');
    const tumbler = document.getElementById('tumbler');
    const question = document.getElementById('question');
    const timeEl = document.getElementById('time');
    const dur = document.getElementById('dur');
    const startBtn = document.getElementById('start');
    const rerollBtn = document.getElementById('reroll');

    // Build a long list for nice visual spin
    function populate(){
      tumbler.innerHTML = '';
      const long = [...ROSTER, ...ROSTER, ...ROSTER, ...ROSTER]; // 4x list
      long.forEach(n=>{
        const d = document.createElement('div');
        d.className = 'name'; d.textContent = n;
        tumbler.appendChild(d);
      });
      // Reset position
      tumbler.style.transform = 'translateY(0)';
    }

    function fmt(s){
      const m = Math.floor(s/60), ss = (s%60).toString().padStart(2,'0');
      return `${m}:${ss}`;
    }

    function nextQuestion(){
      qIdx = (qIdx + 1) % QUESTIONS.length;
      question.textContent = QUESTIONS[qIdx];
    }

    function startCountdown(){
      if (ticking) clearInterval(ticking);
      remain = parseInt(dur.value,10) || 120;
      timeEl.textContent = fmt(remain);
      ticking = setInterval(()=>{
        remain--;
        timeEl.textContent = fmt(remain);
        if(remain <= 0){
          clearInterval(ticking); ticking = null;
          stopSpinAndSelect();
        }
      }, 1000);
    }

    // While counting down: just apply a CSS class that runs a simple loop animation.
    function beginSpin(){
      spinning = true;
      wheel.classList.add('spinning');
      // To avoid the CSS animation eventually translating too far from initial,
      // periodically snap back to the top (keeps it visually infinite)
      let resetEvery = 1500; // ms
      let last = Date.now();
      function keepAlive(){
        if(!spinning) return;
        const now = Date.now();
        if(now - last > resetEvery){
          // Snap back without the user noticing (because of gradients)
          tumbler.style.animation = 'none';
          tumbler.getBoundingClientRect(); // force reflow
          tumbler.style.animation = '';
          last = now;
        }
        requestAnimationFrame(keepAlive);
      }
      requestAnimationFrame(keepAlive);
    }

    // Stop spinning and snap the list so a random student sits in the center indicator.
    function stopSpinAndSelect(){
      spinning = false;
      wheel.classList.remove('spinning');

      // pick a random student index within base roster
      const pick = Math.floor(Math.random() * ROSTER.length);
      const targetOffset = (ROSTER.length + pick) * NAME_H; // land on the 3rd copy to ensure room
      const centerOffset = VISIBLE_CENTER_IDX * NAME_H;
      const finalY = targetOffset - centerOffset;

      // Smooth snap into place
      tumbler.style.transition = 'transform 900ms cubic-bezier(0.23, 1, 0.32, 1)';
      tumbler.style.transform = `translateY(-${finalY}px)`;

      // UI state
      startBtn.textContent = 'Next Question';
      startBtn.disabled = false;
      rerollBtn.style.display = 'inline-block';
    }

    function startRun(isReroll){
      if (spinning) return; // ignore double clicks
      startBtn.disabled = true;
      rerollBtn.style.display = 'none';
      tumbler.style.transition = 'none'; // remove any previous snap transition

      if(!isReroll){ nextQuestion(); }
      beginSpin();
      startCountdown();
    }

    // Init
    populate();
    timeEl.textContent = fmt(parseInt(dur.value,10) || 120);
    startBtn.addEventListener('click', ()=> startRun(false));
    rerollBtn.addEventListener('click', ()=> startRun(true));
    dur.addEventListener('change', ()=>{
      if(!ticking) timeEl.textContent = fmt(parseInt(dur.value,10) || 120);
    });

    // Fingerprint in console (light authorship trail)
    (function(){
      const fp = 'umsl-ss-selector-2025-09-r2';
      const by = '© 2025 Prof. Vinay Kanth Rao Kodipelly · UMSL · ActiveSTEM.org';
      const lic = 'Code: MIT · Content: CC BY 4.0';
      console.log('%cSlides on Steroids — Student Selector',
                  'font-weight:700;font-size:16px;',
                  `\n${by}\n${lic}\nFingerprint: ${fp}`);
      Object.defineProperty(window, 'slidesOnSteroidsSelector', {
        value: Object.freeze({ fingerprint: fp, author: by, license: lic }),
        writable:false, configurable:false, enumerable:true
      });
    })();
  })();
  </script>
</body>
</html>
