<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chapter 10 — Inferences for Two Population Means — Prof. Kodipelly</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Reveal core -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/theme/white.min.css" id="theme-link">

  <!-- Menu plugin -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js-menu@2.1.0/menu.css">

  <style>
    :root{
      --brand-primary:#00539C; --brand-secondary:#00325C;
      --accent-green:#2E7D32; --accent-orange:#EF6C00; --accent-red:#C62828;
      --text-primary:#111827; --text-secondary:#4B5563;
      --bg-primary:#FFFFFF; --bg-secondary:#F4F6F8; --border-color:#D1D5DB;
      --shadow-md:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    }
    [data-theme="dark"]{
      --brand-primary:#8BB8E8; --brand-secondary:#5A91C5;
      --accent-green:#66BB6A; --accent-orange:#FFA726; --accent-red:#E57373;
      --text-primary:#F9FAFB; --text-secondary:#9CA3AF;
      --bg-primary:#111827; --bg-secondary:#1F2937; --border-color:#374151;
    }

    body{ font-family:'Inter',system-ui,sans-serif; color:var(--text-primary); background:var(--bg-primary); }

    #page-header,#page-footer{ position:fixed; left:0; right:0; z-index:1000; background:var(--brand-primary); color:#fff; display:flex; align-items:center; justify-content:space-between; padding:0 20px; box-shadow:var(--shadow-md); font-family:'Poppins', sans-serif; }
    #page-header{ top:0; height:64px; }
    #page-footer{ bottom:0; height:40px; font-size:.85em; }
    #page-header .author{ font-weight:700; font-size:1.1em; }
    #page-header .topic{ font-weight:500; opacity:.95; }
    #page-header .controls{ display:flex; gap:12px; align-items:center; }
    #page-footer .hints{ opacity:.85; }
    .theme-toggle{ background:none; border:1px solid #fff4; color:#fff; border-radius:999px; padding:6px 10px; cursor:pointer; font-weight:600; }

    .reveal{ margin-top:64px; margin-bottom:40px; font-size:26px; }
    .reveal .slides section{ display:flex; flex-direction:column; justify-content:center; height:100%; padding:1vh 0; }
    .reveal h2{ font-family:'Poppins', sans-serif; color:var(--brand-secondary); font-size:1.5em; margin-bottom:20px; }
    .reveal h3{ font-family:'Poppins', sans-serif; font-size:1.0em; font-weight:600; margin-bottom:15px; }
    .reveal p,.reveal li{ line-height:1.6; }
    .left-align{ text-align:left; max-width:1000px; margin:0 auto; }

    .small{ font-size:.75em; color:var(--text-secondary); }
    .muted { color: var(--text-secondary); }
    .kbd{ padding:2px 6px; border:1px solid var(--border-color); border-radius:6px; font-family:ui-monospace, SFMono-Regular, Menlo, monospace; font-size:.8em; }
    .pill { display:inline-block; padding:4px 10px; border-radius:999px; border:1px solid var(--border-color); background:var(--bg-primary); font-size:.8em; }

    .callout{ border-left:4px solid var(--accent-orange); background:var(--bg-secondary); padding:16px 20px; border-radius:8px; border:1px solid var(--border-color); margin:1em auto; max-width: 1000px; }
    .card{ perspective:1200px; width:min(1000px,90vw); margin:16px auto; cursor:pointer; }
    .card-inner{ position:relative; width:100%; min-height:180px; transition:transform .6s; transform-style:preserve-3d; }
    .card.flipped .card-inner{ transform:rotateY(180deg); }
    .card-face{ position:absolute; inset:0; display:flex; flex-direction: column; align-items:center; justify-content:center; backface-visibility:hidden; border-radius:10px; border:1px solid var(--border-color); padding:20px; background:var(--bg-primary); box-shadow:var(--shadow-md); text-align:center; }
    .card-face.front{ background:var(--bg-secondary); }
    .card-face.back{ transform:rotateY(180deg); text-align:left; font-size:.9em; justify-content:flex-start; }

    .interactive-tool { background: var(--bg-secondary); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color); max-width: 1100px; margin: 15px auto; font-size: 0.85em; }
    .tool-controls { display: grid; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); gap: 12px; align-items:center; }
    .tool-controls label { font-weight: 500; display:flex; align-items:center; gap: 6px;}
    .tool-controls input[type="number"], .tool-controls input[type="text"]{ width: 100%; padding: 6px 8px; border:1px solid var(--border-color); border-radius:8px; background:var(--bg-primary); color:var(--text-primary); }
    .tool-controls select, .tool-controls button{ padding: 8px 10px; border-radius:8px; border:1px solid var(--border-color); background:var(--bg-primary); color:var(--text-primary); cursor:pointer; }
    .tool-controls button.primary{ background: var(--brand-primary); color:#fff; border-color: transparent; }
    .tool-output { margin-top: 10px; }

    /* Custom Illustration Styles */
    .viz-container { display: flex; justify-content: center; align-items: center; gap: 20px; margin: 20px 0; }
    .viz-box { border: 2px solid var(--brand-primary); border-radius: 10px; padding: 15px; text-align: center; }
    .viz-box.pop { width: 150px; height: 100px; }
    .viz-box.sample { width: 80px; height: 40px; background: var(--bg-secondary); border-style: dashed; }
    .viz-arrow { font-size: 2.5em; color: var(--brand-primary); }
    .viz-label { font-weight: 600; color: var(--brand-secondary); }
    .flowchart { background: var(--bg-secondary); border: 1px solid var(--border-color); padding: 20px; border-radius: 15px; font-size: 0.8em; }
  </style>
</head>
<body>
  <header id="page-header">
    <div class="author">Prof. Vinay Kanth Rao Kodipelly</div>
    <div class="topic" id="topic-slot">Two-Sample Inference</div>
    <div class="controls"><button class="theme-toggle" id="theme-toggle">Theme</button></div>
  </header>
  <footer id="page-footer"><div class="brand">University of Missouri–St. Louis</div><div class="hints">←/→ • F • S • <span class="kbd">M</span> menu</div></footer>

  <div class="reveal">
    <div class="slides">

      <!-- NEW Title Slide -->
      <section data-menu="title" data-topic="Two-Sample Means">
        <h2>Inferences for Two Population Means</h2>
        <div class="viz-container">
            <div class="fragment" data-fragment-index="1">
                <div class="viz-label">Last Chapter: One Mean</div>
                <div class="viz-box pop">Population</div>
                <div class="viz-arrow">↓</div>
                <div class="viz-box sample">Sample</div>
                <div class="viz-arrow">↘</div>
                <div>Test \(\mu\)</div>
            </div>
            <div class="viz-arrow fragment" data-fragment-index="3" style="font-size: 4em;">→</div>
            <div class="fragment" data-fragment-index="2">
                <div class="viz-label">This Chapter: Two Means</div>
                <div style="display: flex; gap: 40px;">
                    <div>
                        <div class="viz-box pop">Pop 1</div>
                        <div class="viz-arrow">↓</div>
                        <div class="viz-box sample">Sample 1</div>
                    </div>
                    <div>
                        <div class="viz-box pop">Pop 2</div>
                        <div class="viz-arrow">↓</div>
                        <div class="viz-box sample">Sample 2</div>
                    </div>
                </div>
                <div class="viz-arrow">↘ ↙</div>
                <div>Compare \(\mu_1\) and \(\mu_2\)</div>
            </div>
        </div>
      </section>
      
      <!-- NEW End Goal Slide -->
      <section data-menu="goal" data-topic="The Core Question">
          <h2>The Core Question: Is There a Meaningful Difference?</h2>
          <div class="left-align">
              <p>When comparing two groups, we start with the default assumption of "no difference." This is our <strong>null hypothesis</strong>.</p>
              <h3 style="text-align:center; color:var(--brand-primary);">\(H_0: \mu_1 = \mu_2\)</h3>
              <p class="fragment">Our goal as researchers is to collect enough evidence from our two samples to challenge and <strong>reject this null hypothesis</strong>.</p>
              <p class="fragment">If we reject \(H_0\), we can conclude that there is a statistically significant difference between the two population means.</p>
          </div>
      </section>

      <section data-menu="designs" data-topic="Study Designs">
        <h2>Independent vs. Paired Samples</h2>
        <div style="display:flex; gap: 20px; align-items: flex-start;" class="left-align">
            <div class="fragment" style="flex:1; text-align:center;">
                <h3>Independent Samples</h3>
                <p class="small">The individuals in one sample are completely unrelated to the individuals in the other.</p>
                <!-- Visual for Independent -->
                <div style="display:flex; justify-content:space-around; align-items:center; background: var(--bg-secondary); padding: 10px; border-radius:10px;">
                    <div><strong>Group A</strong><br>(e.g., Men)</div>
                    <div style="font-size:1.5em; color:var(--accent-red);">≠</div>
                    <div><strong>Group B</strong><br>(e.g., Women)</div>
                </div>
            </div>
            <div class="fragment" style="flex:1; text-align:center;">
                <h3>Paired Samples</h3>
                <p class="small">Each data point in the first sample is directly matched with a corresponding data point in the second.</p>
                <!-- Visual for Paired -->
                <div style="background: var(--bg-secondary); padding: 10px; border-radius:10px;">
                    <strong>Patient Data</strong><br>
                    <div style="display:flex; justify-content:space-around; align-items:center;">
                        <div>Before Treatment</div>
                        <div style="font-size:1.5em; color:var(--accent-green);">↔</div>
                        <div>After Treatment</div>
                    </div>
                </div>
            </div>
        </div>
        <p class="callout fragment">This is the <strong>most important decision</strong> you'll make, as it determines which test you use!</p>
      </section>
      
      <section data-menu="independent" data-topic="Independent Samples">
        <h2>Independent Samples: Pooled vs. Welch's Test</h2>
        <div class="left-align">
          <p>If your samples are independent, you have one more choice to make, based on the population variances (\(\sigma^2\)).</p>
          <div style="display:flex; gap: 20px; align-items: flex-start;">
              <div class="fragment" style="flex:1; text-align:center;">
                  <h3>Pooled t-test</h3>
                  <p class="small">Use when you can assume the two populations have <strong>equal variances</strong> (\(\sigma_1^2 = \sigma_2^2\)).</p>
                  <!-- Visual for Equal Variances -->
                  <svg viewBox="0 0 200 100" style="width:100%; height:auto;"><path d="M 50 80 C 65 10, 85 10, 100 80" stroke="var(--brand-primary)" stroke-width="2" fill="none"/><path d="M 100 80 C 115 10, 135 10, 150 80" stroke="var(--accent-orange)" stroke-width="2" fill="none"/></svg>
              </div>
              <div class="fragment" style="flex:1; text-align:center;">
                  <h3>Welch's t-test</h3>
                  <p class="small">Use when you <strong>cannot</strong> assume equal variances. This test is generally preferred as it's more robust.</p>
                  <!-- Visual for Unequal Variances -->
                  <svg viewBox="0 0 200 100" style="width:100%; height:auto;"><path d="M 60 80 C 70 30, 80 30, 90 80" stroke="var(--brand-primary)" stroke-width="2" fill="none"/><path d="M 90 80 C 115 10, 135 10, 160 80" stroke="var(--accent-orange)" stroke-width="2" fill="none"/></svg>
              </div>
          </div>
        </div>
      </section>

      <!-- NEW Flowchart Slide -->
      <section data-menu="flowchart" data-topic="Which Procedure?">
        <h2>Flowchart: Choosing the Correct Two-Sample Test</h2>
        <div class="flowchart left-align">
            <div style="text-align:center; padding: 10px; background: var(--brand-primary); color: white; border-radius: 8px;"><strong>START: Are your samples Independent or Paired?</strong></div>
            <div style="display:flex; gap:20px; margin-top:10px;">
                <div style="flex:1;">
                    <div style="text-align:center; font-weight:bold; color:var(--accent-orange);">PAIRED</div>
                    <div class="viz-arrow" style="text-align:center;">↓</div>
                    <div style="border:2px solid var(--accent-orange); padding:10px; border-radius:8px;">
                        <strong>1. Calculate differences \(d_i\) for each pair.</strong><br>
                        <strong>2. Perform a one-sample t-test on the differences.</strong><br>
                        <i>Null Hypothesis: \(H_0: \mu_d = 0\)</i>
                    </div>
                </div>
                <div style="flex:1;">
                    <div style="text-align:center; font-weight:bold; color:var(--brand-primary);">INDEPENDENT</div>
                    <div class="viz-arrow" style="text-align:center;">↓</div>
                    <div style="padding: 10px; background: var(--bg-primary); border-radius: 8px;"><strong>Can you assume population variances are equal (\(\sigma_1^2 = \sigma_2^2\))?</strong></div>
                    <div style="display:flex; gap:10px; margin-top:10px;">
                        <div style="flex:1;">
                            <div style="text-align:center; font-weight:bold; color:var(--accent-green);">YES</div>
                            <div class="viz-arrow" style="text-align:center;">↓</div>
                            <div style="border:2px solid var(--accent-green); padding:10px; border-radius:8px;">
                                <strong>Use Pooled t-test</strong><br>
                                Uses pooled standard deviation \(s_p\) and \(df = n_1+n_2-2\).
                            </div>
                        </div>
                        <div style="flex:1;">
                            <div style="text-align:center; font-weight:bold; color:var(--accent-red);">NO / UNSURE</div>
                            <div class="viz-arrow" style="text-align:center;">↓</div>
                            <div style="border:2px solid var(--accent-red); padding:10px; border-radius:8px;">
                                <strong>Use Welch's t-test</strong><br>
                                Does not assume equal variances. Generally safer and preferred.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </section>

      <section data-menu="calc" data-topic="Two-Sample Calculator">
        <h2>Interactive: Two-Sample Mean Inference</h2>
        <p class="small">Choose your design and enter summary statistics to get the test results.</p>
        <div class="interactive-tool" id="twosamp-tool">
          <div class="tool-controls">
            <label>Design
              <select id="design">
                <option value="pooled" selected>Independent — Equal σ (Pooled)</option>
                <option value="welch">Independent — Unequal σ (Welch)</option>
                <option value="paired">Paired — t</option>
              </select>
            </label>
            <label>α
              <select id="alpha">
                <option value="0.10">0.10</option>
                <option value="0.05" selected>0.05</option>
                <option value="0.01">0.01</option>
              </select>
            </label>
            <label>Alternative
              <select id="alt">
                <option value="two" selected>Two-sided (≠)</option>
                <option value="greater">Right-tailed (>)</option>
                <option value="less">Left-tailed (<)</option>
              </select>
            </label>
            <label>\(\bar x_1\) <input type="number" id="x1" value="12.3" step="0.01"></label>
            <label>\(s_1\) <input type="number" id="s1" value="2.1" step="0.01"></label>
            <label>\(n_1\) <input type="number" id="n1" value="25" min="2" step="1"></label>
            <label>\(\bar x_2\) <input type="number" id="x2" value="11.5" step="0.01"></label>
            <label>\(s_2\) <input type="number" id="s2" value="2.4" step="0.01"></label>
            <label>\(n_2\) <input type="number" id="n2" value="22" min="2" step="1"></label>
            <label id="paired-dbar" style="display:none;">\(\bar d\) <input type="number" id="dbar" value="0.8" step="0.01"></label>
            <label id="paired-sd" style="display:none;">\(s_d\) <input type="number" id="sd" value="1.9" step="0.01"></label>
            <label id="paired-n" style="display:none;">\(n\) <input type="number" id="nd" value="20" min="2" step="1"></label>
            <button class="primary" id="go">Compute</button>
          </div>
          <div class="tool-output left-align small" id="twosamp-output">Fill values and click Compute.</div>
        </div>
      </section>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js-menu/2.1.0/menu.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
  <script>
    window.MathJax = { tex: { inlineMath: [['\\(', '\\)']], displayMath: [['\\[', '\\]']] } };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <script>
    const deck = new Reveal({ hash:true, slideNumber:'c/t', navigationMode:'default', transition:'fade', width:1280, height:720, margin:0.04, plugins:[RevealMenu] });
    deck.initialize();

    // --- FIX: All custom logic moved inside the 'ready' event listener ---
    deck.on('ready', () => {
      // --- Setup Functions ---
      function setupThemeToggle(){
        const btn = document.getElementById('theme-toggle');
        if (!btn) return;
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
        let theme = localStorage.getItem('slides-theme') || (prefersDark.matches ? 'dark' : 'light');
        document.body.setAttribute('data-theme', theme);
        btn.addEventListener('click', () => {
          theme = (document.body.getAttribute('data-theme') === 'dark') ? 'light' : 'dark';
          document.body.setAttribute('data-theme', theme);
          localStorage.setItem('slides-theme', theme);
        });
      }

      function updateHeaderTopic(){
        const el = document.getElementById('topic-slot');
        if (el) el.textContent = deck.getCurrentSlide()?.dataset?.topic || 'Two-Sample Inference';
      }

      // --- Calculator Logic ---
      function twosampleCalc(){
        const design = document.getElementById('design').value;
        const alpha = parseFloat(document.getElementById('alpha').value);
        const alt = document.getElementById('alt').value;
        const out = document.getElementById('twosamp-output');

        function tailPvalue_t(t, df){
          if(alt === 'two') return 2*(1 - jStat.studentt.cdf(Math.abs(t), df));
          if(alt === 'greater') return 1 - jStat.studentt.cdf(t, df);
          return jStat.studentt.cdf(t, df);
        }

        if(design === 'paired'){
          const dbar = parseFloat(document.getElementById('dbar').value);
          const sd = parseFloat(document.getElementById('sd').value);
          const n = parseInt(document.getElementById('nd').value,10);
          const se = sd / Math.sqrt(n);
          const t = (dbar - 0) / se;
          const df = n - 1;
          const p = tailPvalue_t(t, df);
          const crit = jStat.studentt.inv(1 - alpha/2, df);
          const moe = crit * se, lo = dbar - moe, hi = dbar + moe;
          const decide = (p <= alpha) ? '<strong>Reject H₀</strong>' : 'Fail to reject H₀';
          out.innerHTML = `<p><strong>Paired t-test</strong> (df=${df}) | t = ${t.toFixed(3)} | p-value = ${p.toFixed(4)}</p><p>${(1-alpha)*100}% CI for μ<sub>d</sub>: [${lo.toFixed(3)}, ${hi.toFixed(3)}] | Decision (α=${alpha}): ${decide}</p>`;
          return;
        }

        const x1 = parseFloat(document.getElementById('x1').value);
        const s1 = parseFloat(document.getElementById('s1').value);
        const n1 = parseInt(document.getElementById('n1').value,10);
        const x2 = parseFloat(document.getElementById('x2').value);
        const s2 = parseFloat(document.getElementById('s2').value);
        const n2 = parseInt(document.getElementById('n2').value,10);
        const diff = x1 - x2;

        if(design === 'pooled'){
          const sp_sq = ((n1-1)*s1*s1 + (n2-1)*s2*s2)/(n1+n2-2);
          const sp = Math.sqrt(sp_sq);
          const se = sp * Math.sqrt(1/n1 + 1/n2);
          const t = diff / se;
          const df = n1 + n2 - 2;
          const p = tailPvalue_t(t, df);
          const crit = jStat.studentt.inv(1 - alpha/2, df);
          const moe = crit * se, lo = diff - moe, hi = diff + moe;
          const decide = (p <= alpha) ? '<strong>Reject H₀</strong>' : 'Fail to reject H₀';
          out.innerHTML = `<p><strong>Pooled t-test</strong> (df=${df}) | s<sub>p</sub>=${sp.toFixed(3)} | t = ${t.toFixed(3)} | p-value = ${p.toFixed(4)}</p><p>${(1-alpha)*100}% CI for μ₁−μ₂: [${lo.toFixed(3)}, ${hi.toFixed(3)}] | Decision (α=${alpha}): ${decide}</p>`;
        } else { // Welch
          const se2 = s1*s1/n1 + s2*s2/n2;
          const se = Math.sqrt(se2);
          const t = diff / se;
          const num = se2*se2;
          const denom = ( (s1*s1/n1)**2 )/(n1-1) + ( (s2*s2/n2)**2 )/(n2-1);
          const df = num/denom;
          const p = tailPvalue_t(t, df);
          const crit = jStat.studentt.inv(1 - alpha/2, df);
          const moe = crit * se, lo = diff - moe, hi = diff + moe;
          const decide = (p <= alpha) ? '<strong>Reject H₀</strong>' : 'Fail to reject H₀';
          out.innerHTML = `<p><strong>Welch's t-test</strong> (df≈${df.toFixed(2)}) | t = ${t.toFixed(3)} | p-value = ${p.toFixed(4)}</p><p>${(1-alpha)*100}% CI for μ₁−μ₂: [${lo.toFixed(3)}, ${hi.toFixed(3)}] | Decision (α=${alpha}): ${decide}</p>`;
        }
      }

      function toggleBlocks(){
        const design = document.getElementById('design').value;
        const showPaired = (design === 'paired');
        // FIX: Corrected typo from 'paired-xbar' to 'paired-dbar'
        ['paired-dbar','paired-sd','paired-n'].forEach(id => {
          document.getElementById(id).style.display = showPaired ? 'flex' : 'none';
        });
        ['x1','s1','n1','x2','s2','n2'].forEach(id => {
          document.getElementById(id).closest('label').style.display = showPaired ? 'none' : 'flex';
        });
      }

      // --- Initial Calls & Event Listeners ---
      setupThemeToggle();
      updateHeaderTopic();
      deck.on('slidechanged', () => updateHeaderTopic());

      const designSelect = document.getElementById('design');
      const goButton = document.getElementById('go');

      if (designSelect && goButton) {
        designSelect.addEventListener('change', toggleBlocks);
        goButton.addEventListener('click', twosampleCalc);
        toggleBlocks(); // Initial call to set visibility
        twosampleCalc(); // Initial call to populate results
      }
    });
  </script>
</body>
</html>

