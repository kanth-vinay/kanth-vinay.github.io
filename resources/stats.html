<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Chapter 10 — Inferences for Two Population Means — Prof. Kodipelly</title>

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet"/>

<!-- Reveal.js Core -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/theme/white.min.css" id="theme-link"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js-menu@2.1.0/menu.css"/>

<style>
:root {
  --brand-primary: #00539C; --brand-secondary: #00325C;
  --accent-green: #2E7D32; --accent-orange: #EF6C00; --accent-red: #C62828;
  --bg-primary: #FFFFFF; --bg-secondary: #F5F7FF;
  --text-primary: #111827; --text-secondary: #4B5563;
  --border: #D1D5DB; --shadow: 0 10px 20px rgba(0,0,0,.08);
}
[data-theme="dark"] {
  --brand-primary: #8BB8E8; --brand-secondary: #5A91C5;
  --accent-green: #81C784; --accent-orange: #FFB74D; --accent-red: #EF9A9A;
  --bg-primary: #0F172A; --bg-secondary: #111827;
  --text-primary: #E5E7EB; --text-secondary: #94A3B8;
  --border: #334155;
}
html, body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
  transition: background-color 0.3s ease, color 0.3s ease;
}
.reveal { font-size: 26px; }
.reveal h1, .reveal h2, .reveal h3 { font-family: 'Poppins', sans-serif; }
.reveal h2 { color: var(--brand-secondary); }
.reveal p, .reveal li, .reveal ol { font-family: 'Inter', sans-serif; line-height: 1.55; }
.small { font-size: 0.85em; color: var(--text-secondary); }
.muted { color: var(--text-secondary); }
.left { max-width: 1100px; margin: 0 auto; text-align: left; }
.centered { display: flex; justify-content: center; align-items: center; gap: 18px; flex-wrap: wrap; }
.kbd { border: 1px solid var(--border); border-radius: 6px; padding: 2px 8px; font: 12px ui-monospace, Menlo, monospace; }
.pill { display: inline-block; border: 1px solid var(--border); border-radius: 999px; padding: 4px 10px; background: var(--bg-secondary); }
.box { border: 1px solid var(--border); border-radius: 12px; background: var(--bg-secondary); padding: 14px 16px; }
.callout { border-left: 6px solid var(--accent-orange); background: var(--bg-secondary); padding: 16px 18px; border-radius: 10px; }
.callout.success { border-left-color: var(--accent-green); }
.callout.warn { border-left-color: var(--accent-orange); }
.callout.danger { border-left-color: var(--accent-red); }
.grid { display: grid; gap: 14px; }
.grid.cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
.grid.cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
.card { border: 1px solid var(--border); border-radius: 12px; padding: 14px 16px; background: var(--bg-primary); box-shadow: var(--shadow); }
.badge { font-size: 0.75em; border: 1px solid var(--border); padding: 2px 8px; border-radius: 999px; }
hr.sep { border: 0; border-top: 1px dashed var(--border); margin: 14px 0; }
svg { max-width: 100%; }
.btn { border: 1px solid var(--border); background: var(--bg-primary); padding: 8px 12px; border-radius: 10px; cursor: pointer; transition: box-shadow 0.2s ease, background-color 0.2s ease; }
.btn:hover { box-shadow: 0 4px 10px rgba(0,0,0,.08); }
.btn.active { background-color: var(--brand-primary); color: #fff; border-color: var(--brand-primary); }
.toggle-group { display: flex; gap: 8px; flex-wrap: wrap; }
#page-header, #page-footer {
  position: fixed; left: 0; right: 0; z-index: 20;
  background: var(--brand-primary); color: #fff;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 18px; font-family: 'Poppins', sans-serif;
}
#page-header { top: 0; height: 64px; }
#page-footer { bottom: 0; height: 44px; font-size: .9em; }
.theme-toggle { background: none; border: 1px solid #ffffff44; color: #fff; border-radius: 999px; padding: 6px 10px; cursor: pointer; }
.topic { opacity: .95; }
code, pre { font-family: ui-monospace, Menlo, monospace; }
</style>
</head>

<body>

<header id="page-header" aria-label="Header">
  <div><strong>Prof. Vinay Kanth Rao Kodipelly</strong> <span class="badge">UMSL • ActiveSTEM</span></div>
  <div class="topic" id="topic-slot">Two-Sample Inference</div>
  <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark/light theme">Theme</button>
</header>

<footer id="page-footer" aria-label="Footer">
  <div>←/→ • <span class="kbd">F</span> Fullscreen • <span class="kbd">S</span> Overview • <span class="kbd">M</span> Menu</div>
  <div>Chapter 10</div>
</footer>

<div class="reveal">
<div class="slides">

<!-- TITLE -->
<section data-state="title">
  <h2>Inferences for Two Population Means</h2>
  <h3 class="muted">Independent vs. Paired Samples • Pooled vs. Welch t-tests</h3>
  <div class="centered" style="margin-top:20px;">
    <span class="pill">Hypothesis Testing</span>
    <span class="pill">Confidence Intervals</span>
    <span class="pill">Assumptions & Conditions</span>
    <span class="pill">Nonparametric Alternatives</span>
  </div>
</section>

<!-- ROADMAP -->
<section>
  <h2>Roadmap for Today</h2>
  <div class="grid cols-2 left">
    <div class="card">
      <h3>1. Study Design & Distributions</h3>
      <ul>
        <li>Independent vs. Paired Samples</li>
        <li>Sampling Distribution of \( \bar{X}_1 - \bar{X}_2 \)</li>
        <li>Key Assumptions & Conditions</li>
      </ul>
    </div>
    <div class="card">
      <h3>2. Core Procedures</h3>
      <ul>
        <li>Pooled t-test (assuming \( \sigma_1 = \sigma_2 \))</li>
        <li>Welch's t-test (general case)</li>
        <li>Paired t-test (for matched data)</li>
        <li>Nonparametric Backups</li>
      </ul>
    </div>
    <div class="card">
      <h3>3. Hypotheses & Interpretation</h3>
      <ul>
        <li>Left, Right, and Two-tailed Tests</li>
        <li>p-values & Critical Regions</li>
        <li>Confidence Intervals for the Difference</li>
      </ul>
    </div>
    <div class="card">
      <h3>4. Worked Example (Live)</h3>
      <ul>
        <li>State Hypotheses & Check Assumptions</li>
        <li>Calculate the Test Statistic & p-value</li>
        <li>Construct a CI & Interpret in Context</li>
      </ul>
    </div>
  </div>
</section>

<!-- DESIGN -->
<section>
  <h2>Start with the Study Design</h2>
  <div class="grid cols-2 left">
    <div class="box">
      <h3>Independent Samples</h3>
      <p>Two distinct, unrelated groups are compared. The observations in one group do not influence the observations in the other.</p>
      <div class="centered" aria-hidden="true">
        <svg viewBox="0 0 480 120" style="margin-top: 10px;">
          <defs>
            <linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="var(--brand-primary)" stop-opacity=".15"/><stop offset="1" stop-color="var(--brand-primary)" stop-opacity=".35"/></linearGradient>
            <linearGradient id="g2" x1="0" x2="1"><stop offset="0" stop-color="var(--accent-orange)" stop-opacity=".15"/><stop offset="1" stop-color="var(--accent-orange)" stop-opacity=".35"/></linearGradient>
          </defs>
          <rect x="30" y="20" width="180" height="80" rx="10" fill="url(#g1)" stroke="var(--brand-primary)"/>
          <rect x="270" y="20" width="180" height="80" rx="10" fill="url(#g2)" stroke="var(--accent-orange)"/>
          <text x="120" y="50" font-size="16" text-anchor="middle" fill="currentColor">Group 1</text>
          <text x="360" y="50" font-size="16" text-anchor="middle" fill="currentColor">Group 2</text>
          <text x="120" y="85" font-size="14" text-anchor="middle" fill="currentColor">\(n_1, \bar{x}_1, s_1\)</text>
          <text x="360" y="85" font-size="14" text-anchor="middle" fill="currentColor">\(n_2, \bar{x}_2, s_2\)</text>
        </svg>
      </div>
    </div>
    <div class="box">
      <h3>Paired (Matched) Samples</h3>
      <p>Each observation in sample 1 is naturally linked with an observation in sample 2 (e.g., before/after, twins, etc.).</p>
      <div aria-hidden="true" style="margin-top: 10px;">
        <svg viewBox="0 0 520 160">
          <rect x="40" y="24" width="190" height="38" rx="8" fill="none" stroke="var(--brand-primary)"/><text x="135" y="48" text-anchor="middle" font-size="14" fill="currentColor">Subject 1 (Before)</text>
          <rect x="290" y="24" width="190" height="38" rx="8" fill="none" stroke="var(--accent-green)"/><text x="385" y="48" text-anchor="middle" font-size="14" fill="currentColor">Subject 1 (After)</text>
          <path d="M 230 43 L 290 43" stroke="var(--text-secondary)" stroke-width="2" stroke-dasharray="4 4" />
          <rect x="40" y="78" width="190" height="38" rx="8" fill="none" stroke="var(--brand-primary)"/><text x="135" y="102" text-anchor="middle" font-size="14" fill="currentColor">Subject 2 (Before)</text>
          <rect x="290" y="78" width="190" height="38" rx="8" fill="none" stroke="var(--accent-green)"/><text x="385" y="102" text-anchor="middle" font-size="14" fill="currentColor">Subject 2 (After)</text>
          <path d="M 230 97 L 290 97" stroke="var(--text-secondary)" stroke-width="2" stroke-dasharray="4 4" />
          <text x="260" y="145" text-anchor="middle" font-size="14" fill="currentColor">Analyze the differences \(d_i\) → One-sample t-test on \(\bar{d}\)</text>
        </svg>
      </div>
    </div>
  </div>
</section>

<!-- SAMPLING DISTRIBUTION -->
<section>
  <h2>Sampling Distribution of \( \bar{X}_1 - \bar{X}_2 \)</h2>
  <div class="left">
    <ul>
      <li><strong>Independence:</strong> Samples must be independent of each other. Observations within each sample should also be independent (e.g., from SRS or randomized experiment).</li>
      <li><strong>Normality/Large Sample:</strong> Both populations are normally distributed, OR both sample sizes \(n_1, n_2\) are large enough for the Central Limit Theorem to apply (e.g., \(n_1, n_2 \ge 30\)).</li>
    </ul>
    <p>Under these conditions, the sampling distribution of \( \bar{X}_1 - \bar{X}_2 \) is approximately normal with:</p>
    <ul>
      <li>Mean: \( \mathbb{E}(\bar{X}_1 - \bar{X}_2) = \mu_1 - \mu_2 \)</li>
      <li>Standard Error: \( \mathrm{SE} = \sqrt{\frac{\sigma_1^2}{n_1} + \frac{\sigma_2^2}{n_2}} \)</li>
    </ul>
    <div class="callout success">Since population standard deviations \(\sigma_1, \sigma_2\) are unknown, we estimate the SE using sample standard deviations \(s_1, s_2\). This leads us to use the t-distribution.</div>
  </div>
</section>

<!-- HYPOTHESES & TAILS (INTERACTIVE) -->
<section>
  <h2>Left, Right, or Two-Tailed Test?</h2>
  <div class="left">
    <div class="toggle-group" style="margin-bottom:10px" role="group" aria-label="Select test type">
      <button class="btn" data-tail="two" role="button">Two-tailed</button>
      <button class="btn" data-tail="left" role="button">Left-tailed</button>
      <button class="btn" data-tail="right" role="button">Right-tailed</button>
    </div>
    <div class="grid cols-2">
      <div class="card">
        <h3 id="hypo-title"></h3>
        <div id="hypo-body" class="small" aria-live="polite"></div>
        <hr class="sep"/>
        <div id="hypo-rule" class="small"></div>
      </div>
      <div class="card" aria-hidden="true">
        <svg id="tail-plot" viewBox="0 0 520 220" aria-label="t-distribution with rejection region shading">
          <line x1="20" y1="180" x2="500" y2="180" stroke="var(--text-secondary)" stroke-width="1"/>
          <text x="260" y="205" text-anchor="middle" font-size="12" fill="currentColor">Test Statistic (t)</text>
          <path id="curve" d="M 30 180 C 120 10, 400 10, 490 180" fill="none" stroke="var(--brand-primary)" stroke-width="3" />
          <path id="shade-left" fill="var(--accent-red)" fill-opacity=".3" stroke="none" style="display: none;"/>
          <path id="shade-right" fill="var(--accent-red)" fill-opacity=".3" stroke="none" style="display: none;"/>
          <line id="crit-left" y1="180" y2="45" stroke="var(--accent-red)" stroke-dasharray="4 4" style="display: none;"/>
          <line id="crit-right" y1="180" y2="45" stroke="var(--accent-red)" stroke-dasharray="4 4" style="display: none;"/>
          <text id="crit-left-label" y="198" font-size="12" text-anchor="middle" fill="currentColor" style="display: none;">\(-t_{\alpha/2}\)</text>
          <text id="crit-right-label" y="198" font-size="12" text-anchor="middle" fill="currentColor" style="display: none;">\(t_{\alpha/2}\)</text>
        </svg>
        <p class="small" id="tail-caption" style="text-align:center; margin-top: -5px;"></p>
      </div>
    </div>
  </div>
</section>

<!-- PROCEDURES: INDEPENDENT (WELCH) -->
<section>
  <h2>Independent Samples: Welch's t-test (Unequal Variances)</h2>
  <div class="grid cols-2 left">
    <div class="card">
      <p>This is the <strong>default and recommended</strong> approach when comparing two independent means, as it does not assume \( \sigma_1 = \sigma_2 \).</p>
      <p>Test Statistic:
        \[ t = \frac{(\bar{x}_1 - \bar{x}_2) - (\mu_1 - \mu_2)_0}{\sqrt{\frac{s_1^2}{n_1} + \frac{s_2^2}{n_2}}} \]
      </p>
      <p class="small">Degrees of Freedom (Welch-Satterthwaite):
        \[ \mathrm{df} \approx \frac{\left( \frac{s_1^2}{n_1} + \frac{s_2^2}{n_2} \right)^2}{\frac{(s_1^2/n_1)^2}{n_1-1} + \frac{(s_2^2/n_2)^2}{n_2-1}} \]
      </p>
    </div>
    <div class="card">
      <h3>Why Prefer Welch's Test?</h3>
      <ul>
        <li><strong>Robustness:</strong> It provides accurate Type I error control even when population variances are different.</li>
        <li><strong>No Preliminary Test Needed:</strong> Avoids the problematic practice of first testing for equality of variances.</li>
        <li><strong>Power:</strong> Performs nearly as well as the pooled t-test even when variances are equal.</li>
      </ul>
      <div class="callout success">Modern statistical practice favors Welch's t-test as the standard for two-sample comparisons.</div>
    </div>
  </div>
</section>

<!-- PROCEDURES: INDEPENDENT (POOLED) -->
<section>
  <h2>Independent Samples: Pooled t-test (Equal Variances)</h2>
  <div class="grid cols-2 left">
    <div class="card">
      <p class="pill warn">Assumption: Population standard deviations are equal (\( \sigma_1 = \sigma_2 \)).</p>
      <p>We "pool" sample variances to get a better estimate of the common variance \( \sigma^2 \).</p>
      <p>Pooled Standard Deviation:
        \[ s_p = \sqrt{\frac{(n_1-1)s_1^2 + (n_2-1)s_2^2}{n_1+n_2-2}} \]
      </p>
      <p>Test Statistic:
        \[ t = \frac{(\bar{x}_1 - \bar{x}_2) - (\mu_1 - \mu_2)_0}{s_p \sqrt{\frac{1}{n_1} + \frac{1}{n_2}}} \]
      </p>
      <p class="small">Degrees of Freedom: \( \mathrm{df} = n_1 + n_2 - 2 \)</p>
    </div>
    <div class="card">
      <h3>When Might You Use This?</h3>
      <ul>
        <li>Strong theoretical reason or prior evidence suggests variances are equal.</li>
        <li>Often taught for historical/foundational reasons.</li>
        <li>Can offer slightly more power if the equal variance assumption holds perfectly.</li>
      </ul>
      <div class="callout danger">If the equal variance assumption is violated, the pooled t-test can lead to inaccurate p-values and confidence intervals. When in doubt, use Welch's test.</div>
    </div>
  </div>
</section>

<!-- PROCEDURES: PAIRED -->
<section>
  <h2>Paired Samples t-test</h2>
  <div class="grid cols-2 left">
    <div class="card">
      <p>The problem is simplified by focusing on the <strong>differences</strong>, \(d_i = x_{i, \text{after}} - x_{i, \text{before}}\).</p>
      <p>This reduces the two-sample problem to a <strong>one-sample t-test</strong> on the differences.</p>
      <p>Test Statistic:
        \[ t = \frac{\bar{d} - (\mu_d)_0}{s_d / \sqrt{n}} \]
      </p>
      <p class="small">Degrees of Freedom: \( \mathrm{df} = n - 1 \), where \(n\) is the number of pairs.</p>
    </div>
    <div class="card">
      <h3>Advantages of Pairing</h3>
      <ul>
        <li><strong>Controls for Confounding:</strong> It isolates the effect of the treatment by controlling for individual-to-individual variability.</li>
        <li><strong>Increased Power:</strong> Often more powerful than independent designs because it reduces extraneous sources of variation.</li>
        <li><strong>Direct Interpretation:</strong> The parameter of interest, \( \mu_d \), is the average change or difference.</li>
      </ul>
    </div>
  </div>
</section>

<!-- NONPARAMETRIC -->
<section>
  <h2>Nonparametric Alternatives</h2>
  <div class="left callout">Use these rank-based tests when the normality assumption is clearly violated, especially with small sample sizes, or when dealing with ordinal data.</div>
  <div class="grid cols-2 left" style="margin-top: 15px;">
    <div class="card">
      <h3>Mann-Whitney U Test<br>(Wilcoxon Rank-Sum)</h3>
      <ul>
        <li>Alternative to the <strong>independent samples t-test</strong>.</li>
        <li>Tests if the two distributions have the same location.</li>
        <li>Combines all data, ranks them, and compares the sum of ranks for each group.</li>
        <li>More robust to outliers than t-tests.</li>
      </ul>
    </div>
    <div class="card">
      <h3>Wilcoxon Signed-Rank Test</h3>
      <ul>
        <li>Alternative to the <strong>paired t-test</strong>.</li>
        <li>Calculates differences, ranks their absolute values, and sums ranks based on original sign.</li>
        <li>Tests if the distribution of differences is centered at zero.</li>
        <li>Requires the distribution of differences to be symmetric.</li>
      </ul>
    </div>
  </div>
</section>

<!-- WORKED EXAMPLE -->
<section>
  <h2>Worked Example: Comparing Two Curricula</h2>
  <div class="left">
    <p><strong>Context:</strong> We want to compare the mean final exam scores of students taught with two different curricula. We test \(H_0: \mu_1 = \mu_2\) against \(H_a: \mu_1 \neq \mu_2\) at \(\alpha=0.05\).</p>
    <div class="grid cols-2">
      <div class="card">
        <strong>Data Summary:</strong><br/>
        <u>Curriculum 1:</u> \(n_1=18, \bar{x}_1=78.5, s_1=9.6\)<br/>
        <u>Curriculum 2:</u> \(n_2=22, \bar{x}_2=84.2, s_2=12.1\)<br/>
        <hr class="sep"/>
        <strong>Assumptions:</strong><br/>
        Assume independent random samples. Since \(s_1\) and \(s_2\) are different and we have no reason to assume equal variances, we will use <strong>Welch's t-test</strong>.
      </div>
      <div class="card">
        <strong>Calculations:</strong>
        <p>1. Test Statistic:</p>
        \[ t = \frac{78.5 - 84.2}{\sqrt{\frac{9.6^2}{18} + \frac{12.1^2}{22}}} = \frac{-5.7}{\sqrt{5.12 + 6.655}} = \frac{-5.7}{\sqrt{11.775}} \approx \mathbf{-1.66} \]
        <p class="small" style="margin-top: 10px;">2. Degrees of Freedom (Welch-Satterthwaite):</p>
        \[ \mathrm{df} \approx \frac{(11.775)^2}{\frac{(5.12)^2}{17} + \frac{(6.655)^2}{21}} = \frac{138.65}{1.539 + 2.108} \approx \mathbf{37.9} \]
      </div>
    </div>
    <div class="callout success" style="margin-top: 15px;">
      <strong>Conclusion:</strong> With \(t \approx -1.66\) and \(\mathrm{df} \approx 37.9\), the two-tailed p-value is approximately \(0.105\). Since \(p > 0.05\), we <strong>fail to reject \(H_0\)</strong>. There is not sufficient evidence to conclude a significant difference in mean exam scores between the two curricula.
      A 95% CI for \( \mu_1 - \mu_2 \) is \( -5.7 \pm 2.024 \times 3.43 \), which is \((-12.6, 1.2)\). Since 0 is in the interval, this confirms our conclusion.
    </div>
  </div>
</section>

<!-- QUICK MICRO-CHECK -->
<section>
  <h2>Quick Check: Which Test?</h2>
  <div class="grid cols-3 left">
    <div class="card fragment">
      <strong>Scenario A:</strong> Comparing blood pressure in the same 30 patients before and after taking a new medication.
      <hr class="sep"/>
      <p class="small"><strong>Answer:</strong> Paired t-test (or Wilcoxon Signed-Rank if data is very skewed).</p>
    </div>
    <div class="card fragment">
      <strong>Scenario B:</strong> Comparing GPAs of 50 freshmen and 45 seniors. The sample standard deviations are quite different.
      <hr class="sep"/>
      <p class="small"><strong>Answer:</strong> Welch's two-sample t-test is the most appropriate and robust choice.</p>
    </div>
    <div class="card fragment">
      <strong>Scenario C:</strong> Comparing customer satisfaction ratings (on a scale of 1-5) between two store locations.
      <hr class="sep"/>
      <p class="small"><strong>Answer:</strong> Mann-Whitney U test, as the data are ordinal, not continuous.</p>
    </div>
  </div>
</section>


<!-- REPORTING -->
<section>
  <h2>Reporting Your Results</h2>
  <div class="left grid cols-2">
    <div class="card">
      <p>A complete report should include:</p>
      <ol>
        <li>The type of test used and the variables being compared.</li>
        <li>A statement on whether assumptions were met.</li>
        <li>The test statistic, degrees of freedom, and p-value.</li>
        <li>The confidence interval for the mean difference.</li>
        <li>A clear conclusion in the context of the problem.</li>
      </ol>
    </div>
    <div class="card">
      <strong>Example Conclusion:</strong>
      <p class="small">
        "A Welch two-sample t-test was conducted to compare final exam scores for Curriculum 1 (\(M=78.5, SD=9.6\)) and Curriculum 2 (\(M=84.2, SD=12.1\)). No significant difference was found between the mean scores of the two curricula, \(t(37.9) = -1.66, p = .105\). The 95% confidence interval for the mean difference, \([-12.6, 1.2]\), includes zero, supporting the null hypothesis."
      </p>
    </div>
  </div>
</section>

</div>
</div>

<!-- MathJax (place config BEFORE script load) -->
<script>
window.MathJax = {
  tex: {
    inlineMath: [['\\(','\\)']],
    displayMath: [['\\[','\\]']],
    processEscapes: true
  },
  svg: { fontCache: 'global' }
};
</script>
<script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<!-- Reveal.js + Menu Plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js-menu@2.1.0/menu.js"></script>

<script>
// --- Initialize Reveal.js ---
const deck = new Reveal({
  hash: true,
  slideNumber: 'c/t',
  transition: 'fade',
  width: 1280,
  height: 720,
  margin: 0.05,
  controls: true,
  progress: true,
  plugins: [RevealMenu]
});
deck.initialize();

// --- Theme Toggle Functionality ---
(function() {
  const btn = document.getElementById('theme-toggle');
  if (!btn) return;
  
  let theme = localStorage.getItem('slides-theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
  document.body.setAttribute('data-theme', theme);

  btn.addEventListener('click', () => {
    theme = (theme === 'dark' ? 'light' : 'dark');
    document.body.setAttribute('data-theme', theme);
    localStorage.setItem('slides-theme', theme);
  });
})();

// --- Update Header Topic with Slide Title ---
(function() {
  const topicEl = document.getElementById('topic-slot');
  if (!topicEl) return;
  
  const updateTopic = () => {
    const slide = deck.getCurrentSlide();
    const h2 = slide ? slide.querySelector('h2') : null;
    topicEl.textContent = (h2 && h2.textContent.trim()) || 'Two-Sample Inference';
  };
  
  deck.on('ready', updateTopic);
  deck.on('slidechanged', updateTopic);
})();

// --- Interactive Hypothesis Tails Visualization ---
(function() {
  // Check if all required elements exist
  const container = document.querySelector('[data-tail="two"]')?.closest('.left');
  if (!container) return;

  const title = container.querySelector('#hypo-title');
  const body = container.querySelector('#hypo-body');
  const rule = container.querySelector('#hypo-rule');
  const caption = container.querySelector('#tail-caption');
  
  const plot = container.querySelector('#tail-plot');
  const shadeLeft = plot?.querySelector('#shade-left');
  const shadeRight = plot?.querySelector('#shade-right');
  const critLeft = plot?.querySelector('#crit-left');
  const critRight = plot?.querySelector('#crit-right');
  const critLeftLabel = plot?.querySelector('#crit-left-label');
  const critRightLabel = plot?.querySelector('#crit-right-label');
  const buttons = container.querySelectorAll('.toggle-group .btn');
  
  if (!title || !body || !rule || !caption || !plot || buttons.length === 0) return;

  const typeset = (el) => {
    if (window.MathJax && MathJax.typesetPromise) {
      MathJax.typesetPromise([el]);
    }
  };
  
  // A more accurate path for area under the t-distribution curve
  const leftPath = "M 30 180 C 50 140, 70 50, 110 45 L 110 180 Z";
  const rightPath = "M 490 180 C 470 140, 450 50, 410 45 L 410 180 Z";
  
  shadeLeft.setAttribute('d', leftPath);
  shadeRight.setAttribute('d', rightPath);

  const setMode = (mode) => {
    const t_crit_two = "t_{\\alpha/2}";
    const t_crit_one = "t_{\\alpha}";

    let config = {};
    if (mode === 'two') {
      config = {
        title: "Two-Tailed Test",
        body: "\\( H_0: \\mu_1 = \mu_2 \\)<br>\\( H_a: \\mu_1 \\neq \\mu_2 \\)",
        rule: "<strong>Decision Rule:</strong> Reject \\(H_0\\) if \\( |t| \\ge " + t_crit_two + " \\) or if \\( p \\le \\alpha \\).",
        caption: "Rejection region is in both tails.",
        showLeft: true,
        showRight: true,
        leftCritX: 110,
        rightCritX: 410,
        leftLabel: "\\(-" + t_crit_two + "\\)",
        rightLabel: "\\(+" + t_crit_two + "\\)",
      };
    } else if (mode === 'left') {
      config = {
        title: "Left-Tailed Test",
        body: "\\( H_0: \\mu_1 \\ge \\mu_2 \\)<br>\\( H_a: \\mu_1 < \\mu_2 \\)",
        rule: "<strong>Decision Rule:</strong> Reject \\(H_0\\) if \\( t \\le -" + t_crit_one + " \\) or if \\( p \\le \\alpha \\).",
        caption: "Rejection region is in the lower tail.",
        showLeft: true,
        showRight: false,
        leftCritX: 110,
        leftLabel: "\\(-" + t_crit_one + "\\)",
      };
    } else { // 'right'
      config = {
        title: "Right-Tailed Test",
        body: "\\( H_0: \\mu_1 \\le \\mu_2 \\)<br>\\( H_a: \\mu_1 > \\mu_2 \\)",
        rule: "<strong>Decision Rule:</strong> Reject \\(H_0\\) if \\( t \\ge " + t_crit_one + " \\) or if \\( p \\le \\alpha \\).",
        caption: "Rejection region is in the upper tail.",
        showLeft: false,
        showRight: true,
        rightCritX: 410,
        rightLabel: "\\(+" + t_crit_one + "\\)",
      };
    }

    // Update text content
    title.innerHTML = config.title;
    body.innerHTML = config.body;
    rule.innerHTML = config.rule;
    caption.textContent = config.caption;

    // Update plot visibility
    shadeLeft.style.display = config.showLeft ? 'block' : 'none';
    shadeRight.style.display = config.showRight ? 'block' : 'none';
    critLeft.style.display = config.showLeft ? 'block' : 'none';
    critRight.style.display = config.showRight ? 'block' : 'none';
    critLeftLabel.style.display = config.showLeft ? 'block' : 'none';
    critRightLabel.style.display = config.showRight ? 'block' : 'none';

    // Update plot positions and labels
    if (config.showLeft) {
        critLeft.setAttribute('x1', config.leftCritX);
        critLeft.setAttribute('x2', config.leftCritX);
        critLeftLabel.setAttribute('x', config.leftCritX);
        critLeftLabel.innerHTML = config.leftLabel;
    }
    if (config.showRight) {
        critRight.setAttribute('x1', config.rightCritX);
        critRight.setAttribute('x2', config.rightCritX);
        critRightLabel.setAttribute('x', config.rightCritX);
        critRightLabel.innerHTML = config.rightLabel;
    }
    
    // Retypeset math for all updated elements
    typeset(container);
    typeset(critLeftLabel);
    typeset(critRightLabel);
    
    // Update button states
    buttons.forEach(b => {
      b.classList.toggle('active', b.dataset.tail === mode);
      b.setAttribute('aria-pressed', b.dataset.tail === mode);
    });
  };

  buttons.forEach(b => {
    b.addEventListener('click', () => setMode(b.dataset.tail));
  });

  // Set initial state
  setMode('two');
})();
</script>

</body>
</html>
