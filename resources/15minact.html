<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ActiveSTEM â€” Radical & Exponent Master</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Fira+Code:wght@500;700&family=Poppins:wght@700;800&display=swap" rel="stylesheet" />

  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        processEscapes: true
      },
      startup: {
        pageReady: () => {
          return MathJax.startup.defaultPageReady();
        }
      }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css" />
  <script src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>

  <style>
    :root{
      --navy:#1A237E;
      --green:#2E7D32;
      --red:#B42318;
      --bg:#F5F7FF;
      --card:#FFFFFF;
      --text:#243041;
      --border:#E3E7F2;
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:Inter, sans-serif;
      background:var(--bg);
      color:var(--text);
      padding-top:80px;
      padding-bottom:60px;
    }

    /* UI Components */
    .hud{
      position:fixed; top:0; left:0; right:0;
      background:rgba(255,255,255,0.98);
      border-bottom:2px solid rgba(26,35,126,0.1);
      z-index:1000;
      padding:10px 20px;
      display:flex; justify-content:space-between; align-items:center;
    }
    .brand{ font-family:Poppins, sans-serif; font-weight:800; color:var(--navy); font-size:1.2rem; }
    .score-pill{ background:#fff; border:1px solid var(--border); padding:5px 15px; border-radius:20px; font-weight:700; color:var(--navy); }
    
    .wrap{ max-width:900px; margin:0 auto; padding:0 15px; }
    .card{
      background:#fff; border:1px solid var(--border);
      border-radius:12px; padding:25px; margin-bottom:20px;
      box-shadow:0 4px 12px rgba(0,0,0,0.05);
    }
    .h2{ margin-top:0; color:var(--navy); font-family:Poppins, sans-serif; }
    
    /* Visualizer */
    .viz-grid{ display:grid; grid-template-columns:1.5fr 1fr; gap:20px; }
    @media(max-width:700px){ .viz-grid{ grid-template-columns:1fr; } }
    
    .jxgbox{
      width:100%; height:250px; /* Shortened height */
      border-radius:8px; border:1px solid var(--border);
    }

    .controls{ background:#F8FAFC; padding:15px; border-radius:8px; border:1px solid var(--border); }
    input[type=range]{ width:100%; accent-color:var(--navy); cursor:pointer; }
    
    /* Quiz */
    .q-item{ margin-bottom:20px; padding:15px; border:1px solid var(--border); border-radius:8px; background:#fff; }
    .q-txt{ font-weight:700; margin-bottom:10px; color:var(--navy); }
    .opt-grid{ display:grid; grid-template-columns:1fr 1fr; gap:8px; }
    button.opt{
      padding:10px; border:2px solid var(--border); background:#fff; 
      border-radius:6px; cursor:pointer; font-weight:600; text-align:left;
      transition:0.1s;
    }
    button.opt:hover{ background:#F0F4FF; border-color:var(--navy); }
    button.opt.correct{ background:#ECFDF5; border-color:var(--green); color:var(--green); }
    button.opt.wrong{ background:#FEF2F2; border-color:var(--red); color:var(--red); }
    
    .feedback{ margin-top:8px; font-size:0.9rem; font-weight:600; display:none; padding:8px; border-radius:4px; }
  </style>
</head>

<body>

<div class="hud">
  <div class="brand">ActiveSTEM</div>
  <div class="score-pill">XP: <span id="xp">0</span> / 300</div>
</div>

<div class="wrap">
  
  <div class="card">
    <h2 class="h2">1. The Root Estimator</h2>
    <p>Drag the <b>Blue Slider</b> to change the target number. <br>Then drag the <b>Red Dot</b> to estimate the square root.</p>
    
    <div class="viz-grid">
      <div id="jxgbox" class="jxgbox"></div>
      
      <div class="controls">
        <label style="font-weight:bold; color:var(--navy);">Target Number: <span id="valDisplay">25</span></label>
        <input type="range" id="slider" min="0" max="100" value="25" step="1" style="margin:10px 0 20px;">
        
        <div style="font-family:'Fira Code', monospace; line-height:1.8;">
          <div id="mathTarget" style="font-size:1.1rem; font-weight:bold;">
            Target: \(\sqrt{25}\)
          </div>
          
          <div>Your Estimate: <span id="userEst" style="color:var(--red); font-weight:bold;">0.00</span></div>
          <div>Actual Value: <span id="actVal" style="color:var(--green); font-weight:bold;">?</span></div>
          <div id="msg" style="margin-top:10px; font-weight:bold; color:#666;">Drag Red Dot to start!</div>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <h2 class="h2">2. Radical Quiz (30 Qs)</h2>
    <div id="quiz-container"></div>
  </div>

</div>

<script>
  // --- 1. SETUP GRAPH ---
  // We remove the grid and Y-axis to make it look like a clean number line
  const board = JXG.JSXGraph.initBoard('jxgbox', {
    boundingbox: [-1, 2, 11, -2], 
    axis: false, // Turn off default axes
    showCopyright: false,
    pan: false, zoom: false
  });

  // Draw just the X-axis
  const axis = board.create('axis', [[0,0], [1,0]], {
    ticks: { drawLabels: true, label: {offset: [-4, -15]} }
  });

  // The User's Probe
  const probe = board.create('point', [1, 0], {
    name: 'Probe', color: 'var(--red)', size: 5, 
    label: { offset:[0,10], color:'var(--red)' },
    snapToGrid: false
  });
  probe.makeGlider(axis);

  // --- 2. LOGIC ---
  const slider = document.getElementById('slider');
  const valDisplay = document.getElementById('valDisplay');
  const mathTarget = document.getElementById('mathTarget');
  const userEst = document.getElementById('userEst');
  const actVal = document.getElementById('actVal');
  const msg = document.getElementById('msg');
  
  let currentTarget = 50;

  function update() {
    currentTarget = parseInt(slider.value);
    valDisplay.innerText = currentTarget;
    
    // Reset output
    actVal.innerText = "?";
    msg.innerText = "Drag Red Dot to estimate!";
    msg.style.color = "#666";
    
    // 1. Update the LaTeX string
    mathTarget.innerHTML = `Target: \\(\\sqrt{${currentTarget}}\\)`;
    
    // 2. FORCE RE-RENDER of MathJax
    if(window.MathJax) {
      MathJax.typesetPromise([mathTarget]).then(() => {
        // Render complete
      });
    }
  }

  function check() {
    let x = probe.X();
    let actual = Math.sqrt(currentTarget);
    userEst.innerText = x.toFixed(2);
    
    let diff = Math.abs(x - actual);
    
    if(diff < 0.15) {
      msg.innerText = "PERFECT! Spot on.";
      msg.style.color = "var(--green)";
      actVal.innerText = actual.toFixed(3);
    } else if(diff < 0.6) {
      msg.innerText = "Close! Keep adjusting.";
      msg.style.color = "var(--navy)";
    } else {
      msg.innerText = "Too far...";
      msg.style.color = "var(--red)";
    }
  }

  slider.addEventListener('input', update);
  probe.on('drag', check);

  // --- 3. QUIZ GENERATION ---
  // (Full 30 Question Data Set)
  const questions = [
    {q: "1. What is \\(\\sqrt{64}\\)?", o:["6","8","16","32"], a:1, h:"8x8=64"},
    {q: "2. Which is a perfect square?", o:["20","24","25","26"], a:2, h:"5x5=25"},
    {q: "3. Evaluate \\(\\sqrt{100} - \\sqrt{36}\\)", o:["4","8","64","10"], a:0, h:"10-6=4"},
    {q: "4. \\(\\sqrt{50}\\) is between?", o:["5 & 6","6 & 7","7 & 8","8 & 9"], a:2, h:"Sqrt(49) is 7"},
    {q: "5. Cube root of 27?", o:["3","9","27","6"], a:0, h:"3x3x3=27"},
    {q: "6. Why is \\(\\sqrt{-9}\\) not real?", o:["9 is odd","Can't square to negative","It is real","Too small"], a:1, h:"Negatives squared are positive"},
    {q: "7. \\(\\sqrt{2}\\) is irrational because:", o:["It ends in 2","It repeats","It never ends or repeats","It's even"], a:2, h:"No pattern"},
    {q: "8. Solve \\(x^2 = 25\\)", o:["5 only","-5 only","5 and -5","25"], a:2, h:"Plus or minus"},
    {q: "9. As x gets bigger, \\(\\sqrt{x}\\)...", o:["Gets smaller","Stays same","Gets bigger","Becomes 0"], a:2, h:"Graph goes up"},
    {q: "10. Simplify \\(\\sqrt{9/16}\\)", o:["3/4","9/4","3/16","4.5/8"], a:0, h:"Sqrt top and bottom"},
    {q: "11. Simplify \\(\\sqrt{1/4}\\)", o:["0.25","0.5","1","2"], a:1, h:"Sqrt(1)/Sqrt(4)"},
    {q: "12. \\(\\sqrt{100/25}\\) equals?", o:["2","4","5","10"], a:0, h:"4 is inside root"},
    {q: "13. Simplify \\(\\sqrt{36/49}\\)", o:["6/7","18/24","6/49","36/7"], a:0, h:"6 over 7"},
    {q: "14. Simplify \\(x^2 \\cdot x^3\\)", o:["x^6","x^5","2x^3","x"], a:1, h:"Add powers"},
    {q: "15. Simplify \\((x^2)^3\\)", o:["x^5","x^6","x^8","x^9"], a:1, h:"Multiply powers"},
    {q: "16. \\(5^0\\) is?", o:["0","1","5","Undefined"], a:1, h:"Anything^0 is 1"},
    {q: "17. Simplify \\(x^5 / x^2\\)", o:["x^3","x^7","x^2.5","x^10"], a:0, h:"Subtract powers"},
    {q: "18. Simplify \\((2x)^2\\)", o:["2x^2","4x^2","4x","2x"], a:1, h:"Square the 2 also"},
    {q: "19. Solve \\(2x^2 = 32\\)", o:["4","16","8","4 & -4"], a:3, h:"Divide by 2 first"},
    {q: "20. \\(\\sqrt{4} + \\sqrt{9}\\)", o:["5","6","13","Sqrt(13)"], a:0, h:"2+3"},
    {q: "21. \\(\\sqrt{2} \\times \\sqrt{8}\\)", o:["4","16","10","Sqrt(10)"], a:0, h:"Sqrt(16)"},
    {q: "22. Estimate \\(\\sqrt{10}\\)", o:["3.16","5","2.5","100"], a:0, h:"Close to 3"},
    {q: "23. Pi (\\(\\pi\\)) is?", o:["Rational","Irrational","Integer","Whole"], a:1, h:"Never repeats"},
    {q: "24. 0.333... is?", o:["Rational","Irrational","Integer","Complex"], a:0, h:"It's 1/3"},
    {q: "25. Square area=81. Side?", o:["9","40.5","20","81"], a:0, h:"Sqrt(81)"},
    {q: "26. Cube root of 8?", o:["2","4","2.8","64"], a:0, h:"2x2x2"},
    {q: "27. \\(\\sqrt{25}-5\\)", o:["0","5","25","-5"], a:0, h:"5-5"},
    {q: "28. Larger: \\(\\sqrt{17}\\) or 4?", o:["Sqrt(17)","4","Equal","Unknown"], a:0, h:"4 is Sqrt(16)"},
    {q: "29. \\(\\sqrt{1/100}\\) decimal?", o:["0.1","0.01","0.05","0.001"], a:0, h:"1/10"},
    {q: "30. If \\(\\sqrt{x}=9\\), x is?", o:["3","18","81","9"], a:2, h:"Square 9"}
  ];

  const quizDiv = document.getElementById('quiz-container');
  let xp = 0;

  questions.forEach((q, i) => {
    let d = document.createElement('div');
    d.className = 'q-item';
    d.innerHTML = `
      <div class="q-txt">${q.q}</div>
      <div class="opt-grid" id="opts-${i}"></div>
      <div class="feedback" id="fb-${i}"></div>
    `;
    quizDiv.appendChild(d);

    let optContainer = document.getElementById(`opts-${i}`);
    q.o.forEach((optText, optIdx) => {
      let btn = document.createElement('button');
      btn.className = 'opt';
      btn.innerHTML = optText;
      btn.onclick = () => {
        // Disable all buttons in this question
        let btns = optContainer.querySelectorAll('.opt');
        btns.forEach(b => b.disabled = true);
        
        let fb = document.getElementById(`fb-${i}`);
        fb.style.display = 'block';

        if(optIdx === q.a) {
          btn.classList.add('correct');
          fb.innerHTML = "Correct! +10 XP";
          fb.style.background = "#ECFDF5"; fb.style.color = "var(--green)";
          xp += 10;
          document.getElementById('xp').innerText = xp;
        } else {
          btn.classList.add('wrong');
          btns[q.a].classList.add('correct'); // Show correct one
          fb.innerHTML = `Incorrect. Hint: ${q.h}`;
          fb.style.background = "#FEF2F2"; fb.style.color = "var(--red)";
        }
      };
      optContainer.appendChild(btn);
    });
  });

  // Initial Typeset
  update();
</script>

</body>
</html>
