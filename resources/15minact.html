<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compound Inequalities - Instructor Sharanya Narra</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- MathJax for LaTeX rendering -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
        /* Custom Slider Styling */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: currentColor;
            cursor: pointer;
            margin-top: -10px;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #e2e8f0;
            border-radius: 2px;
        }
        .canvas-container {
            position: relative;
            width: 100%;
            height: 250px;
        }
        canvas {
            width: 100%;
            height: 100%;
        }
        .solution-box {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }
        .solution-box.visible {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans">

    <!-- Navigation / Header -->
    <nav class="bg-indigo-700 text-white p-4 shadow-lg sticky top-0 z-50">
        <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold flex items-center gap-2">
                    <i class="ph ph-function text-3xl"></i> ActiveMath: Compound Inequalities
                </h1>
                <p class="text-indigo-200 text-sm mt-1">Instructor: <span class="font-semibold text-white">Sharanya Narra</span></p>
            </div>
            <div class="mt-2 md:mt-0 text-sm bg-indigo-800 px-4 py-1.5 rounded-full border border-indigo-600">
                Algebra I &bull; Grade 8
            </div>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto p-4 space-y-8">

        <!-- Intro Section -->
        <section class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="p-6 md:p-8 flex flex-col md:flex-row items-center gap-8">
                <div class="flex-1">
                    <h2 class="text-3xl font-bold mb-4 text-indigo-900">Understanding "AND" vs "OR"</h2>
                    <p class="text-lg text-slate-600 mb-6 leading-relaxed">
                        Compound inequalities are like compound sentences. They combine two ideas into one solution. 
                        Solving them often involves graphing them on a number line to see where the truth lies.
                    </p>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
                            <h3 class="font-bold text-purple-700 flex items-center gap-2">
                                <i class="ph ph-intersect"></i> AND (Intersection)
                            </h3>
                            <p class="text-sm text-slate-600 mt-1">Both conditions must be true. Look for the <strong>Overlap</strong>.</p>
                        </div>
                        <div class="bg-orange-50 p-4 rounded-lg border-l-4 border-orange-500">
                            <h3 class="font-bold text-orange-700 flex items-center gap-2">
                                <i class="ph ph-union"></i> OR (Union)
                            </h3>
                            <p class="text-sm text-slate-600 mt-1">At least one condition must be true. Look for <strong>Everything</strong>.</p>
                        </div>
                    </div>
                </div>
                <div class="w-full md:w-1/3 bg-slate-100 rounded-xl p-6 flex flex-col items-center justify-center text-center border border-slate-200">
                    <div class="text-5xl mb-2 text-indigo-500"><i class="ph ph-sliders"></i></div>
                    <p class="font-bold text-slate-700">Interactive Lab</p>
                    <p class="text-sm text-slate-500 mt-2">Use the tool below to visualize how intervals interact.</p>
                </div>
            </div>
        </section>

        <!-- Interactive Visualizer -->
        <section class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden" id="visualizer">
            <div class="bg-slate-800 text-white p-4 flex flex-wrap justify-between items-center gap-4">
                <h2 class="text-xl font-bold flex items-center gap-2">
                    <i class="ph ph-eye"></i> Inequality Visualizer
                </h2>
                <div class="flex bg-slate-700 rounded-lg p-1">
                    <button id="modeAnd" onclick="setMode('AND')" class="px-6 py-2 rounded-md font-bold transition-all shadow-sm bg-indigo-500 text-white">AND (Intersection)</button>
                    <button id="modeOr" onclick="setMode('OR')" class="px-6 py-2 rounded-md font-bold transition-all text-slate-300 hover:text-white hover:bg-slate-600">OR (Union)</button>
                </div>
            </div>
            
            <div class="p-6 bg-slate-50">
                <!-- Canvas Area -->
                <div class="canvas-container bg-white border border-slate-300 rounded-xl shadow-inner mb-8">
                    <canvas id="numberLineCanvas"></canvas>
                </div>

                <!-- Controls Container -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    
                    <!-- Inequality A (Red) -->
                    <div class="bg-white p-5 rounded-xl border-l-4 border-red-500 shadow-sm hover:shadow-md transition">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold text-red-700 text-lg">Inequality A</h3>
                            <div class="flex items-center gap-2 bg-red-50 px-3 py-1 rounded-full border border-red-100">
                                <span class="font-mono text-red-800 font-bold" id="textA">x < -2</span>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="text-xs font-bold text-slate-400 uppercase tracking-wide">Boundary Value</label>
                                <div class="flex items-center gap-4">
                                    <span class="text-slate-400 font-mono text-sm">-10</span>
                                    <input type="range" id="sliderA" min="-10" max="10" step="1" value="-2" class="text-red-500">
                                    <span class="text-slate-400 font-mono text-sm">10</span>
                                </div>
                            </div>

                            <div class="flex justify-between gap-2">
                                <button id="btnDirA" onclick="toggleDir('a')" class="flex-1 py-2 px-3 bg-red-50 hover:bg-red-100 text-red-700 rounded border border-red-200 font-mono text-sm transition">
                                    Direction: <span class="font-bold">&lt;</span>
                                </button>
                                <button id="btnIncA" onclick="toggleInc('a')" class="flex-1 py-2 px-3 bg-red-50 hover:bg-red-100 text-red-700 rounded border border-red-200 font-mono text-sm transition">
                                    Circle: <span class="font-bold">Open</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Inequality B (Blue) -->
                    <div class="bg-white p-5 rounded-xl border-l-4 border-blue-500 shadow-sm hover:shadow-md transition">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold text-blue-700 text-lg">Inequality B</h3>
                            <div class="flex items-center gap-2 bg-blue-50 px-3 py-1 rounded-full border border-blue-100">
                                <span class="font-mono text-blue-800 font-bold" id="textB">x > 3</span>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="text-xs font-bold text-slate-400 uppercase tracking-wide">Boundary Value</label>
                                <div class="flex items-center gap-4">
                                    <span class="text-slate-400 font-mono text-sm">-10</span>
                                    <input type="range" id="sliderB" min="-10" max="10" step="1" value="3" class="text-blue-500">
                                    <span class="text-slate-400 font-mono text-sm">10</span>
                                </div>
                            </div>

                            <div class="flex justify-between gap-2">
                                <button id="btnDirB" onclick="toggleDir('b')" class="flex-1 py-2 px-3 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded border border-blue-200 font-mono text-sm transition">
                                    Direction: <span class="font-bold">&gt;</span>
                                </button>
                                <button id="btnIncB" onclick="toggleInc('b')" class="flex-1 py-2 px-3 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded border border-blue-200 font-mono text-sm transition">
                                    Circle: <span class="font-bold">Open</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Result Box -->
                <div class="mt-8 bg-slate-900 text-white rounded-xl p-6 text-center shadow-lg relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-2 h-full bg-indigo-500" id="resultBar"></div>
                    <p class="text-indigo-300 uppercase tracking-widest text-xs font-bold mb-2">Mathematical Solution</p>
                    <div class="flex flex-col items-center justify-center">
                        <p id="resultInterval" class="text-4xl font-mono font-bold tracking-wider mb-2">Calculating...</p>
                        <p id="resultDesc" class="text-slate-400 italic text-sm">Adjust sliders to see the result</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Practice Section -->
        <section class="bg-white rounded-xl shadow p-8">
            <div class="border-b border-slate-200 pb-4 mb-6 flex justify-between items-end">
                <div>
                    <h2 class="text-2xl font-bold text-slate-800">Practice Problems</h2>
                    <p class="text-slate-500 mt-1">Solve the inequalities and write the interval notation. Click to reveal solutions.</p>
                </div>
                <div class="hidden md:block text-sm bg-green-100 text-green-800 px-3 py-1 rounded-full font-bold">15 Problems</div>
            </div>

            <div class="space-y-6" id="problemContainer">
                <!-- Problems injected via JS -->
            </div>
        </section>

    </main>

    <footer class="bg-slate-800 text-slate-400 text-center py-8 border-t border-slate-700 mt-12">
        <div class="max-w-4xl mx-auto px-4">
            <p class="font-bold text-slate-200">ActiveMath Learning Resources</p>
            <p class="text-sm mt-2">&copy; 2025 Active Learning Institute LLC. Created by Vinay Kanth Rao Kodipelly for Instructor Sharanya Narra.</p>
        </div>
    </footer>

    <!-- LOGIC SCRIPT -->
    <script>
        // --- VISUALIZER STATE & LOGIC ---
        const state = {
            mode: 'AND',
            a: { val: -2, dir: 'less', inclusive: false },
            b: { val: 3, dir: 'greater', inclusive: false }
        };

        const canvas = document.getElementById('numberLineCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;

        // Elements
        const elSliderA = document.getElementById('sliderA');
        const elSliderB = document.getElementById('sliderB');
        const elTextA = document.getElementById('textA');
        const elTextB = document.getElementById('textB');
        const elResult = document.getElementById('resultInterval');
        const elResultDesc = document.getElementById('resultDesc');
        const elBtnDirA = document.getElementById('btnDirA');
        const elBtnIncA = document.getElementById('btnIncA');
        const elBtnDirB = document.getElementById('btnDirB');
        const elBtnIncB = document.getElementById('btnIncB');
        const btnModeAnd = document.getElementById('modeAnd');
        const btnModeOr = document.getElementById('modeOr');
        const resultBar = document.getElementById('resultBar');

        function init() {
            window.addEventListener('resize', resize);
            elSliderA.addEventListener('input', (e) => { state.a.val = parseInt(e.target.value); update(); });
            elSliderB.addEventListener('input', (e) => { state.b.val = parseInt(e.target.value); update(); });
            
            // Load Problems
            renderProblems();
            
            resize();
        }

        function resize() {
            width = canvas.parentElement.offsetWidth;
            height = canvas.parentElement.offsetHeight;
            
            // Handle High DPI
            const dpr = window.devicePixelRatio || 1;
            canvas.width = width * dpr;
            canvas.height = height * dpr;
            ctx.scale(dpr, dpr);
            
            // Fix CSS size
            canvas.style.width = width + 'px';
            canvas.style.height = height + 'px';
            
            update();
        }

        function setMode(m) {
            state.mode = m;
            if(m === 'AND') {
                btnModeAnd.className = "px-6 py-2 rounded-md font-bold transition-all shadow-sm bg-indigo-500 text-white";
                btnModeOr.className = "px-6 py-2 rounded-md font-bold transition-all text-slate-300 hover:text-white hover:bg-slate-600";
                resultBar.className = "absolute top-0 left-0 w-2 h-full bg-purple-500";
            } else {
                btnModeOr.className = "px-6 py-2 rounded-md font-bold transition-all shadow-sm bg-indigo-500 text-white";
                btnModeAnd.className = "px-6 py-2 rounded-md font-bold transition-all text-slate-300 hover:text-white hover:bg-slate-600";
                resultBar.className = "absolute top-0 left-0 w-2 h-full bg-orange-500";
            }
            update();
        }

        function toggleDir(which) {
            const obj = state[which];
            obj.dir = obj.dir === 'less' ? 'greater' : 'less';
            update();
        }

        function toggleInc(which) {
            const obj = state[which];
            obj.inclusive = !obj.inclusive;
            update();
        }

        function getNotation(obj, letter) {
            const symbol = obj.dir === 'less' ? (obj.inclusive ? '\\le' : '<') : (obj.inclusive ? '\\ge' : '>');
            return `${letter} ${symbol} ${obj.val}`;
        }

        function update() {
            // Update buttons text
            elBtnDirA.innerHTML = `Direction: <span class="font-bold">${state.a.dir === 'less' ? '&lt; Left' : '&gt; Right'}</span>`;
            elBtnIncA.innerHTML = `Circle: <span class="font-bold">${state.a.inclusive ? 'Closed' : 'Open'}</span>`;
            elTextA.innerText = `${state.a.dir === 'less' ? (state.a.inclusive ? 'x ≤' : 'x <') : (state.a.inclusive ? 'x ≥' : 'x >')} ${state.a.val}`;

            elBtnDirB.innerHTML = `Direction: <span class="font-bold">${state.b.dir === 'less' ? '&lt; Left' : '&gt; Right'}</span>`;
            elBtnIncB.innerHTML = `Circle: <span class="font-bold">${state.b.inclusive ? 'Closed' : 'Open'}</span>`;
            elTextB.innerText = `${state.b.dir === 'less' ? (state.b.inclusive ? 'x ≤' : 'x <') : (state.b.inclusive ? 'x ≥' : 'x >')} ${state.b.val}`;

            draw();
            calculateLogic();
        }

        // --- DRAWING ENGINE ---
        function draw() {
            // Clear
            ctx.clearRect(0, 0, width, height);

            const padding = 50;
            const drawWidth = width - (padding * 2);
            const minVal = -10;
            const maxVal = 10;
            const range = maxVal - minVal;
            
            // Coord transformation
            const getX = (val) => padding + ((val - minVal) / range) * drawWidth;
            const yBase = height / 2;

            // 1. Draw Number Line
            ctx.beginPath();
            ctx.strokeStyle = '#cbd5e1';
            ctx.lineWidth = 2;
            ctx.moveTo(padding - 20, yBase);
            ctx.lineTo(width - padding + 20, yBase);
            ctx.stroke();

            // Ticks
            ctx.textAlign = 'center';
            ctx.textBaseline = 'top';
            ctx.font = '12px sans-serif';
            ctx.fillStyle = '#64748b';

            for(let i = minVal; i <= maxVal; i++) {
                const x = getX(i);
                ctx.beginPath();
                ctx.moveTo(x, yBase - 6);
                ctx.lineTo(x, yBase + 6);
                ctx.strokeStyle = '#94a3b8';
                ctx.lineWidth = 1;
                ctx.stroke();
                
                if(i % 2 === 0) {
                    ctx.fillText(i, x, yBase + 12);
                }
            }

            // Draw Intervals
            // A (Red) is usually top, B (Blue) bottom
            const yA = yBase - 30;
            const yB = yBase + 30;
            const yRes = yBase; // Result overlay

            // Helper to draw arrow
            const drawRay = (val, dir, inc, y, color, dashed = false) => {
                const x = getX(val);
                ctx.beginPath();
                ctx.strokeStyle = color;
                ctx.lineWidth = 4;
                if(dashed) ctx.setLineDash([5, 5]);
                else ctx.setLineDash([]);

                if(dir === 'less') {
                    ctx.moveTo(x, y);
                    ctx.lineTo(padding - 30, y);
                    // Arrowhead
                    ctx.lineTo(padding - 20, y - 5);
                    ctx.moveTo(padding - 30, y);
                    ctx.lineTo(padding - 20, y + 5);
                } else {
                    ctx.moveTo(x, y);
                    ctx.lineTo(width - padding + 30, y);
                    // Arrowhead
                    ctx.lineTo(width - padding + 20, y - 5);
                    ctx.moveTo(width - padding + 30, y);
                    ctx.lineTo(width - padding + 20, y + 5);
                }
                ctx.stroke();
                ctx.setLineDash([]);

                // Circle
                ctx.beginPath();
                ctx.fillStyle = inc ? color : '#fff';
                ctx.arc(x, y, 6, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
            };

            // Draw A
            drawRay(state.a.val, state.a.dir, state.a.inclusive, yA, '#ef4444');
            // Draw B
            drawRay(state.b.val, state.b.dir, state.b.inclusive, yB, '#3b82f6');

            // Draw Result (Purple/Orange Highlight)
            // This is purely visual representation of logic
            drawResultVisual(getX, yRes);
        }

        function drawResultVisual(getX, y) {
            // We need to calculate the logical intersection/union ranges to draw the "Result" line
            // This is a simplified visual renderer based on the logic state
            
            const color = state.mode === 'AND' ? '#a855f7' : '#f97316'; // Purple / Orange
            const aStart = state.a.dir === 'greater' ? state.a.val : -Infinity;
            const aEnd = state.a.dir === 'less' ? state.a.val : Infinity;
            
            const bStart = state.b.dir === 'greater' ? state.b.val : -Infinity;
            const bEnd = state.b.dir === 'less' ? state.b.val : Infinity;

            let segments = [];

            if (state.mode === 'AND') {
                // Intersection logic
                let s = Math.max(aStart, bStart);
                let e = Math.min(aEnd, bEnd);
                
                // Determine inclusion
                let sInc = (s === aStart ? state.a.inclusive : state.b.inclusive);
                if (aStart === bStart) sInc = state.a.inclusive && state.b.inclusive;

                let eInc = (e === aEnd ? state.a.inclusive : state.b.inclusive);
                if (aEnd === bEnd) eInc = state.a.inclusive && state.b.inclusive;

                if (s <= e && !(s===e && (!sInc || !eInc))) {
                    segments.push({ s, e, sInc, eInc });
                }
            } else {
                // Union Logic is tricky to draw generally, but we'll try basic bounds
                // Since this is educational, standard cases usually result in:
                // 1. One continuous line (merge)
                // 2. Two separate lines (disjoint)
                // 3. All real numbers
                
                // Sort intervals
                let i1 = { s: aStart, e: aEnd, sInc: state.a.dir === 'greater' ? state.a.inclusive : false, eInc: state.a.dir === 'less' ? state.a.inclusive : false };
                let i2 = { s: bStart, e: bEnd, sInc: state.b.dir === 'greater' ? state.b.inclusive : false, eInc: state.b.dir === 'less' ? state.b.inclusive : false };
                
                // Swap to ensure i1 starts first
                if (i1.s > i2.s) [i1, i2] = [i2, i1];

                // Check overlap
                if (i1.e > i2.s || (i1.e === i2.s && (i1.eInc || i2.sInc))) {
                    // Merge
                    let s = i1.s;
                    let e = Math.max(i1.e, i2.e);
                    // Determine new inclusions... simplifying for visualizer:
                    segments.push({ s, e, sInc: i1.sInc, eInc: (i1.e > i2.e ? i1.eInc : i2.eInc) });
                } else {
                    // Disjoint
                    segments.push(i1);
                    segments.push(i2);
                }
            }

            // Draw the segments
            ctx.lineWidth = 8;
            ctx.strokeStyle = color;
            ctx.globalAlpha = 0.5;

            segments.forEach(seg => {
                let x1 = seg.s === -Infinity ? 0 : getX(seg.s);
                let x2 = seg.e === Infinity ? width : getX(seg.e);

                ctx.beginPath();
                ctx.moveTo(x1, y);
                ctx.lineTo(x2, y);
                ctx.stroke();

                // Caps
                ctx.fillStyle = color;
                ctx.globalAlpha = 1;
                
                if(seg.s !== -Infinity) {
                    ctx.beginPath();
                    ctx.arc(x1, y, 4, 0, Math.PI*2);
                    if(!seg.sInc) { ctx.fillStyle = '#fff'; ctx.strokeStyle = color; ctx.lineWidth=2; ctx.stroke(); } 
                    else { ctx.fillStyle = color; ctx.fill(); }
                }
                if(seg.e !== Infinity) {
                    ctx.beginPath();
                    ctx.arc(x2, y, 4, 0, Math.PI*2);
                    if(!seg.eInc) { ctx.fillStyle = '#fff'; ctx.strokeStyle = color; ctx.lineWidth=2; ctx.stroke(); } 
                    else { ctx.fillStyle = color; ctx.fill(); }
                }
                ctx.globalAlpha = 0.5;
            });
            ctx.globalAlpha = 1;
        }

        function calculateLogic() {
            // Logic for the Text Display (Similar to previous, but simpler display code)
            // Just updating the text based on current state
            // Re-using the logic from drawing segments essentially
            
            const aStart = state.a.dir === 'greater' ? state.a.val : -Infinity;
            const aEnd = state.a.dir === 'less' ? state.a.val : Infinity;
            const bStart = state.b.dir === 'greater' ? state.b.val : -Infinity;
            const bEnd = state.b.dir === 'less' ? state.b.val : Infinity;

            let resultStr = "";
            let desc = "";

            if(state.mode === 'AND') {
                // Intersection
                let s = Math.max(aStart, bStart);
                let e = Math.min(aEnd, bEnd);
                
                let sInc = false;
                if(aStart > bStart) sInc = state.a.inclusive;
                else if (bStart > aStart) sInc = state.b.inclusive;
                else sInc = state.a.inclusive && state.b.inclusive;

                let eInc = false;
                if(aEnd < bEnd) eInc = state.a.inclusive;
                else if (bEnd < aEnd) eInc = state.b.inclusive;
                else eInc = state.a.inclusive && state.b.inclusive;

                if (s > e || (s === e && (!sInc || !eInc))) {
                    resultStr = "No Solution ($\\emptyset$)";
                    desc = "The intervals do not overlap.";
                } else if (s === e) {
                    resultStr = `x = ${s}`; // Single point
                    desc = "The intervals touch at exactly one point.";
                } else {
                    let left = s === -Infinity ? "-\\infty" : s;
                    let right = e === Infinity ? "\\infty" : e;
                    let lb = s === -Infinity ? "(" : (sInc ? "[" : "(");
                    let rb = e === Infinity ? ")" : (eInc ? "]" : ")");
                    resultStr = `$${lb}${left}, ${right}${rb}$`;
                    desc = "Values common to BOTH inequalities.";
                }

            } else {
                // Union
                 // Check if ALL REAL NUMBERS
                // Case 1: They overlap/touch to form one big line
                // Check gaps.
                
                // Let's rely on simple disjoint check for display text
                let gap = false;
                // If A is left of B
                if (aEnd < bStart) gap = true;
                // If B is left of A
                if (bEnd < aStart) gap = true;

                // Edge case: Touching?
                if (aEnd === bStart && (state.a.inclusive || state.b.inclusive)) gap = false;
                if (bEnd === aStart && (state.b.inclusive || state.a.inclusive)) gap = false;

                // Containment?
                if (aStart <= bStart && aEnd >= bEnd) gap = false; // A contains B
                if (bStart <= aStart && bEnd >= aEnd) gap = false; // B contains A

                if (gap) {
                    // Disjoint
                    // Sort left to right
                    let first = aStart < bStart ? state.a : state.b;
                    let second = aStart < bStart ? state.b : state.a;
                    
                    let s1 = first.dir === 'greater' ? first.val : "-\\infty";
                    let e1 = first.dir === 'less' ? first.val : "\\infty";
                    let l1 = first.dir === 'greater' ? (first.inclusive ? "[" : "(") : "(";
                    let r1 = first.dir === 'less' ? (first.inclusive ? "]" : ")") : ")";

                    let s2 = second.dir === 'greater' ? second.val : "-\\infty";
                    let e2 = second.dir === 'less' ? second.val : "\\infty";
                    let l2 = second.dir === 'greater' ? (second.inclusive ? "[" : "(") : "(";
                    let r2 = second.dir === 'less' ? (second.inclusive ? "]" : ")") : ")";

                    resultStr = `$${l1}${s1}, ${e1}${r1} \\cup ${l2}${s2}, ${e2}${r2}$`;
                    desc = "Two separate intervals.";
                } else {
                    // Merged
                    let minS = Math.min(aStart, bStart);
                    let maxE = Math.max(aEnd, bEnd);
                    
                    if (minS === -Infinity && maxE === Infinity) {
                        resultStr = "All Real Numbers";
                        desc = "The entire number line is covered.";
                    } else {
                        // Determine boundaries of merged
                        let sInc = (minS === aStart ? state.a.inclusive : state.b.inclusive); // simplified
                        // If one goes to -inf, logic handles it visually but text needs care
                        // Doing a quick patch for standard "arrows pointing out" case
                        if (aStart === -Infinity || bStart === -Infinity) minS = -Infinity;
                        if (aEnd === Infinity || bEnd === Infinity) maxE = Infinity;

                        // Recalc Inc for finite bounds
                        if(minS !== -Infinity) {
                             if (minS === aStart && state.a.inclusive) sInc = true;
                             else if (minS === bStart && state.b.inclusive) sInc = true;
                             else sInc = false;
                        }
                        
                        let eInc = false;
                        if(maxE !== Infinity) {
                             if (maxE === aEnd && state.a.inclusive) eInc = true;
                             else if (maxE === bEnd && state.b.inclusive) eInc = true;
                             else eInc = false;
                        }

                        let l = minS === -Infinity ? "(" : (sInc ? "[" : "(");
                        let r = maxE === Infinity ? ")" : (eInc ? "]" : ")");
                        let sT = minS === -Infinity ? "-\\infty" : minS;
                        let eT = maxE === Infinity ? "\\infty" : maxE;

                        resultStr = `$${l}${sT}, ${eT}${r}$`;
                        desc = "The intervals merge into one.";
                    }
                }
            }

            elResult.innerHTML = resultStr;
            elResultDesc.innerHTML = desc;
            MathJax.typesetPromise([elResult]);
        }


        // --- PRACTICE PROBLEMS ---
        const problems = [
            // Level 1: Basics
            { q: "x > 4", s: "Since it is strictly greater than, we use a parenthesis and go to infinity.", ans: "$(4, \\infty)$" },
            { q: "x \\le -2", s: "Less than or equal means we use a square bracket. We go down to negative infinity.", ans: "$(-\\infty, -2]$" },
            { q: "-3 < x \\le 5", s: "x is between -3 and 5. -3 is open, 5 is closed.", ans: "$(-3, 5]$" },
            
            // Level 2: Solving Simple
            { q: "x - 5 > 2", s: "Add 5 to both sides: $x > 7$.", ans: "$(7, \\infty)$" },
            { q: "2x \\le 12", s: "Divide by 2: $x \\le 6$.", ans: "$(-\\infty, 6]$" },
            { q: "-3x < 9", s: "Divide by -3. REMEMBER to flip the sign! $x > -3$.", ans: "$(-3, \\infty)$" },

            // Level 3: Compound AND
            { q: "x > 2 \\text{ AND } x < 6", s: "We need the overlap of numbers greater than 2 and less than 6.", ans: "$(2, 6)$" },
            { q: "2x + 1 > 5 \\text{ AND } x - 3 < 1", s: "Solve both:<br>1) $2x > 4 \\rightarrow x > 2$<br>2) $x < 4$<br>Combine: $2 < x < 4$.", ans: "$(2, 4)$" },
            { q: "-2 < x + 3 \\le 7", s: "Subtract 3 from all sections:<br>$-2-3 < x \\le 7-3$<br>$-5 < x \\le 4$.", ans: "$(-5, 4]$" },

            // Level 4: Compound OR
            { q: "x < 0 \\text{ OR } x > 5", s: "Two disjoint sets. We use the Union symbol (U).", ans: "$(-\\infty, 0) \\cup (5, \\infty)$" },
            { q: "4x - 1 < 3 \\text{ OR } 2x > 8", s: "Solve both:<br>1) $4x < 4 \\rightarrow x < 1$<br>2) $x > 4$.", ans: "$(-\\infty, 1) \\cup (4, \\infty)$" },
            
            // Level 5: Special Cases & Harder
            { q: "-2x + 1 > 9 \\text{ OR } 3x + 2 > 8", s: "Solve:<br>1) $-2x > 8 \\rightarrow x < -4$ (flip sign!)<br>2) $3x > 6 \\rightarrow x > 2$.", ans: "$(-\\infty, -4) \\cup (2, \\infty)$" },
            { q: "x < 5 \\text{ AND } x > 8", s: "There is no number that is smaller than 5 AND bigger than 8 at the same time. The lines do not touch.", ans: "No Solution ($\\emptyset$)" },
            { q: "x < 10 \\text{ OR } x > 0", s: "Wait! If x < 10 (like 5) or x > 0 (like 5)... the arrows overlap completely and cover the whole line.", ans: "All Real Numbers $(-\\infty, \\infty)$" },
            { q: "5 < 2x - 1 < 9", s: "Add 1 to all: $6 < 2x < 10$.<br>Divide by 2: $3 < x < 5$.", ans: "$(3, 5)$" }
        ];

        function renderProblems() {
            const container = document.getElementById('problemContainer');
            let html = '';
            
            problems.forEach((p, i) => {
                html += `
                <div class="bg-slate-50 border border-slate-200 rounded-lg p-4 hover:bg-slate-100 transition">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                        <div class="font-mono text-lg font-bold text-slate-700 bg-white px-3 py-1 border rounded shadow-sm">
                            ${i+1}. $${p.q}$
                        </div>
                        <button onclick="toggleSol(${i})" class="text-indigo-600 font-bold hover:text-indigo-800 flex items-center gap-1 text-sm bg-indigo-50 px-3 py-1 rounded transition">
                            <i class="ph ph-caret-down"></i> Reveal Solution
                        </button>
                    </div>
                    <div id="sol-${i}" class="solution-box mt-3 pt-3 border-t border-slate-200 text-slate-600">
                        <p class="mb-2 text-sm"><span class="font-bold text-indigo-500">Step-by-Step:</span> ${p.s}</p>
                        <p class="bg-indigo-900 text-white inline-block px-3 py-1 rounded font-mono shadow-sm">
                            Result: ${p.ans}
                        </p>
                    </div>
                </div>
                `;
            });

            container.innerHTML = html;
            if(window.MathJax) MathJax.typesetPromise();
        }

        function toggleSol(idx) {
            const el = document.getElementById(`sol-${idx}`);
            el.classList.toggle('visible');
        }

        init();

    </script>
</body>
</html>
