<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Fluency Drill</title>
    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
    <script type="text/javascript" id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f7f9;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .quiz-container {
            background-color: #fff;
            padding: 2rem 3rem;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 800px;
            text-align: center;
        }
        h1, h2 {
            color: #2c3e50;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            margin-top: 1rem;
        }
        button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        #timer {
            font-size: 1.5rem;
            font-weight: bold;
            color: #e74c3c;
            padding: 10px;
            background-color: #f1f1f1;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }
        .question {
            text-align: left;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }
        .question p {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 1rem;
        }
        .options div {
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }
        .options label {
            margin-left: 10px;
            cursor: pointer;
        }
        /* Results Styling */
        #results-screen h2 {
            margin-bottom: 1rem;
        }
        #score {
            font-size: 1.8rem;
            font-weight: bold;
            color: #27ae60;
            margin-bottom: 2rem;
        }
        .answer-card {
            text-align: left;
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 8px;
        }
        .answer-card.correct {
            background-color: #e8f5e9; /* Light green */
            border-left: 5px solid #4caf50; /* Green */
        }
        .answer-card.incorrect {
            background-color: #ffebee; /* Light red */
            border-left: 5px solid #f44336; /* Red */
        }
        .answer-card p {
            margin: 0.5rem 0;
        }
        .answer-card .correct-answer {
            font-weight: bold;
            color: #388e3c;
        }
    </style>
</head>
<body>

<div class="quiz-container" id="start-screen">
    <h1>Math Fluency Drill</h1>
    <p>You have <strong>15 minutes</strong> to answer <strong>15 questions</strong>.</p>
    <p>The quiz covers foundational topics from Algebra I and II.</p>
    <button id="start-btn">Start Quiz</button>
</div>

<div class="quiz-container" id="quiz-screen" style="display:none;">
    <div id="timer">15:00</div>
    <form id="quiz-form">
        <div id="questions-container"></div>
        <button type="button" id="submit-btn">Submit Quiz</button>
    </form>
</div>

<div class="quiz-container" id="results-screen" style="display:none;">
    <h2>Quiz Results</h2>
    <p id="score"></p>
    <div id="answers-container"></div>
</div>

<script>
    const startBtn = document.getElementById('start-btn');
    const submitBtn = document.getElementById('submit-btn');
    const startScreen = document.getElementById('start-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultsScreen = document.getElementById('results-screen');
    const timerDisplay = document.getElementById('timer');
    const questionsContainer = document.getElementById('questions-container');
    const scoreDisplay = document.getElementById('score');
    const answersContainer = document.getElementById('answers-container');

    let timer;
    let timeLeft = 15 * 60; // 15 minutes in seconds

    const quizData = [
        {
            question: "What value must be added to $x^2 + 10x$ to complete the square?",
            options: ["5", "10", "25", "100"],
            answer: "25"
        },
        {
            question: "Convert $y = x^2 - 6x + 2$ to vertex form.",
            options: ["$y = (x-3)^2 - 7$", "$y = (x-3)^2 + 2$", "$y = (x-6)^2 - 34$", "$y = (x-6)^2 + 2$"],
            answer: "$y = (x-3)^2 - 7$"
        },
        {
            question: "Factor the expression: $x^2 - 3x - 18$.",
            options: ["$(x-6)(x+3)$", "$(x-9)(x+2)$", "$(x+6)(x-3)$", "$(x-3)(x-6)$"],
            answer: "$(x-6)(x+3)$"
        },
        {
            question: "Evaluate: $\\log_3(81)$.",
            options: ["3", "4", "9", "27"],
            answer: "4"
        },
        {
            question: "Condense the logarithmic expression: $2\\ln(x) + \\ln(y)$.",
            options: ["$\\ln(2xy)$", "$\\ln(x^2y)$", "$\\ln((xy)^2)$", "$\\ln(x^2+y)$"],
            answer: "$\\ln(x^2y)$"
        },
        {
            question: "What are the excluded values for the expression $\\frac{x+5}{(x-1)(x+4)}$?",
            options: ["$x=1, x=-4$", "$x=-5, x=1, x=-4$", "$x=-1, x=4$", "$x=-5$"],
            answer: "$x=1, x=-4$"
        },
        {
            question: "What is the domain of any non-constant polynomial function?",
            options: ["$(0, \\infty)$", "$x \\neq 0$", "$(-\\infty, \\infty)$", "It depends on the degree."],
            answer: "$(-\\infty, \\infty)$"
        },
        {
            question: "Simplify the expression: $16^{3/4}$.",
            options: ["4", "6", "8", "12"],
            answer: "8"
        },
        {
            question: "What is the vertical asymptote of the function $f(x) = \\frac{2x-1}{x+5}$?",
            options: ["$x=5$", "$y=-5$", "$x=-5$", "$y=2$"],
            answer: "$x=-5$"
        },
        {
            question: "Expand the logarithmic expression: $\\log_b\\left(\\frac{x^4}{y}\\right)$.",
            options: ["$4\\log_b(x) - \\log_b(y)$", "$4\\log_b(x) + \\log_b(y)$", "$\\log_b(4x) - \\log_b(y)$", "$\\frac{4\\log_b(x)}{\\log_b(y)}$"],
            answer: "$4\\log_b(x) - \\log_b(y)$"
        },
        {
            question: "Completely factor the expression: $2x^2 + 12x + 10$.",
            options: ["$2(x+1)(x+5)$", "$(2x+2)(x+5)$", "$2(x+2)(x+3)$", "Cannot be factored"],
            answer: "$2(x+1)(x+5)$"
        },
        {
            question: "Convert $y = 3x^2 - 12x + 7$ to vertex form.",
            options: ["$y = 3(x-2)^2 + 1$", "$y = 3(x-2)^2 - 5$", "$y = (3x-2)^2 + 7$", "$y = 3(x-4)^2 + 7$"],
            answer: "$y = 3(x-2)^2 - 5$"
        },
        {
            question: "Simplify the expression: $(3x^4)^{-2}$.",
            options: ["$-9x^8$", "$\\frac{1}{9x^8}$", "$\\frac{1}{3x^6}$", "$\\frac{-6}{x^8}$"],
            answer: "$\\frac{1}{9x^8}$"
        },
        {
            question: "A septic polynomial (degree 7) can have at most how many real roots?",
            options: ["1", "6", "7", "14"],
            answer: "7"
        },
        {
            question: "Simplify the rational expression: $\\frac{x^2 - 25}{x+5}$.",
            options: ["$x-5$", "$x+5$", "$x-25$", "Cannot be simplified"],
            answer: "$x-5$"
        }
    ];

    function startTimer() {
        timer = setInterval(() => {
            timeLeft--;
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;

            if (timeLeft <= 0) {
                clearInterval(timer);
                submitQuiz();
            }
        }, 1000);
    }

    function displayQuiz() {
        quizData.forEach((item, index) => {
            const questionDiv = document.createElement('div');
            questionDiv.className = 'question';

            const questionText = document.createElement('p');
            questionText.innerHTML = `${index + 1}. ${item.question}`;
            questionDiv.appendChild(questionText);

            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options';

            item.options.forEach(option => {
                const optionWrapper = document.createElement('div');
                const radioBtn = document.createElement('input');
                radioBtn.type = 'radio';
                radioBtn.name = `question${index}`;
                radioBtn.value = option;
                radioBtn.id = `q${index}o${option}`;

                const label = document.createElement('label');
                label.htmlFor = `q${index}o${option}`;
                label.textContent = ` ${option}`;

                optionWrapper.appendChild(radioBtn);
                optionWrapper.appendChild(label);
                optionsDiv.appendChild(optionWrapper);
            });

            questionDiv.appendChild(optionsDiv);
            questionsContainer.appendChild(questionDiv);
        });
        MathJax.typeset(); // Re-render LaTeX after adding questions
    }
    
    function submitQuiz() {
        clearInterval(timer);
        quizScreen.style.display = 'none';
        resultsScreen.style.display = 'block';

        let score = 0;
        const form = document.getElementById('quiz-form');

        quizData.forEach((item, index) => {
            const selectedOption = form.querySelector(`input[name="question${index}"]:checked`);
            const userAnswer = selectedOption ? selectedOption.value : "No answer";

            const answerCard = document.createElement('div');
            answerCard.className = 'answer-card';

            const questionText = `<p><b>Question ${index + 1}:</b> ${item.question}</p>`;
            const userAnswerText = `<p>Your answer: ${userAnswer}</p>`;
            const correctAnswerText = `<p class="correct-answer">Correct answer: ${item.answer}</p>`;

            if (userAnswer === item.answer) {
                score++;
                answerCard.classList.add('correct');
                answerCard.innerHTML = questionText + userAnswerText;
            } else {
                answerCard.classList.add('incorrect');
                answerCard.innerHTML = questionText + userAnswerText + correctAnswerText;
            }
            answersContainer.appendChild(answerCard);
        });

        scoreDisplay.textContent = `Your Score: ${score} out of ${quizData.length}`;
        MathJax.typeset(); // Re-render LaTeX in results
    }


    startBtn.addEventListener('click', () => {
        startScreen.style.display = 'none';
        quizScreen.style.display = 'block';
        displayQuiz();
        startTimer();
    });

    submitBtn.addEventListener('click', submitQuiz);

</script>

</body>
</html>
