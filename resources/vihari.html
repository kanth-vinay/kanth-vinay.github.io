<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quadrilaterals Assessment (Version B)</title>

  <!-- MathJax for LaTeX rendering -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)']], displayMath: [['\\[','\\]']] },
      options: { skipHtmlTags: ['script','noscript','style','textarea','pre','code'] }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

  <style>
    :root {
      --ink: #1a1a1a;
      --paper: #ffffff;
      --border: #cccccc;
      --bg-gray: #f4f4f6;
      --correct-bg: #dcfce7;
      --correct-border: #16a34a;
      --wrong-bg: #fee2e2;
      --wrong-border: #dc2626;
    }
    body {
      margin: 0;
      padding: 20px;
      font-family: "Latin Modern Roman", "Noto Serif", Georgia, "Times New Roman", serif;
      background: var(--bg-gray);
      color: var(--ink);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }
    .page {
      max-width: 850px;
      margin: 0 auto;
      background: var(--paper);
      padding: 60px 70px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.05);
      border: 1px solid #e0e0e0;
    }

    .exam-header {
      text-align: center;
      border-bottom: 2px solid var(--ink);
      padding-bottom: 20px;
      margin-bottom: 30px;
    }
    .exam-header h1 {
      font-size: 26px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin: 0 0 10px 0;
    }
    .exam-header .subtext {
      font-style: italic;
      color: #555;
      font-size: 16px;
    }

    .info-fields {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
      font-weight: 600;
      font-size: 15px;
    }
    .field {
      border-bottom: 1px solid #999;
      padding-bottom: 2px;
      min-width: 200px;
    }

    .instructions {
      background: #f8f9fa;
      border: 1px solid #ddd;
      padding: 15px 20px;
      font-size: 14px;
      margin-bottom: 35px;
    }
    .instructions h3 { margin: 0 0 5px 0; font-size: 14px; text-transform: uppercase; }
    .instructions ul { margin: 0; padding-left: 20px; }

    .section-title {
      font-size: 18px;
      font-weight: 700;
      border-bottom: 1px solid #aaa;
      padding-bottom: 5px;
      margin: 40px 0 20px 0;
      text-transform: uppercase;
    }

    .q-block {
      margin-bottom: 25px;
      page-break-inside: avoid;
      padding: 15px;
      border-radius: 4px;
      border-left: 4px solid transparent;
      transition: background-color 0.2s;
    }
    .q-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 14px;
      color: #666;
      font-weight: 700;
    }
    .q-prompt {
      font-size: 16px;
      margin-bottom: 12px;
    }

    .figure {
      margin: 15px auto;
      text-align: center;
    }
    svg text {
      font-family: "Times New Roman", serif;
      font-weight: bold;
    }

    .options-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .opt-label {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      cursor: pointer;
      font-size: 15px;
      padding: 4px;
    }
    .opt-label:hover { background: #f0f0f0; border-radius: 4px; }
    .opt-letter { font-weight: 700; min-width: 20px; }

    .action-bar {
      margin-top: 50px;
      text-align: center;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }
    button {
      background: var(--ink);
      color: #fff;
      border: none;
      padding: 12px 24px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      border-radius: 4px;
      margin: 0 10px;
    }
    button:hover { opacity: 0.9; }
    button.reset-btn { background: #666; }

    .score-panel {
      margin-top: 30px;
      border: 2px solid var(--ink);
      background: #fff;
      padding: 25px;
      display: none;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      text-align: center;
      margin-bottom: 20px;
    }
    .stat-box .label { display: block; font-size: 12px; text-transform: uppercase; color: #666; letter-spacing: 1px; }
    .stat-box .value { display: block; font-size: 24px; font-weight: 800; margin-top: 5px; }

    @media print {
      body { background: #fff; padding: 0; }
      .page { box-shadow: none; border: none; width: 100%; max-width: 100%; padding: 0; }
      .action-bar, .score-panel { display: none; }
      .q-block { break-inside: avoid; }
    }
    @media (max-width: 600px) {
      .page { padding: 20px; }
      .options-grid { grid-template-columns: 1fr; }
      .info-fields { flex-direction: column; gap: 15px; }
    }
  </style>
</head>
<body>

<div class="page">
  <div class="exam-header">
    <h1>Quadrilaterals Assessment</h1>
    <div class="subtext">Parallelograms, Rectangles, Rhombi, Squares & Coordinate Geometry (Version B)</div>

    <div class="info-fields">
      <div class="field">Name:</div>
      <div class="field">Date:</div>
      <div class="field">Score:</div>
    </div>
  </div>

  <div class="instructions">
    <h3>Instructions</h3>
    <ul>
      <li>This assessment consists of two parts: Properties/Algebra and Coordinate Geometry.</li>
      <li>Figures are not necessarily drawn to scale. Use the marked properties.</li>
      <li><strong>Scoring:</strong> <span style="color:#16a34a">+4 points for correct answers</span>, <span style="color:#dc2626">-1 point penalty for incorrect answers</span>.</li>
    </ul>
  </div>

  <div id="quiz-content"></div>

  <div class="action-bar">
    <button onclick="gradeAssessment()">Submit & Grade</button>
    <button class="reset-btn" onclick="resetAssessment()">Reset</button>
  </div>

  <div id="results" class="score-panel">
    <div class="stats-grid">
      <div class="stat-box">
        <span class="label">Total Score</span>
        <span class="value" id="score-total">0</span>
      </div>
      <div class="stat-box">
        <span class="label">Correct</span>
        <span class="value" style="color:#16a34a" id="score-correct">0</span>
      </div>
      <div class="stat-box">
        <span class="label">Incorrect</span>
        <span class="value" style="color:#dc2626" id="score-wrong">0</span>
      </div>
      <div class="stat-box">
        <span class="label">Accuracy</span>
        <span class="value" id="score-percent">0%</span>
      </div>
    </div>
    <div style="font-size:14px; color:#555; text-align:center; border-top:1px solid #eee; padding-top:10px;">
      <em>Note: A negative score indicates more points were lost to penalties than gained.</em>
    </div>
  </div>
</div>

<script>
/* --------------------------------------------------------------------------
   FIGURE GENERATION (SVG) — Version B numbers
   -------------------------------------------------------------------------- */

// Q5: Parallelogram Sides (updated labels)
// Top = 7x - 9, Bottom = 5x + 1, Right = 3x - 4, Left = y
const figParaSides = `
<svg width="300" height="140" viewBox="0 0 300 140">
  <polygon points="50,110 210,110 250,30 90,30" fill="none" stroke="black" stroke-width="2"/>
  <text x="170" y="20" text-anchor="middle" font-size="14">7x - 9</text>
  <text x="130" y="130" text-anchor="middle" font-size="14">5x + 1</text>
  <text x="60" y="75" text-anchor="end" font-size="14">y</text>
  <text x="240" y="75" text-anchor="start" font-size="14">3x - 4</text>
</svg>`;

// Q6: Rhombus Angles (updated)
// Left half = (4x)°, Right half = (2x + 24)°
const figRhombusAngles = `
<svg width="200" height="180" viewBox="0 0 200 180">
  <polygon points="100,20 160,100 100,180 40,100" fill="none" stroke="black" stroke-width="2"/>
  <line x1="100" y1="20" x2="100" y2="180" stroke="#555" stroke-dasharray="4,2"/>
  <line x1="40" y1="100" x2="160" y2="100" stroke="#555" stroke-dasharray="4,2"/>
  <text x="85" y="60" text-anchor="end" font-size="13">(4x)°</text>
  <text x="115" y="60" text-anchor="start" font-size="13">(2x+24)°</text>
</svg>`;

// Q7: Rectangle Diagonals (updated)
// AE = 3x - 1, EC = 5x - 17
const figRectDiags = `
<svg width="300" height="140" viewBox="0 0 300 140">
  <rect x="30" y="30" width="240" height="80" fill="none" stroke="black" stroke-width="2"/>
  <line x1="30" y1="30" x2="270" y2="110" stroke="#333" stroke-width="1"/>
  <line x1="30" y1="110" x2="270" y2="30" stroke="#333" stroke-width="1"/>
  <text x="150" y="85" text-anchor="middle" font-weight="bold" font-size="14">E</text>
  <text x="25" y="25" font-size="14">A</text>
  <text x="275" y="125" font-size="14">C</text>
  <text x="90" y="50" text-anchor="middle" font-size="12" fill="#000">3x - 1</text>
  <text x="210" y="90" text-anchor="middle" font-size="12" fill="#000">5x - 17</text>
</svg>`;

// Q8: Parallelogram Consecutive Angles (updated)
// Angles: (4x + 12)° and (x + 18)°
const figParaAngles = `
<svg width="280" height="140" viewBox="0 0 280 140">
  <polygon points="40,110 200,110 240,30 80,30" fill="none" stroke="black" stroke-width="2"/>
  <text x="65" y="100" font-size="13">(4x + 12)°</text>
  <text x="175" y="100" text-anchor="end" font-size="13">(x + 18)°</text>
</svg>`;

/* --------------------------------------------------------------------------
   DATASET — same questions, different numbers where applicable
   -------------------------------------------------------------------------- */
const quizData = [
  // --- PART 1 ---
  {
    id: 1, part: "Properties & Classification",
    q: "A parallelogram has perpendicular diagonals. What is the most specific classification guaranteed?",
    opts: ["Rectangle", "Rhombus", "Square", "Isosceles Trapezoid"],
    ans: "Rhombus"
  },
  {
    id: 2, part: "Properties & Classification",
    q: "A parallelogram has congruent diagonals. What is the most specific classification guaranteed?",
    opts: ["Rectangle", "Rhombus", "Square", "General Parallelogram"],
    ans: "Rectangle"
  },
  {
    id: 3, part: "Properties & Classification",
    q: "Which quadrilateral always has diagonals that are BOTH congruent AND perpendicular?",
    opts: ["Rectangle", "Rhombus", "Square", "Parallelogram"],
    ans: "Square"
  },
  {
    id: 4, part: "Properties & Classification",
    q: "A rhombus has one right angle. What is the most specific classification?",
    opts: ["Rectangle", "Square", "Parallelogram", "None of these"],
    ans: "Square"
  },
  {
    id: 5, part: "Algebraic Properties",
    q: "Use the figure below. \\(ABCD\\) is a Parallelogram. Find \\(x\\) and \\(y\\). " + figParaSides,
    // Opposite sides congruent: 7x-9 = 5x+1 -> 2x=10 -> x=5.
    // Opposite sides congruent: y = 3x-4 -> y = 15-4=11.
    opts: ["\\(x=5, y=11\\)", "\\(x=4, y=8\\)", "\\(x=6, y=14\\)", "\\(x=5, y=1\\)"],
    ans: "\\(x=5, y=11\\)"
  },
  {
    id: 6, part: "Algebraic Properties",
    q: "Use the figure below. The quadrilateral is a Rhombus. Find \\(x\\). Note: The diagonal bisects the vertex angle." + figRhombusAngles,
    // Angle bisected: 4x = 2x+24 -> 2x=24 -> x=12.
    opts: ["\\(x=8\\)", "\\(x=12\\)", "\\(x=16\\)", "\\(x=24\\)"],
    ans: "\\(x=12\\)"
  },
  {
    id: 7, part: "Algebraic Properties",
    q: "In Rectangle \\(ABCD\\), diagonals intersect at \\(E\\). If \\(AE = 3x - 1\\) and \\(EC = 5x - 17\\), find the length of the full diagonal \\(AC\\)." + figRectDiags,
    // In a rectangle, diagonals bisect each other: AE = EC.
    // 3x-1 = 5x-17 -> 16 = 2x -> x=8.
    // AE = 3(8)-1 = 23, so AC = 2*23 = 46.
    opts: ["23", "46", "16", "8"],
    ans: "46"
  },
  {
    id: 8, part: "Algebraic Properties",
    q: "Use the figure below. \\(ABCD\\) is a Parallelogram. Find \\(x\\)." + figParaAngles,
    // Consecutive angles supplementary:
    // (4x+12) + (x+18) = 180 -> 5x+30=180 -> x=30.
    opts: ["\\(x=24\\)", "\\(x=28\\)", "\\(x=30\\)", "\\(x=36\\)"],
    ans: "\\(x=30\\)"
  },
  {
    id: 9, part: "Properties & Classification",
    q: "A quadrilateral has diagonals that bisect each other but are NOT congruent and NOT perpendicular. What is it?",
    opts: ["Rectangle", "Rhombus", "Square", "Parallelogram"],
    ans: "Parallelogram"
  },
  {
    id: 10, part: "Properties & Classification",
    q: "If a quadrilateral has both pairs of opposite sides parallel and one right angle, it must be a:",
    opts: ["Rhombus", "Rectangle", "Square", "General Parallelogram"],
    ans: "Rectangle"
  },
  {
    id: 11, part: "Properties & Classification",
    q: "Which single property below is sufficient to prove a Parallelogram is a Square?",
    opts: ["Diagonals are perpendicular and congruent", "Opposite sides are parallel", "Diagonals bisect each other", "Consecutive angles are supplementary"],
    ans: "Diagonals are perpendicular and congruent"
  },
  {
    id: 12, part: "Algebraic Properties",
    q: "In Parallelogram \\(PQRS\\), opposite sides \\(PQ = 4x - 9\\) and \\(RS = 2x + 5\\). What is the length of side \\(PQ\\)?",
    // 4x-9 = 2x+5 -> 2x=14 -> x=7. PQ = 28-9=19.
    opts: ["7", "19", "14", "28"],
    ans: "19"
  },

  // --- PART 2 ---
  {
    id: 13, part: "Coordinate Geometry",
    q: "Let vertices \\(A(1,2), B(7,2), C(7,6), D(1,6)\\). Calculate side lengths and classify.",
    // Side lengths: AB=6, BC=4; right angles -> rectangle (not square).
    opts: ["Square", "Rectangle", "Rhombus", "Parallelogram"],
    ans: "Rectangle"
  },
  {
    id: 14, part: "Coordinate Geometry",
    q: "Given vertices \\(P(-3, 1), Q(1, 9), R(7, 9), S(3, 1)\\). Find the slope of side \\(PQ\\).",
    // (9-1)/(1-(-3)) = 8/4 = 2.
    opts: ["\\(2\\)", "\\(1/2\\)", "\\(-2\\)", "\\(4\\)"],
    ans: "\\(2\\)"
  },
  {
    id: 15, part: "Coordinate Geometry",
    q: "Vertices: \\(J(1, 1), K(5, 2), L(6, 6), M(2, 5)\\). Use slopes and distances (sides/diagonals) to classify \\(JKLM\\) most specifically.",
    // JK=(4,1), KL=(1,4): dot=4*1+1*4=8 not 0, so not rectangle/square from adjacency.
    // But it's a square candidate rotated? Check all sides:
    // JK^2=16+1=17, KL^2=1+16=17, LM^2=(-4,-1)^2=17, MJ^2=(-1,-4)^2=17.
    // Slopes: JK=1/4, KL=4 -> product=1 -> not perpendicular (so it's a rhombus, not square).
    // Diagonals: JL^2=(5^2+5^2)=50, KM^2=(-3^2+3^2)=18 not equal.
    // Most specific: Rhombus only.
    opts: ["Parallelogram only", "Rectangle only", "Rhombus only", "Square"],
    ans: "Rhombus only"
  },
  {
    id: 16, part: "Coordinate Geometry",
    q: "Let \\(A(-4, 5)\\) and \\(C(8, -1)\\) be opposite vertices of a parallelogram. Find the intersection of the diagonals.",
    // Midpoint: ((-4+8)/2, (5+(-1))/2) = (2,2).
    opts: ["\\((2, 2)\\)", "\\((4, 2)\\)", "\\((2, 4)\\)", "\\((-2, 2)\\)"],
    ans: "\\((2, 2)\\)"
  },
  {
    id: 17, part: "Coordinate Geometry",
    q: "Three vertices of parallelogram \\(PQRS\\) are \\(P(1,2), Q(6,4), R(9,10)\\). Find vertex \\(S\\).",
    // In parallelogram with consecutive P-Q-R, S = P + (R-Q) = (1,2) + (3,6) = (4,8).
    opts: ["\\((4, 8)\\)", "\\((3, 6)\\)", "\\((12, 14)\\)", "\\((6, 8)\\)"],
    ans: "\\((4, 8)\\)"
  },
  {
    id: 18, part: "Coordinate Geometry",
    q: "Given \\(A(0,0), B(4,1), C(5,5), D(1,4)\\). Is \\(ABCD\\) a Rhombus? (Hint: Calculate adjacent side lengths).",
    // AB^2=16+1=17, BC^2=1+16=17, CD^2=16+1=17, DA^2=1+16=17 -> all equal.
    // Not a square since slopes AB=1/4 and BC=4 => product=1 (not -1).
    opts: ["Yes, it is a Rhombus", "Yes, it is a Square", "No, it is only a Parallelogram", "No, it is a Rectangle"],
    ans: "Yes, it is a Rhombus"
  },
  {
    id: 19, part: "Coordinate Geometry",
    q: "Find the value of \\(k\\) so that \\(A(1,1), B(6,1), C(9, k), D(4,5)\\) is a parallelogram.",
    // AB is horizontal, so CD must be horizontal: y_C = y_D = 5 -> k=5.
    opts: ["\\(k=1\\)", "\\(k=4\\)", "\\(k=5\\)", "\\(k=9\\)"],
    ans: "\\(k=5\\)"
  },
  {
    id: 20, part: "Coordinate Geometry",
    q: "Determine the length of the diagonal \\(AC\\) for a square with vertices at \\(A(-2,-2)\\) and side length 6.",
    // Diagonal = s*sqrt(2) = 6sqrt(2).
    opts: ["6", "12", "\\(6\\sqrt{2}\\)", "\\(3\\sqrt{2}\\)"],
    ans: "\\(6\\sqrt{2}\\)"
  },
  {
    id: 21, part: "Coordinate Geometry",
    q: "Points \\(E(-1,2), F(3,6), G(7,10), H(3,6)\\). Are diagonals \\(EG\\) and \\(FH\\) perpendicular?",
    // NOTE: This was intentionally modified to avoid degeneracy: H should not equal F.
    // Corrected set below (non-degenerate):
    // E(-1,2), F(5,3), G(7,10), H(1,9)
    // EG slope = (10-2)/(7-(-1)) = 8/8 = 1
    // FH slope = (9-3)/(1-5) = 6/(-4) = -3/2 => not perpendicular (product -3/2).
    opts: ["Yes, slopes are 1 and -1", "No, slopes multiply to \\(-1\\)", "No, slopes are equal", "Cannot determine"],
    ans: "No, slopes multiply to \\(-1\\)" // placeholder, will be overwritten below
  },
  {
    id: 22, part: "Coordinate Geometry",
    q: "Which set of vertices forms a Rectangle?",
    opts: [
      "\\((1,2), (7,2), (7,6), (1,6)\\)",
      "\\((0,0), (2,3), (6,4), (4,1)\\)",
      "\\((0,0), (3,2), (5,7), (2,5)\\)",
      "\\((1,1), (2,2), (3,3), (4,4)\\)"
    ],
    ans: "\\((1,2), (7,2), (7,6), (1,6)\\)"
  },
  {
    id: 23, part: "Coordinate Geometry",
    q: "Find the missing coordinate \\(y\\) for \\(C(10, y)\\) if \\(A(2,1), B(6,5), D(6,1)\\) are vertices of parallelogram \\(ABCD\\).",
    // AB = <4,4>. DC must be <4,4>. So C - D = <4,4>.
    // (10,y) - (6,1) = (4, y-1) => y-1=4 => y=5.
    opts: ["3", "4", "5", "6"],
    ans: "5"
  },
  {
    id: 24, part: "Coordinate Geometry",
    q: "Calculate the slope of diagonal \\(BD\\) given \\(B(-1, 7)\\) and \\(D(5, 1)\\).",
    // (1-7)/(5-(-1)) = -6/6 = -1.
    opts: ["1", "-1", "0", "Undefined"],
    ans: "-1"
  },
  {
    id: 25, part: "Coordinate Geometry",
    q: "Which quadrilateral guarantees that the midpoints of its diagonals are the same point?",
    opts: ["Parallelogram", "Trapezoid", "Kite", "Any Quadrilateral"],
    ans: "Parallelogram"
  }
];

// Fix Q21 cleanly (non-degenerate) by overwriting it with a mathematically consistent version.
quizData.find(q => q.id === 21).q =
  "Points \\\\(E(-1,2), F(5,3), G(7,10), H(1,9)\\\\). Are diagonals \\\\(EG\\\\) and \\\\(FH\\\\) perpendicular?";
quizData.find(q => q.id === 21).opts = [
  "Yes, slopes are 1 and -1",
  "Yes, slopes multiply to \\(-1\\)",
  "No, slopes are \\(1\\) and \\(-3/2\\)",
  "Cannot determine"
];
// EG slope = 1, FH slope = (9-3)/(1-5)=6/(-4)=-3/2 -> not perpendicular
quizData.find(q => q.id === 21).ans = "No, slopes are \\(1\\) and \\(-3/2\\)";

/* --------------------------------------------------------------------------
   LOGIC & RENDERING
   -------------------------------------------------------------------------- */

function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function renderQuiz() {
  const container = document.getElementById("quiz-content");
  container.innerHTML = "";

  let currentPart = "";

  quizData.forEach((item) => {
    if (item.part !== currentPart) {
      currentPart = item.part;
      const partHeader = document.createElement('div');
      partHeader.className = "section-title";
      partHeader.textContent = currentPart;
      container.appendChild(partHeader);
    }

    const qEl = document.createElement("div");
    qEl.className = "q-block";
    qEl.id = `q-block-${item.id}`;

    let optionObjects = item.opts.map(opt => ({
      txt: opt,
      isCorrect: (opt === item.ans)
    }));

    optionObjects = shuffleArray(optionObjects);
    item.shuffledOptions = optionObjects;

    let optionsHTML = `<ul class="options-grid">`;
    optionObjects.forEach((optObj, i) => {
      const letter = String.fromCharCode(65 + i);
      optionsHTML += `
        <li class="opt-label">
          <input type="radio" name="q_${item.id}" id="q_${item.id}_${i}" value="${i}">
          <label for="q_${item.id}_${i}" style="display:flex; gap:10px; width:100%;">
            <span class="opt-letter">${letter}.</span>
            <span>${optObj.txt}</span>
          </label>
        </li>
      `;
    });
    optionsHTML += `</ul>`;

    qEl.innerHTML = `
      <div class="q-header">
        <span>Question ${item.id}</span>
        <span>+4 / -1</span>
      </div>
      <div class="q-prompt">${item.q}</div>
      ${optionsHTML}
    `;

    container.appendChild(qEl);
  });

  if (window.MathJax) {
    MathJax.typesetPromise();
  }
}

function gradeAssessment() {
  let correct = 0;
  let wrong = 0;
  let blank = 0;
  let totalScore = 0;

  quizData.forEach(item => {
    const block = document.getElementById(`q-block-${item.id}`);
    const selectedInput = document.querySelector(`input[name="q_${item.id}"]:checked`);

    block.style.background = "transparent";
    block.style.borderLeftColor = "transparent";

    if (!selectedInput) {
      blank++;
    } else {
      const selectedIndex = parseInt(selectedInput.value, 10);
      const isCorrect = item.shuffledOptions[selectedIndex].isCorrect;

      if (isCorrect) {
        correct++;
        totalScore += 4;
        block.style.background = "var(--correct-bg)";
        block.style.borderLeftColor = "var(--correct-border)";
      } else {
        wrong++;
        totalScore -= 1;
        block.style.background = "var(--wrong-bg)";
        block.style.borderLeftColor = "var(--wrong-border)";
      }
    }
  });

  const attempted = correct + wrong;
  const accuracy = attempted === 0 ? 0 : Math.round((correct / attempted) * 100);

  document.getElementById("score-total").innerText = totalScore + " / 100";
  document.getElementById("score-correct").innerText = correct;
  document.getElementById("score-wrong").innerText = wrong;
  document.getElementById("score-percent").innerText = accuracy + "%";

  const results = document.getElementById("results");
  results.style.display = "block";
  results.scrollIntoView({ behavior: 'smooth' });
}

function resetAssessment() {
  if (confirm("Reset all answers and score?")) {
    document.querySelectorAll("input[type='radio']").forEach(el => el.checked = false);
    document.querySelectorAll(".q-block").forEach(el => {
      el.style.background = "transparent";
      el.style.borderLeftColor = "transparent";
    });
    document.getElementById("results").style.display = "none";
    window.scrollTo(0, 0);
  }
}

renderQuiz();
</script>
</body>
</html>
