<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collapsible Conic Sections Mind Map v3</title>
    <style>
        /* Make the SVG fill the viewport */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden; /* Prevent scrollbars on body */
        }
        #markmap {
            display: block;
            width: 100vw;
            height: 100vh;
        }
        /* Ensure KaTeX math aligns well */
        .katex { text-align: left; }

        /* ## ADD SPACING BETWEEN NODES VIA CSS MARGIN ## */
        /* Adjust margin values as needed. This adds space *around* the node content box */
        .markmap-node foreignObject {
             margin: 5px 8px; /* Add 5px vertical and 8px horizontal margin */
        }
        /* Optional: Style the box itself (Uncomment if you liked the blue boxes) */
        /*
        .markmap-node foreignObject > div {
             background-color: #eaf4ff;
             border: 1px solid #b4d7ff;
             padding: 4px 8px;
             border-radius: 5px;
             display: inline-block;
        }
        */

    </style>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-wcPF+Fs+qwHh+gMyXyXSQv/Fpvmbct5TfiT5JAP2IyxP7zCzoO9T4+g/YTD/OlgG" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="sha384-hIoBPJpTNx7kWjEoBu+eRUvPfpioVDRqeYvkRjFHjSbeN6ApN+MchUiwEbFeTZrw" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaL4M/kVf2oAObHmh+wHlXCHBjdC1ApJ1E0QJNhGzUyGcG/YMT/O+j" crossorigin="anonymous"
        onload="renderMathInElement(document.body, { delimiters: [ {left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}, {left: '\\(', right: '\\)', display: false}, {left: '\\[', right: '\\]', display: true} ], throwOnError: false });"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-lib@0.15.5"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-view@0.15.5"></script>

</head>
<body>

<svg id="markmap"></svg>

<script type="text/template" id="mindmap-data">
# Conic Sections

## Parabola
- **Definition:** Set of points equidistant from a focus (point) and a directrix (line).
- **Vertex at Origin (0, 0)**
  - **Vertical** ($x^2 = 4py$)
    - Opens Up ($p > 0$) / Down ($p < 0$)
    - Focus: $(0, p)$
    - Directrix: $y = -p$
    - Axis: $x = 0$
    - *Finding p:* $p = \frac{\text{coeff of } y}{4}$
  - **Horizontal** ($y^2 = 4px$)
    - Opens Right ($p > 0$) / Left ($p < 0$)
    - Focus: $(p, 0)$
    - Directrix: $x = -p$
    - Axis: $y = 0$
    - *Finding p:* $p = \frac{\text{coeff of } x}{4}$
- **Vertex at (h, k)**
  - **Vertical** ($(x - h)^2 = 4p(y - k)$)
    - Vertex: $(h, k)$
    - Focus: $(h, k + p)$
    - Directrix: $y = k - p$
    - Axis: $x = h$
    - *Finding p:* $p = \frac{\text{coeff of } (y-k)}{4}$
  - **Horizontal** ($(y - k)^2 = 4p(x - h)$)
    - Vertex: $(h, k)$
    - Focus: $(h + p, k)$
    - Directrix: $x = h - p$
    - Axis: $y = k$
    - *Finding p:* $p = \frac{\text{coeff of } (x-h)}{4}$
- **Key Features:** Vertex, Focus, Directrix, Axis of Symmetry

## Circle
- **Definition:** Set of points equidistant from a center point.
- **Standard Equation** ($(x - h)^2 + (y - k)^2 = r^2$)
  - Center: $(h, k)$
  - Radius: $r = \sqrt{\text{right side}}$
- **Center at Origin** ($x^2 + y^2 = r^2$)
  - Center: $(0, 0)$
  - Radius: $r$
- **Key Features:** Center, Radius

## Ellipse
- **Definition:** Set of points where the *sum* of distances to two foci is constant.
- **Center at (h, k)**
  - Let $a^2$ = larger denominator, $b^2$ = smaller denominator
  - *Finding c (focus dist):* $c^2 = a^2 - b^2$ (subtract denoms), $c = \sqrt{a^2 - b^2}$
  - **Horizontal Major Axis** ($a^2$ under x-term)
    - Equation: $\frac{(x - h)^2}{a^2} + \frac{(y - k)^2}{b^2} = 1$
    - Center: $(h, k)$
    - Vertices: $(h \pm a, k)$
    - Co-vertices: $(h, k \pm b)$
    - Foci: $(h \pm c, k)$
  - **Vertical Major Axis** ($a^2$ under y-term)
    - Equation: $\frac{(x - h)^2}{b^2} + \frac{(y - k)^2}{a^2} = 1$
    - Center: $(h, k)$
    - Vertices: $(h, k \pm a)$
    - Co-vertices: $(h \pm b, k)$
    - Foci: $(h, k \pm c)$
- **Key Features:** Center, Vertices, Co-vertices, Foci

## Hyperbola
- **Definition:** Set of points where the *difference* of distances to two foci is constant.
- **Center at (h, k)**
  - $a^2$ = denominator under POSITIVE term, $b^2$ = denominator under NEGATIVE term
  - *Finding c (focus dist):* $c^2 = a^2 + b^2$ (ADD denoms), $c = \sqrt{a^2 + b^2}$
  - **Horizontal Transverse Axis** (x-term positive)
    - Equation: $\frac{(x - h)^2}{a^2} - \frac{(y - k)^2}{b^2} = 1$
    - Center: $(h, k)$
    - Vertices: $(h \pm a, k)$
    - Foci: $(h \pm c, k)$
    - Asymptotes: $y - k = \pm \frac{b}{a}(x - h)$
  - **Vertical Transverse Axis** (y-term positive)
    - Equation: $\frac{(y - k)^2}{a^2} - \frac{(x - h)^2}{b^2} = 1$
    - Center: $(h, k)$
    - Vertices: $(h, k \pm a)$
    - Foci: $(h, k \pm c)$
    - Asymptotes: $y - k = \pm \frac{a}{b}(x - h)$
- **Key Features:** Center, Vertices, Foci, Asymptotes
</script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const { Transformer } = markmap;
    const { Markmap } = markmap;

    const transformer = new Transformer();
    const svgEl = document.getElementById('markmap');
    const dataEl = document.getElementById('mindmap-data');

    if (svgEl && dataEl) {
      const markdown = dataEl.textContent || dataEl.innerText;
      const { root } = transformer.transform(markdown);

      // ### Define options for Markmap: Collapse + Spacing ###
      const options = {
          initialExpandLevel: 0,   // Start collapsed
          spacingVertical: 15,     // Increase vertical space between siblings (Default: 5)
          spacingHorizontal: 65,  // Increase horizontal space between levels (Default: varies)
          // duration: 500,       // Optional animation duration
      };

      // Create the Markmap instance with options
      Markmap.create(svgEl, options, root);

      // KaTeX rendering should be handled by the explicit includes + onload attribute.
      // If math *still* fails, check the F12 Console for errors!

    } else {
        console.error("Could not find SVG element (#markmap) or data script (#mindmap-data)");
    }
  });
</script>

</body>
</html>
