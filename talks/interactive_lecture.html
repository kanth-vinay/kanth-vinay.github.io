<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Interactive Derivative Calculation</title>
    <link rel="stylesheet" href="https://unpkg.com/reveal.js/dist/reveal.css">
    <link rel="stylesheet" href="https://unpkg.com/reveal.js/dist/theme/black.css">
    
    <style>
      /* We'll still keep these classes for non-math highlighting */
      .op-add      { color: #3498db; font-weight: bold; }
      .op-sub      { color: #e74c3c; font-weight: bold; }
      .op-simplify { color: #27ae60; font-weight: bold; }
      .op-div      { color: #f39c12; font-weight: bold; }
      .op-limit    { color: #8e44ad; font-weight: bold; }

      .reveal .slides section {
        text-align: left;
      }
      .reveal .slides section h2,
      .reveal .slides section h3 {
        text-align: center;
      }
      .reveal .slides section p,
      .reveal .slides section h4 {
        margin-left: 20px;
        margin-right: 20px;
      }
      hr.fragment {
        margin-top: 25px;
        margin-bottom: 25px;
        border-color: rgba(255, 255, 255, 0.3);
      }
      .solution-step {
        background-color: rgba(255,255,255,0.05);
        border-radius: 8px;
        padding: 10px;
        margin-bottom:10px;
      }
      
      .reveal .scroll-container {
        height: 700px;
        overflow-y: auto;
        padding-right: 10px;
        margin-bottom: 20px;
      }
      
      .reveal .scroll-container::-webkit-scrollbar {
        width: 8px;
      }
      .reveal .scroll-container::-webkit-scrollbar-track {
        background: rgba(255,255,255,0.1);
        border-radius: 4px;
      }
      .reveal .scroll-container::-webkit-scrollbar-thumb {
        background: rgba(255,255,255,0.3);
        border-radius: 4px;
      }
      .reveal .scroll-container::-webkit-scrollbar-thumb:hover {
        background: rgba(255,255,255,0.5);
      }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">

            <section>
                <h2>Derivative of \(f(x)=x^2\)</h2>
                <p style="text-align: center;">We want to find the derivative of the function \(f(x)=x^2\) using the limit definition of the derivative.</p>
                <p style="text-align: center; font-size: 1.2em; margin-top: 20px;">
                    <strong>The definition is: \(f'(x)=\lim_{h\to0}\frac{f(x+h)-f(x)}{h}\)</strong>
                </p>
                <p class="fragment" style="text-align: center; margin-top: 40px; font-style: italic;">
                    Before we proceed step-by-step, can you outline the main algebraic operations you anticipate we'll need to perform to evaluate this limit?
                </p>
            </section>

            <section>
                <h3 style="margin-bottom: 30px;">Let's Work Through It!</h3>
                <p style="text-align:center; margin-bottom: 20px;">Try to solve each part yourself before clicking to reveal the next step.</p>

                <div class="scroll-container">
                  <div class="fragment solution-step">
                      <h4>1. Substitute \(f(x+h)\) and \(f(x)\) into the definition</h4>
                      <p class="fragment">Given \(f(x)=x^2\), what does \(f(x+h)\) become? How does the definition look after substitution?</p>
                      <p class="fragment" style="margin-top:15px;">
                          Since \(f(x) = x^2\), then \(f(x+h) = (x+h)^2\).
                      </p>
                      <p class="fragment">
                          So, substituting into the definition, we get:
                          <br>
                          \[f'(x) = \lim_{h\to0} \frac{(x+h)^2 - x^2}{h}\]
                      </p>
                  </div>
                  <hr class="fragment">

                  <div class="fragment solution-step">
                      <h4>2. Expand the term \((x+h)^2\)</h4>
                      <p class="fragment">What is the expansion of \((x+h)^2\)?</p>
                      <p class="fragment" style="margin-top:15px;">
                          \((x+h)^2 = \textcolor{#3498db}{x^2 + 2xh + h^2}\)
                      </p>
                      <p class="fragment">Now, let's substitute this expansion back into our limit expression:</p>
                      <p class="fragment">
                          \[f'(x) = \lim_{h\to0} \frac{(\textcolor{#3498db}{x^2 + 2xh + h^2}) - x^2}{h}\]
                      </p>
                  </div>
                  <hr class="fragment">

                  <div class="fragment solution-step">
                      <h4>3. Simplify the numerator</h4>
                      <p class="fragment">Look at the numerator: \((x^2 + 2xh + h^2) - x^2\). Which terms can be combined or cancelled?</p>
                      <p class="fragment" style="margin-top:15px;">
                          \(x^2 + 2xh + h^2 - \textcolor{#e74c3c}{x^2} = \textcolor{#27ae60}{2xh + h^2}\)
                      </p>
                      <p class="fragment">The expression now simplifies to:</p>
                      <p class="fragment">
                          \[f'(x) = \lim_{h\to0} \frac{\textcolor{#27ae60}{2xh + h^2}}{h}\]
                      </p>
                  </div>
                  <hr class="fragment">

                  <div class="fragment solution-step">
                      <h4>4. Factor out \(h\) from the numerator and cancel</h4>
                      <p class="fragment">The terms in the numerator, \(2xh + h^2\), both contain \(h\). What happens if we factor out \(h\) and simplify the fraction?</p>
                      <p class="fragment" style="margin-top:15px;">
                          Factoring \(h\) from the numerator: \(2xh + h^2 = h(2x+h)\).
                      </p>
                      <p class="fragment">So, we can rewrite the fraction and cancel \(h\) (since \(h \to 0\), \(h \neq 0\)):</p>
                      <p class="fragment">
                          \[\frac{\textcolor{#f39c12}{h(2x+h)}}{h} = \textcolor{#f39c12}{2x+h}\]
                      </p>
                      <p class="fragment">Our limit expression becomes much simpler:</p>
                      <p class="fragment">
                          \[f'(x) = \lim_{h\to0} (\textcolor{#f39c12}{2x+h})\]
                      </p>
                  </div>
                  <hr class="fragment">

                  <div class="fragment solution-step">
                      <h4>5. Evaluate the limit</h4>
                      <p class="fragment">Now, what is the limit of \((2x+h)\) as \(h\) approaches \(0\)?</p>
                      <p class="fragment" style="margin-top:15px;">
                          Substitute \(h=0\) into the expression:
                          \[\lim_{h\to0}(2x + h) = 2x + 0 = \textcolor{#8e44ad}{2x}\]
                      </p>
                  </div>
                  <hr class="fragment">

                  <div class="fragment solution-step">
                      <h4>Conclusion</h4>
                      <p class="fragment">Therefore, the derivative of \(f(x) = x^2\) is:</p>
                      <p class="fragment" style="font-size: 1.2em; text-align:center;">
                          <strong>\(f'(x) = 2x\)</strong>
                      </p>
                      <p class="fragment" style="text-align:center; margin-top: 20px;">Well done! You've successfully applied the limit definition to find the derivative.</p>
                  </div>
                </div>
            </section>

        </div>
    </div>

    <script src="https://unpkg.com/reveal.js/dist/reveal.js"></script>
    
    <!-- Load RevealJS plugins -->
    <script src="https://unpkg.com/reveal.js/plugin/math/math.js"></script>
    <script src="https://unpkg.com/reveal.js/plugin/notes/notes.js"></script>
    <script src="https://unpkg.com/reveal.js/plugin/markdown/markdown.js"></script>
    <script src="https://unpkg.com/reveal.js/plugin/highlight/highlight.js"></script>
    
    <script>
      Reveal.initialize({
        hash: true,
        slideNumber: 'c/t',
        controls: true,
        progress: true,
        center: true,
        width: "90%",
        height: "95%",
        margin: 0.04,
        plugins: [ 
          RevealMath.MathJax3,
          RevealNotes,
          RevealMarkdown,
          RevealHighlight
        ],
        // Enhanced MathJax configuration with color extension
        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',
          config: 'TeX-AMS_HTML-full',
          TeX: {
            extensions: ["AMSmath.js", "AMSsymbols.js", "noErrors.js", "noUndefined.js", "color.js"],
            Macros: {
              // You can define macros here if needed
            }
          }
        }
      });
      
      // Load MathJax with a longer delay to ensure proper initialization
      Reveal.addEventListener('ready', function() {
        setTimeout(function() {
          if (typeof MathJax !== 'undefined') {
            MathJax.typesetPromise().then(function() {
              console.log("Initial MathJax typesetting completed");
            }).catch(function(err) {
              console.log("MathJax error:", err);
            });
          }
        }, 1000); // Increased delay to 1000ms
      });
      
      // Re-typeset when slides change
      Reveal.addEventListener('slidechanged', function() {
        if (typeof MathJax !== 'undefined') {
          MathJax.typesetPromise().then(function() {
            console.log("Slide change MathJax typesetting completed");
          }).catch(function(err) {
            console.log("MathJax error on slide change:", err);
          });
        }
      });
      
      // Add fragment reveal handler to ensure math renders in fragments
      Reveal.addEventListener('fragmentshown', function() {
        if (typeof MathJax !== 'undefined') {
          MathJax.typesetPromise().then(function() {
            console.log("Fragment MathJax typesetting completed");
          }).catch(function(err) {
            console.log("MathJax error on fragment:", err);
          });
        }
      });
    </script>
</body>
</html>